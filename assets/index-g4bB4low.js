var _m=r=>{throw TypeError(r)};var Uh=(r,e,t)=>e.has(r)||_m("Cannot "+t);var A=(r,e,t)=>(Uh(r,e,"read from private field"),t?t.call(r):e.get(r)),ce=(r,e,t)=>e.has(r)?_m("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),ee=(r,e,t,n)=>(Uh(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Ze=(r,e,t)=>(Uh(r,e,"access private method"),t);var Sl=(r,e,t,n)=>({set _(s){ee(r,e,s,t)},get _(){return A(r,e,n)}});function nS(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function sS(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var $y={exports:{}},$u={},zy={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),iS=Symbol.for("react.portal"),oS=Symbol.for("react.fragment"),aS=Symbol.for("react.strict_mode"),lS=Symbol.for("react.profiler"),cS=Symbol.for("react.provider"),uS=Symbol.for("react.context"),hS=Symbol.for("react.forward_ref"),dS=Symbol.for("react.suspense"),fS=Symbol.for("react.memo"),pS=Symbol.for("react.lazy"),Sm=Symbol.iterator;function gS(r){return r===null||typeof r!="object"?null:(r=Sm&&r[Sm]||r["@@iterator"],typeof r=="function"?r:null)}var By={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uy=Object.assign,Wy={};function bo(r,e,t){this.props=r,this.context=e,this.refs=Wy,this.updater=t||By}bo.prototype.isReactComponent={};bo.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};bo.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Vy(){}Vy.prototype=bo.prototype;function Pp(r,e,t){this.props=r,this.context=e,this.refs=Wy,this.updater=t||By}var Dp=Pp.prototype=new Vy;Dp.constructor=Pp;Uy(Dp,bo.prototype);Dp.isPureReactComponent=!0;var Cm=Array.isArray,Hy=Object.prototype.hasOwnProperty,Ap={current:null},Yy={key:!0,ref:!0,__self:!0,__source:!0};function Gy(r,e,t){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Hy.call(e,n)&&!Yy.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(r&&r.defaultProps)for(n in a=r.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:nl,type:r,key:i,ref:o,props:s,_owner:Ap.current}}function mS(r,e){return{$$typeof:nl,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function Mp(r){return typeof r=="object"&&r!==null&&r.$$typeof===nl}function vS(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var jm=/\/+/g;function Wh(r,e){return typeof r=="object"&&r!==null&&r.key!=null?vS(""+r.key):e.toString(36)}function Cc(r,e,t,n,s){var i=typeof r;(i==="undefined"||i==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case nl:case iS:o=!0}}if(o)return o=r,s=s(o),r=n===""?"."+Wh(o,0):n,Cm(s)?(t="",r!=null&&(t=r.replace(jm,"$&/")+"/"),Cc(s,e,t,"",function(c){return c})):s!=null&&(Mp(s)&&(s=mS(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(jm,"$&/")+"/")+r)),e.push(s)),1;if(o=0,n=n===""?".":n+":",Cm(r))for(var a=0;a<r.length;a++){i=r[a];var l=n+Wh(i,a);o+=Cc(i,e,t,l,s)}else if(l=gS(r),typeof l=="function")for(r=l.call(r),a=0;!(i=r.next()).done;)i=i.value,l=n+Wh(i,a++),o+=Cc(i,e,t,l,s);else if(i==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cl(r,e,t){if(r==null)return r;var n=[],s=0;return Cc(r,n,"","",function(i){return e.call(t,i,s++)}),n}function yS(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var mt={current:null},jc={transition:null},xS={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:jc,ReactCurrentOwner:Ap};function Xy(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Cl,forEach:function(r,e,t){Cl(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return Cl(r,function(){e++}),e},toArray:function(r){return Cl(r,function(e){return e})||[]},only:function(r){if(!Mp(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};se.Component=bo;se.Fragment=oS;se.Profiler=lS;se.PureComponent=Pp;se.StrictMode=aS;se.Suspense=dS;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;se.act=Xy;se.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=Uy({},r.props),s=r.key,i=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ap.current),e.key!==void 0&&(s=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(l in e)Hy.call(e,l)&&!Yy.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:nl,type:r.type,key:s,ref:i,props:n,_owner:o}};se.createContext=function(r){return r={$$typeof:uS,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:cS,_context:r},r.Consumer=r};se.createElement=Gy;se.createFactory=function(r){var e=Gy.bind(null,r);return e.type=r,e};se.createRef=function(){return{current:null}};se.forwardRef=function(r){return{$$typeof:hS,render:r}};se.isValidElement=Mp;se.lazy=function(r){return{$$typeof:pS,_payload:{_status:-1,_result:r},_init:yS}};se.memo=function(r,e){return{$$typeof:fS,type:r,compare:e===void 0?null:e}};se.startTransition=function(r){var e=jc.transition;jc.transition={};try{r()}finally{jc.transition=e}};se.unstable_act=Xy;se.useCallback=function(r,e){return mt.current.useCallback(r,e)};se.useContext=function(r){return mt.current.useContext(r)};se.useDebugValue=function(){};se.useDeferredValue=function(r){return mt.current.useDeferredValue(r)};se.useEffect=function(r,e){return mt.current.useEffect(r,e)};se.useId=function(){return mt.current.useId()};se.useImperativeHandle=function(r,e,t){return mt.current.useImperativeHandle(r,e,t)};se.useInsertionEffect=function(r,e){return mt.current.useInsertionEffect(r,e)};se.useLayoutEffect=function(r,e){return mt.current.useLayoutEffect(r,e)};se.useMemo=function(r,e){return mt.current.useMemo(r,e)};se.useReducer=function(r,e,t){return mt.current.useReducer(r,e,t)};se.useRef=function(r){return mt.current.useRef(r)};se.useState=function(r){return mt.current.useState(r)};se.useSyncExternalStore=function(r,e,t){return mt.current.useSyncExternalStore(r,e,t)};se.useTransition=function(){return mt.current.useTransition()};se.version="18.3.1";zy.exports=se;var b=zy.exports;const $=Fy(b),qy=nS({__proto__:null,default:$},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=b,bS=Symbol.for("react.element"),_S=Symbol.for("react.fragment"),SS=Object.prototype.hasOwnProperty,CS=wS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jS={key:!0,ref:!0,__self:!0,__source:!0};function Ky(r,e,t){var n,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)SS.call(e,n)&&!jS.hasOwnProperty(n)&&(s[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:bS,type:r,key:i,ref:o,props:s,_owner:CS.current}}$u.Fragment=_S;$u.jsx=Ky;$u.jsxs=Ky;$y.exports=$u;var u=$y.exports,Qy={exports:{}},Wt={},Jy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(O,I){var U=O.length;O.push(I);e:for(;0<U;){var B=U-1>>>1,X=O[B];if(0<s(X,I))O[B]=I,O[U]=X,U=B;else break e}}function t(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var I=O[0],U=O.pop();if(U!==I){O[0]=U;e:for(var B=0,X=O.length,Q=X>>>1;B<Q;){var ae=2*(B+1)-1,Ue=O[ae],re=ae+1,Ye=O[re];if(0>s(Ue,U))re<X&&0>s(Ye,Ue)?(O[B]=Ye,O[re]=U,B=re):(O[B]=Ue,O[ae]=U,B=ae);else if(re<X&&0>s(Ye,U))O[B]=Ye,O[re]=U,B=re;else break e}}return I}function s(O,I){var U=O.sortIndex-I.sortIndex;return U!==0?U:O.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,g=!1,m=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var I=t(c);I!==null;){if(I.callback===null)n(c);else if(I.startTime<=O)n(c),I.sortIndex=I.expirationTime,e(l,I);else break;I=t(c)}}function _(O){if(p=!1,w(O),!m)if(t(l)!==null)m=!0,V(S);else{var I=t(c);I!==null&&G(_,I.startTime-O)}}function S(O,I){m=!1,p&&(p=!1,v(E),E=-1),g=!0;var U=f;try{for(w(I),d=t(l);d!==null&&(!(d.expirationTime>I)||O&&!F());){var B=d.callback;if(typeof B=="function"){d.callback=null,f=d.priorityLevel;var X=B(d.expirationTime<=I);I=r.unstable_now(),typeof X=="function"?d.callback=X:d===t(l)&&n(l),w(I)}else n(l);d=t(l)}if(d!==null)var Q=!0;else{var ae=t(c);ae!==null&&G(_,ae.startTime-I),Q=!1}return Q}finally{d=null,f=U,g=!1}}var C=!1,T=null,E=-1,D=5,N=-1;function F(){return!(r.unstable_now()-N<D)}function R(){if(T!==null){var O=r.unstable_now();N=O;var I=!0;try{I=T(!0,O)}finally{I?z():(C=!1,T=null)}}else C=!1}var z;if(typeof x=="function")z=function(){x(R)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Y=M.port2;M.port1.onmessage=R,z=function(){Y.postMessage(null)}}else z=function(){y(R,0)};function V(O){T=O,C||(C=!0,z())}function G(O,I){E=y(function(){O(r.unstable_now())},I)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(O){O.callback=null},r.unstable_continueExecution=function(){m||g||(m=!0,V(S))},r.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(O){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var U=f;f=I;try{return O()}finally{f=U}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(O,I){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=f;f=O;try{return I()}finally{f=U}},r.unstable_scheduleCallback=function(O,I,U){var B=r.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?B+U:B):U=B,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=U+X,O={id:h++,callback:I,priorityLevel:O,startTime:U,expirationTime:X,sortIndex:-1},U>B?(O.sortIndex=U,e(c,O),t(l)===null&&O===t(c)&&(p?(v(E),E=-1):p=!0,G(_,U-B))):(O.sortIndex=X,e(l,O),m||g||(m=!0,V(S))),O},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(O){var I=f;return function(){var U=f;f=I;try{return O.apply(this,arguments)}finally{f=U}}}})(Zy);Jy.exports=Zy;var kS=Jy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=b,Ut=kS;function L(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ex=new Set,_a={};function ti(r,e){lo(r,e),lo(r+"Capture",e)}function lo(r,e){for(_a[r]=e,r=0;r<e.length;r++)ex.add(e[r])}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qd=Object.prototype.hasOwnProperty,ES=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,km={},Tm={};function OS(r){return Qd.call(Tm,r)?!0:Qd.call(km,r)?!1:ES.test(r)?Tm[r]=!0:(km[r]=!0,!1)}function NS(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function PS(r,e,t,n){if(e===null||typeof e>"u"||NS(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vt(r,e,t,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Je[r]=new vt(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Je[e]=new vt(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Je[r]=new vt(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Je[r]=new vt(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Je[r]=new vt(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Je[r]=new vt(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Je[r]=new vt(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Je[r]=new vt(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Je[r]=new vt(r,5,!1,r.toLowerCase(),null,!1,!1)});var Rp=/[\-:]([a-z])/g;function Lp(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(Rp,Lp);Je[e]=new vt(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(Rp,Lp);Je[e]=new vt(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(Rp,Lp);Je[e]=new vt(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Je[r]=new vt(r,1,!1,r.toLowerCase(),null,!1,!1)});Je.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Je[r]=new vt(r,1,!1,r.toLowerCase(),null,!0,!0)});function Ip(r,e,t,n){var s=Je.hasOwnProperty(e)?Je[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PS(e,t,s,n)&&(t=null),n||s===null?OS(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):s.mustUseProperty?r[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,n=s.attributeNamespace,t===null?r.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var kn=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),ji=Symbol.for("react.portal"),ki=Symbol.for("react.fragment"),Fp=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),tx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),Zd=Symbol.for("react.suspense"),ef=Symbol.for("react.suspense_list"),zp=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),nx=Symbol.for("react.offscreen"),Em=Symbol.iterator;function zo(r){return r===null||typeof r!="object"?null:(r=Em&&r[Em]||r["@@iterator"],typeof r=="function"?r:null)}var Ee=Object.assign,Vh;function ea(r){if(Vh===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Vh=e&&e[1]||""}return`
`+Vh+r}var Hh=!1;function Yh(r,e){if(!r||Hh)return"";Hh=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(r,[],e)}else{try{e.call()}catch(c){n=c}r.call(e.prototype)}else{try{throw Error()}catch(c){n=c}r()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hh=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?ea(r):""}function DS(r){switch(r.tag){case 5:return ea(r.type);case 16:return ea("Lazy");case 13:return ea("Suspense");case 19:return ea("SuspenseList");case 0:case 2:case 15:return r=Yh(r.type,!1),r;case 11:return r=Yh(r.type.render,!1),r;case 1:return r=Yh(r.type,!0),r;default:return""}}function tf(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ki:return"Fragment";case ji:return"Portal";case Jd:return"Profiler";case Fp:return"StrictMode";case Zd:return"Suspense";case ef:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case rx:return(r.displayName||"Context")+".Consumer";case tx:return(r._context.displayName||"Context")+".Provider";case $p:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case zp:return e=r.displayName||null,e!==null?e:tf(r.type)||"Memo";case Bn:e=r._payload,r=r._init;try{return tf(r(e))}catch{}}return null}function AS(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tf(e);case 8:return e===Fp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sx(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MS(r){var e=sx(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function kl(r){r._valueTracker||(r._valueTracker=MS(r))}function ix(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=sx(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Gc(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function rf(r,e){var t=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function Om(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=ls(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ox(r,e){e=e.checked,e!=null&&Ip(r,"checked",e,!1)}function nf(r,e){ox(r,e);var t=ls(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?sf(r,e.type,t):e.hasOwnProperty("defaultValue")&&sf(r,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function Nm(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function sf(r,e,t){(e!=="number"||Gc(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var ta=Array.isArray;function zi(r,e,t,n){if(r=r.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<r.length;t++)s=e.hasOwnProperty("$"+r[t].value),r[t].selected!==s&&(r[t].selected=s),s&&n&&(r[t].defaultSelected=!0)}else{for(t=""+ls(t),e=null,s=0;s<r.length;s++){if(r[s].value===t){r[s].selected=!0,n&&(r[s].defaultSelected=!0);return}e!==null||r[s].disabled||(e=r[s])}e!==null&&(e.selected=!0)}}function of(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Pm(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(L(92));if(ta(t)){if(1<t.length)throw Error(L(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:ls(t)}}function ax(r,e){var t=ls(e.value),n=ls(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function Dm(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function lx(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function af(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?lx(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Tl,cx=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,s)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tl.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Sa(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RS=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(r){RS.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),oa[e]=oa[r]})});function ux(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||oa.hasOwnProperty(r)&&oa[r]?(""+e).trim():e+"px"}function hx(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=ux(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,s):r[t]=s}}var LS=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lf(r,e){if(e){if(LS[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function cf(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=null;function Bp(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var hf=null,Bi=null,Ui=null;function Am(r){if(r=ol(r)){if(typeof hf!="function")throw Error(L(280));var e=r.stateNode;e&&(e=Vu(e),hf(r.stateNode,r.type,e))}}function dx(r){Bi?Ui?Ui.push(r):Ui=[r]:Bi=r}function fx(){if(Bi){var r=Bi,e=Ui;if(Ui=Bi=null,Am(r),e)for(r=0;r<e.length;r++)Am(e[r])}}function px(r,e){return r(e)}function gx(){}var Gh=!1;function mx(r,e,t){if(Gh)return r(e,t);Gh=!0;try{return px(r,e,t)}finally{Gh=!1,(Bi!==null||Ui!==null)&&(gx(),fx())}}function Ca(r,e){var t=r.stateNode;if(t===null)return null;var n=Vu(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(L(231,e,typeof t));return t}var df=!1;if(mn)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){df=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{df=!1}function IS(r,e,t,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var aa=!1,Xc=null,qc=!1,ff=null,FS={onError:function(r){aa=!0,Xc=r}};function $S(r,e,t,n,s,i,o,a,l){aa=!1,Xc=null,IS.apply(FS,arguments)}function zS(r,e,t,n,s,i,o,a,l){if($S.apply(this,arguments),aa){if(aa){var c=Xc;aa=!1,Xc=null}else throw Error(L(198));qc||(qc=!0,ff=c)}}function ri(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function vx(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function Mm(r){if(ri(r)!==r)throw Error(L(188))}function BS(r){var e=r.alternate;if(!e){if(e=ri(r),e===null)throw Error(L(188));return e!==r?null:r}for(var t=r,n=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return Mm(s),r;if(i===n)return Mm(s),e;i=i.sibling}throw Error(L(188))}if(t.return!==n.return)t=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,n=i;break}if(a===n){o=!0,n=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,n=s;break}if(a===n){o=!0,n=i,t=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(t.alternate!==n)throw Error(L(190))}if(t.tag!==3)throw Error(L(188));return t.stateNode.current===t?r:e}function yx(r){return r=BS(r),r!==null?xx(r):null}function xx(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=xx(r);if(e!==null)return e;r=r.sibling}return null}var wx=Ut.unstable_scheduleCallback,Rm=Ut.unstable_cancelCallback,US=Ut.unstable_shouldYield,WS=Ut.unstable_requestPaint,De=Ut.unstable_now,VS=Ut.unstable_getCurrentPriorityLevel,Up=Ut.unstable_ImmediatePriority,bx=Ut.unstable_UserBlockingPriority,Kc=Ut.unstable_NormalPriority,HS=Ut.unstable_LowPriority,_x=Ut.unstable_IdlePriority,zu=null,Ur=null;function YS(r){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(zu,r,void 0,(r.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:qS,GS=Math.log,XS=Math.LN2;function qS(r){return r>>>=0,r===0?32:31-(GS(r)/XS|0)|0}var El=64,Ol=4194304;function ra(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Qc(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,s=r.suspendedLanes,i=r.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?n=ra(a):(i&=o,i!==0&&(n=ra(i)))}else o=t&~s,o!==0?n=ra(o):i!==0&&(n=ra(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-_r(e),s=1<<t,n|=r[t],e&=~s;return n}function KS(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QS(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,s=r.expirationTimes,i=r.pendingLanes;0<i;){var o=31-_r(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&n)&&(s[o]=KS(a,e)):l<=e&&(r.expiredLanes|=a),i&=~a}}function pf(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Sx(){var r=El;return El<<=1,!(El&4194240)&&(El=64),r}function Xh(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function sl(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-_r(e),r[e]=t}function JS(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var s=31-_r(t),i=1<<s;e[s]=0,n[s]=-1,r[s]=-1,t&=~i}}function Wp(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-_r(t),s=1<<n;s&e|r[n]&e&&(r[n]|=e),t&=~s}}var de=0;function Cx(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var jx,Vp,kx,Tx,Ex,gf=!1,Nl=[],es=null,ts=null,rs=null,ja=new Map,ka=new Map,Wn=[],ZS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lm(r,e){switch(r){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":ja.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(e.pointerId)}}function Uo(r,e,t,n,s,i){return r===null||r.nativeEvent!==i?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ol(e),e!==null&&Vp(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),r)}function eC(r,e,t,n,s){switch(e){case"focusin":return es=Uo(es,r,e,t,n,s),!0;case"dragenter":return ts=Uo(ts,r,e,t,n,s),!0;case"mouseover":return rs=Uo(rs,r,e,t,n,s),!0;case"pointerover":var i=s.pointerId;return ja.set(i,Uo(ja.get(i)||null,r,e,t,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ka.set(i,Uo(ka.get(i)||null,r,e,t,n,s)),!0}return!1}function Ox(r){var e=Ms(r.target);if(e!==null){var t=ri(e);if(t!==null){if(e=t.tag,e===13){if(e=vx(t),e!==null){r.blockedOn=e,Ex(r.priority,function(){kx(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function kc(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=mf(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);uf=n,t.target.dispatchEvent(n),uf=null}else return e=ol(t),e!==null&&Vp(e),r.blockedOn=t,!1;e.shift()}return!0}function Im(r,e,t){kc(r)&&t.delete(e)}function tC(){gf=!1,es!==null&&kc(es)&&(es=null),ts!==null&&kc(ts)&&(ts=null),rs!==null&&kc(rs)&&(rs=null),ja.forEach(Im),ka.forEach(Im)}function Wo(r,e){r.blockedOn===e&&(r.blockedOn=null,gf||(gf=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,tC)))}function Ta(r){function e(s){return Wo(s,r)}if(0<Nl.length){Wo(Nl[0],r);for(var t=1;t<Nl.length;t++){var n=Nl[t];n.blockedOn===r&&(n.blockedOn=null)}}for(es!==null&&Wo(es,r),ts!==null&&Wo(ts,r),rs!==null&&Wo(rs,r),ja.forEach(e),ka.forEach(e),t=0;t<Wn.length;t++)n=Wn[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Wn.length&&(t=Wn[0],t.blockedOn===null);)Ox(t),t.blockedOn===null&&Wn.shift()}var Wi=kn.ReactCurrentBatchConfig,Jc=!0;function rC(r,e,t,n){var s=de,i=Wi.transition;Wi.transition=null;try{de=1,Hp(r,e,t,n)}finally{de=s,Wi.transition=i}}function nC(r,e,t,n){var s=de,i=Wi.transition;Wi.transition=null;try{de=4,Hp(r,e,t,n)}finally{de=s,Wi.transition=i}}function Hp(r,e,t,n){if(Jc){var s=mf(r,e,t,n);if(s===null)sd(r,e,n,Zc,t),Lm(r,n);else if(eC(s,r,e,t,n))n.stopPropagation();else if(Lm(r,n),e&4&&-1<ZS.indexOf(r)){for(;s!==null;){var i=ol(s);if(i!==null&&jx(i),i=mf(r,e,t,n),i===null&&sd(r,e,n,Zc,t),i===s)break;s=i}s!==null&&n.stopPropagation()}else sd(r,e,n,null,t)}}var Zc=null;function mf(r,e,t,n){if(Zc=null,r=Bp(n),r=Ms(r),r!==null)if(e=ri(r),e===null)r=null;else if(t=e.tag,t===13){if(r=vx(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Zc=r,null}function Nx(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VS()){case Up:return 1;case bx:return 4;case Kc:case HS:return 16;case _x:return 536870912;default:return 16}default:return 16}}var Qn=null,Yp=null,Tc=null;function Px(){if(Tc)return Tc;var r,e=Yp,t=e.length,n,s="value"in Qn?Qn.value:Qn.textContent,i=s.length;for(r=0;r<t&&e[r]===s[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===s[i-n];n++);return Tc=s.slice(r,1<n?1-n:void 0)}function Ec(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function Pl(){return!0}function Fm(){return!1}function Vt(r){function e(t,n,s,i,o){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pl:Fm,this.isPropagationStopped=Fm,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gp=Vt(_o),il=Ee({},_o,{view:0,detail:0}),sC=Vt(il),qh,Kh,Vo,Bu=Ee({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xp,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Vo&&(Vo&&r.type==="mousemove"?(qh=r.screenX-Vo.screenX,Kh=r.screenY-Vo.screenY):Kh=qh=0,Vo=r),qh)},movementY:function(r){return"movementY"in r?r.movementY:Kh}}),$m=Vt(Bu),iC=Ee({},Bu,{dataTransfer:0}),oC=Vt(iC),aC=Ee({},il,{relatedTarget:0}),Qh=Vt(aC),lC=Ee({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),cC=Vt(lC),uC=Ee({},_o,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),hC=Vt(uC),dC=Ee({},_o,{data:0}),zm=Vt(dC),fC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mC(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=gC[r])?!!e[r]:!1}function Xp(){return mC}var vC=Ee({},il,{key:function(r){if(r.key){var e=fC[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=Ec(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?pC[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xp,charCode:function(r){return r.type==="keypress"?Ec(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ec(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yC=Vt(vC),xC=Ee({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bm=Vt(xC),wC=Ee({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xp}),bC=Vt(wC),_C=Ee({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),SC=Vt(_C),CC=Ee({},Bu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),jC=Vt(CC),kC=[9,13,27,32],qp=mn&&"CompositionEvent"in window,la=null;mn&&"documentMode"in document&&(la=document.documentMode);var TC=mn&&"TextEvent"in window&&!la,Dx=mn&&(!qp||la&&8<la&&11>=la),Um=" ",Wm=!1;function Ax(r,e){switch(r){case"keyup":return kC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mx(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ti=!1;function EC(r,e){switch(r){case"compositionend":return Mx(e);case"keypress":return e.which!==32?null:(Wm=!0,Um);case"textInput":return r=e.data,r===Um&&Wm?null:r;default:return null}}function OC(r,e){if(Ti)return r==="compositionend"||!qp&&Ax(r,e)?(r=Px(),Tc=Yp=Qn=null,Ti=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dx&&e.locale!=="ko"?null:e.data;default:return null}}var NC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!NC[r.type]:e==="textarea"}function Rx(r,e,t,n){dx(n),e=eu(e,"onChange"),0<e.length&&(t=new Gp("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var ca=null,Ea=null;function PC(r){Yx(r,0)}function Uu(r){var e=Ni(r);if(ix(e))return r}function DC(r,e){if(r==="change")return e}var Lx=!1;if(mn){var Jh;if(mn){var Zh="oninput"in document;if(!Zh){var Hm=document.createElement("div");Hm.setAttribute("oninput","return;"),Zh=typeof Hm.oninput=="function"}Jh=Zh}else Jh=!1;Lx=Jh&&(!document.documentMode||9<document.documentMode)}function Ym(){ca&&(ca.detachEvent("onpropertychange",Ix),Ea=ca=null)}function Ix(r){if(r.propertyName==="value"&&Uu(Ea)){var e=[];Rx(e,Ea,r,Bp(r)),mx(PC,e)}}function AC(r,e,t){r==="focusin"?(Ym(),ca=e,Ea=t,ca.attachEvent("onpropertychange",Ix)):r==="focusout"&&Ym()}function MC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Uu(Ea)}function RC(r,e){if(r==="click")return Uu(e)}function LC(r,e){if(r==="input"||r==="change")return Uu(e)}function IC(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var jr=typeof Object.is=="function"?Object.is:IC;function Oa(r,e){if(jr(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!Qd.call(e,s)||!jr(r[s],e[s]))return!1}return!0}function Gm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xm(r,e){var t=Gm(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Gm(t)}}function Fx(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?Fx(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function $x(){for(var r=window,e=Gc();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Gc(r.document)}return e}function Kp(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function FC(r){var e=$x(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&Fx(t.ownerDocument.documentElement,t)){if(n!==null&&Kp(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var s=t.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!r.extend&&i>n&&(s=n,n=i,i=s),s=Xm(t,i);var o=Xm(t,n);s&&o&&(r.rangeCount!==1||r.anchorNode!==s.node||r.anchorOffset!==s.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),r.removeAllRanges(),i>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var $C=mn&&"documentMode"in document&&11>=document.documentMode,Ei=null,vf=null,ua=null,yf=!1;function qm(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;yf||Ei==null||Ei!==Gc(n)||(n=Ei,"selectionStart"in n&&Kp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ua&&Oa(ua,n)||(ua=n,n=eu(vf,"onSelect"),0<n.length&&(e=new Gp("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Ei)))}function Dl(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Oi={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},ed={},zx={};mn&&(zx=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Wu(r){if(ed[r])return ed[r];if(!Oi[r])return r;var e=Oi[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in zx)return ed[r]=e[t];return r}var Bx=Wu("animationend"),Ux=Wu("animationiteration"),Wx=Wu("animationstart"),Vx=Wu("transitionend"),Hx=new Map,Km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(r,e){Hx.set(r,e),ti(e,[r])}for(var td=0;td<Km.length;td++){var rd=Km[td],zC=rd.toLowerCase(),BC=rd[0].toUpperCase()+rd.slice(1);vs(zC,"on"+BC)}vs(Bx,"onAnimationEnd");vs(Ux,"onAnimationIteration");vs(Wx,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(Vx,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UC=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function Qm(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,zS(n,e,void 0,r),r.currentTarget=null}function Yx(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Qm(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Qm(s,a,c),i=l}}}if(qc)throw r=ff,qc=!1,ff=null,r}function we(r,e){var t=e[Sf];t===void 0&&(t=e[Sf]=new Set);var n=r+"__bubble";t.has(n)||(Gx(e,r,2,!1),t.add(n))}function nd(r,e,t){var n=0;e&&(n|=4),Gx(t,r,n,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Na(r){if(!r[Al]){r[Al]=!0,ex.forEach(function(t){t!=="selectionchange"&&(UC.has(t)||nd(t,!1,r),nd(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[Al]||(e[Al]=!0,nd("selectionchange",!1,e))}}function Gx(r,e,t,n){switch(Nx(e)){case 1:var s=rC;break;case 4:s=nC;break;default:s=Hp}t=s.bind(null,e,t,r),s=void 0,!df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?r.addEventListener(e,t,{capture:!0,passive:s}):r.addEventListener(e,t,!0):s!==void 0?r.addEventListener(e,t,{passive:s}):r.addEventListener(e,t,!1)}function sd(r,e,t,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}mx(function(){var c=i,h=Bp(t),d=[];e:{var f=Hx.get(r);if(f!==void 0){var g=Gp,m=r;switch(r){case"keypress":if(Ec(t)===0)break e;case"keydown":case"keyup":g=yC;break;case"focusin":m="focus",g=Qh;break;case"focusout":m="blur",g=Qh;break;case"beforeblur":case"afterblur":g=Qh;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=$m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=oC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=bC;break;case Bx:case Ux:case Wx:g=cC;break;case Vx:g=SC;break;case"scroll":g=sC;break;case"wheel":g=jC;break;case"copy":case"cut":case"paste":g=hC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Bm}var p=(e&4)!==0,y=!p&&r==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var x=c,w;x!==null;){w=x;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=Ca(x,v),_!=null&&p.push(Pa(x,_,w)))),y)break;x=x.return}0<p.length&&(f=new g(f,m,null,t,h),d.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=r==="mouseover"||r==="pointerover",g=r==="mouseout"||r==="pointerout",f&&t!==uf&&(m=t.relatedTarget||t.fromElement)&&(Ms(m)||m[vn]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=t.relatedTarget||t.toElement,g=c,m=m?Ms(m):null,m!==null&&(y=ri(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=c),g!==m)){if(p=$m,_="onMouseLeave",v="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(p=Bm,_="onPointerLeave",v="onPointerEnter",x="pointer"),y=g==null?f:Ni(g),w=m==null?f:Ni(m),f=new p(_,x+"leave",g,t,h),f.target=y,f.relatedTarget=w,_=null,Ms(h)===c&&(p=new p(v,x+"enter",m,t,h),p.target=w,p.relatedTarget=y,_=p),y=_,g&&m)t:{for(p=g,v=m,x=0,w=p;w;w=hi(w))x++;for(w=0,_=v;_;_=hi(_))w++;for(;0<x-w;)p=hi(p),x--;for(;0<w-x;)v=hi(v),w--;for(;x--;){if(p===v||v!==null&&p===v.alternate)break t;p=hi(p),v=hi(v)}p=null}else p=null;g!==null&&Jm(d,f,g,p,!1),m!==null&&y!==null&&Jm(d,y,m,p,!0)}}e:{if(f=c?Ni(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var S=DC;else if(Vm(f))if(Lx)S=LC;else{S=MC;var C=AC}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=RC);if(S&&(S=S(r,c))){Rx(d,S,t,h);break e}C&&C(r,f,c),r==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&sf(f,"number",f.value)}switch(C=c?Ni(c):window,r){case"focusin":(Vm(C)||C.contentEditable==="true")&&(Ei=C,vf=c,ua=null);break;case"focusout":ua=vf=Ei=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,qm(d,t,h);break;case"selectionchange":if($C)break;case"keydown":case"keyup":qm(d,t,h)}var T;if(qp)e:{switch(r){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ti?Ax(r,t)&&(E="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(Dx&&t.locale!=="ko"&&(Ti||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ti&&(T=Px()):(Qn=h,Yp="value"in Qn?Qn.value:Qn.textContent,Ti=!0)),C=eu(c,E),0<C.length&&(E=new zm(E,r,null,t,h),d.push({event:E,listeners:C}),T?E.data=T:(T=Mx(t),T!==null&&(E.data=T)))),(T=TC?EC(r,t):OC(r,t))&&(c=eu(c,"onBeforeInput"),0<c.length&&(h=new zm("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=T))}Yx(d,e)})}function Pa(r,e,t){return{instance:r,listener:e,currentTarget:t}}function eu(r,e){for(var t=e+"Capture",n=[];r!==null;){var s=r,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ca(r,t),i!=null&&n.unshift(Pa(r,i,s)),i=Ca(r,e),i!=null&&n.push(Pa(r,i,s))),r=r.return}return n}function hi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Jm(r,e,t,n,s){for(var i=e._reactName,o=[];t!==null&&t!==n;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=Ca(t,i),l!=null&&o.unshift(Pa(t,l,a))):s||(l=Ca(t,i),l!=null&&o.push(Pa(t,l,a)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var WC=/\r\n?/g,VC=/\u0000|\uFFFD/g;function Zm(r){return(typeof r=="string"?r:""+r).replace(WC,`
`).replace(VC,"")}function Ml(r,e,t){if(e=Zm(e),Zm(r)!==e&&t)throw Error(L(425))}function tu(){}var xf=null,wf=null;function bf(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _f=typeof setTimeout=="function"?setTimeout:void 0,HC=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,YC=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(r){return e0.resolve(null).then(r).catch(GC)}:_f;function GC(r){setTimeout(function(){throw r})}function id(r,e){var t=e,n=0;do{var s=t.nextSibling;if(r.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){r.removeChild(s),Ta(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);Ta(e)}function ns(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function t0(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var So=Math.random().toString(36).slice(2),Fr="__reactFiber$"+So,Da="__reactProps$"+So,vn="__reactContainer$"+So,Sf="__reactEvents$"+So,XC="__reactListeners$"+So,qC="__reactHandles$"+So;function Ms(r){var e=r[Fr];if(e)return e;for(var t=r.parentNode;t;){if(e=t[vn]||t[Fr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=t0(r);r!==null;){if(t=r[Fr])return t;r=t0(r)}return e}r=t,t=r.parentNode}return null}function ol(r){return r=r[Fr]||r[vn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Ni(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(L(33))}function Vu(r){return r[Da]||null}var Cf=[],Pi=-1;function ys(r){return{current:r}}function be(r){0>Pi||(r.current=Cf[Pi],Cf[Pi]=null,Pi--)}function me(r,e){Pi++,Cf[Pi]=r.current,r.current=e}var cs={},at=ys(cs),St=ys(!1),Gs=cs;function co(r,e){var t=r.type.contextTypes;if(!t)return cs;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(r){return r=r.childContextTypes,r!=null}function ru(){be(St),be(at)}function r0(r,e,t){if(at.current!==cs)throw Error(L(168));me(at,e),me(St,t)}function Xx(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(L(108,AS(r)||"Unknown",s));return Ee({},t,n)}function nu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||cs,Gs=at.current,me(at,r),me(St,St.current),!0}function n0(r,e,t){var n=r.stateNode;if(!n)throw Error(L(169));t?(r=Xx(r,e,Gs),n.__reactInternalMemoizedMergedChildContext=r,be(St),be(at),me(at,r)):be(St),me(St,t)}var on=null,Hu=!1,od=!1;function qx(r){on===null?on=[r]:on.push(r)}function KC(r){Hu=!0,qx(r)}function xs(){if(!od&&on!==null){od=!0;var r=0,e=de;try{var t=on;for(de=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}on=null,Hu=!1}catch(s){throw on!==null&&(on=on.slice(r+1)),wx(Up,xs),s}finally{de=e,od=!1}}return null}var Di=[],Ai=0,su=null,iu=0,qt=[],Kt=0,Xs=null,cn=1,un="";function Es(r,e){Di[Ai++]=iu,Di[Ai++]=su,su=r,iu=e}function Kx(r,e,t){qt[Kt++]=cn,qt[Kt++]=un,qt[Kt++]=Xs,Xs=r;var n=cn;r=un;var s=32-_r(n)-1;n&=~(1<<s),t+=1;var i=32-_r(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,cn=1<<32-_r(e)+s|t<<s|n,un=i+r}else cn=1<<i|t<<s|n,un=r}function Qp(r){r.return!==null&&(Es(r,1),Kx(r,1,0))}function Jp(r){for(;r===su;)su=Di[--Ai],Di[Ai]=null,iu=Di[--Ai],Di[Ai]=null;for(;r===Xs;)Xs=qt[--Kt],qt[Kt]=null,un=qt[--Kt],qt[Kt]=null,cn=qt[--Kt],qt[Kt]=null}var zt=null,$t=null,_e=!1,vr=null;function Qx(r,e){var t=Zt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function s0(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,zt=r,$t=ns(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,zt=r,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xs!==null?{id:cn,overflow:un}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Zt(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,zt=r,$t=null,!0):!1;default:return!1}}function jf(r){return(r.mode&1)!==0&&(r.flags&128)===0}function kf(r){if(_e){var e=$t;if(e){var t=e;if(!s0(r,e)){if(jf(r))throw Error(L(418));e=ns(t.nextSibling);var n=zt;e&&s0(r,e)?Qx(n,t):(r.flags=r.flags&-4097|2,_e=!1,zt=r)}}else{if(jf(r))throw Error(L(418));r.flags=r.flags&-4097|2,_e=!1,zt=r}}}function i0(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;zt=r}function Rl(r){if(r!==zt)return!1;if(!_e)return i0(r),_e=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!bf(r.type,r.memoizedProps)),e&&(e=$t)){if(jf(r))throw Jx(),Error(L(418));for(;e;)Qx(r,e),e=ns(e.nextSibling)}if(i0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){$t=ns(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}$t=null}}else $t=zt?ns(r.stateNode.nextSibling):null;return!0}function Jx(){for(var r=$t;r;)r=ns(r.nextSibling)}function uo(){$t=zt=null,_e=!1}function Zp(r){vr===null?vr=[r]:vr.push(r)}var QC=kn.ReactCurrentBatchConfig;function Ho(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(L(309));var n=t.stateNode}if(!n)throw Error(L(147,r));var s=n,i=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof r!="string")throw Error(L(284));if(!t._owner)throw Error(L(290,r))}return r}function Ll(r,e){throw r=Object.prototype.toString.call(e),Error(L(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function o0(r){var e=r._init;return e(r._payload)}function Zx(r){function e(v,x){if(r){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function t(v,x){if(!r)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=as(v,x),v.index=0,v.sibling=null,v}function i(v,x,w){return v.index=w,r?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return r&&v.alternate===null&&(v.flags|=2),v}function a(v,x,w,_){return x===null||x.tag!==6?(x=fd(w,v.mode,_),x.return=v,x):(x=s(x,w),x.return=v,x)}function l(v,x,w,_){var S=w.type;return S===ki?h(v,x,w.props.children,_,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Bn&&o0(S)===x.type)?(_=s(x,w.props),_.ref=Ho(v,x,w),_.return=v,_):(_=Rc(w.type,w.key,w.props,null,v.mode,_),_.ref=Ho(v,x,w),_.return=v,_)}function c(v,x,w,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=pd(w,v.mode,_),x.return=v,x):(x=s(x,w.children||[]),x.return=v,x)}function h(v,x,w,_,S){return x===null||x.tag!==7?(x=Vs(w,v.mode,_,S),x.return=v,x):(x=s(x,w),x.return=v,x)}function d(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=fd(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jl:return w=Rc(x.type,x.key,x.props,null,v.mode,w),w.ref=Ho(v,null,x),w.return=v,w;case ji:return x=pd(x,v.mode,w),x.return=v,x;case Bn:var _=x._init;return d(v,_(x._payload),w)}if(ta(x)||zo(x))return x=Vs(x,v.mode,w,null),x.return=v,x;Ll(v,x)}return null}function f(v,x,w,_){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(v,x,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jl:return w.key===S?l(v,x,w,_):null;case ji:return w.key===S?c(v,x,w,_):null;case Bn:return S=w._init,f(v,x,S(w._payload),_)}if(ta(w)||zo(w))return S!==null?null:h(v,x,w,_,null);Ll(v,w)}return null}function g(v,x,w,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,a(x,v,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case jl:return v=v.get(_.key===null?w:_.key)||null,l(x,v,_,S);case ji:return v=v.get(_.key===null?w:_.key)||null,c(x,v,_,S);case Bn:var C=_._init;return g(v,x,w,C(_._payload),S)}if(ta(_)||zo(_))return v=v.get(w)||null,h(x,v,_,S,null);Ll(x,_)}return null}function m(v,x,w,_){for(var S=null,C=null,T=x,E=x=0,D=null;T!==null&&E<w.length;E++){T.index>E?(D=T,T=null):D=T.sibling;var N=f(v,T,w[E],_);if(N===null){T===null&&(T=D);break}r&&T&&N.alternate===null&&e(v,T),x=i(N,x,E),C===null?S=N:C.sibling=N,C=N,T=D}if(E===w.length)return t(v,T),_e&&Es(v,E),S;if(T===null){for(;E<w.length;E++)T=d(v,w[E],_),T!==null&&(x=i(T,x,E),C===null?S=T:C.sibling=T,C=T);return _e&&Es(v,E),S}for(T=n(v,T);E<w.length;E++)D=g(T,v,E,w[E],_),D!==null&&(r&&D.alternate!==null&&T.delete(D.key===null?E:D.key),x=i(D,x,E),C===null?S=D:C.sibling=D,C=D);return r&&T.forEach(function(F){return e(v,F)}),_e&&Es(v,E),S}function p(v,x,w,_){var S=zo(w);if(typeof S!="function")throw Error(L(150));if(w=S.call(w),w==null)throw Error(L(151));for(var C=S=null,T=x,E=x=0,D=null,N=w.next();T!==null&&!N.done;E++,N=w.next()){T.index>E?(D=T,T=null):D=T.sibling;var F=f(v,T,N.value,_);if(F===null){T===null&&(T=D);break}r&&T&&F.alternate===null&&e(v,T),x=i(F,x,E),C===null?S=F:C.sibling=F,C=F,T=D}if(N.done)return t(v,T),_e&&Es(v,E),S;if(T===null){for(;!N.done;E++,N=w.next())N=d(v,N.value,_),N!==null&&(x=i(N,x,E),C===null?S=N:C.sibling=N,C=N);return _e&&Es(v,E),S}for(T=n(v,T);!N.done;E++,N=w.next())N=g(T,v,E,N.value,_),N!==null&&(r&&N.alternate!==null&&T.delete(N.key===null?E:N.key),x=i(N,x,E),C===null?S=N:C.sibling=N,C=N);return r&&T.forEach(function(R){return e(v,R)}),_e&&Es(v,E),S}function y(v,x,w,_){if(typeof w=="object"&&w!==null&&w.type===ki&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case jl:e:{for(var S=w.key,C=x;C!==null;){if(C.key===S){if(S=w.type,S===ki){if(C.tag===7){t(v,C.sibling),x=s(C,w.props.children),x.return=v,v=x;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Bn&&o0(S)===C.type){t(v,C.sibling),x=s(C,w.props),x.ref=Ho(v,C,w),x.return=v,v=x;break e}t(v,C);break}else e(v,C);C=C.sibling}w.type===ki?(x=Vs(w.props.children,v.mode,_,w.key),x.return=v,v=x):(_=Rc(w.type,w.key,w.props,null,v.mode,_),_.ref=Ho(v,x,w),_.return=v,v=_)}return o(v);case ji:e:{for(C=w.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){t(v,x.sibling),x=s(x,w.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=pd(w,v.mode,_),x.return=v,v=x}return o(v);case Bn:return C=w._init,y(v,x,C(w._payload),_)}if(ta(w))return m(v,x,w,_);if(zo(w))return p(v,x,w,_);Ll(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(t(v,x.sibling),x=s(x,w),x.return=v,v=x):(t(v,x),x=fd(w,v.mode,_),x.return=v,v=x),o(v)):t(v,x)}return y}var ho=Zx(!0),ew=Zx(!1),ou=ys(null),au=null,Mi=null,eg=null;function tg(){eg=Mi=au=null}function rg(r){var e=ou.current;be(ou),r._currentValue=e}function Tf(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Vi(r,e){au=r,eg=Mi=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(_t=!0),r.firstContext=null)}function rr(r){var e=r._currentValue;if(eg!==r)if(r={context:r,memoizedValue:e,next:null},Mi===null){if(au===null)throw Error(L(308));Mi=r,au.dependencies={lanes:0,firstContext:r}}else Mi=Mi.next=r;return e}var Rs=null;function ng(r){Rs===null?Rs=[r]:Rs.push(r)}function tw(r,e,t,n){var s=e.interleaved;return s===null?(t.next=t,ng(e)):(t.next=s.next,s.next=t),e.interleaved=t,yn(r,n)}function yn(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Un=!1;function sg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rw(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function pn(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,yn(r,t)}return s=n.interleaved,s===null?(e.next=e,ng(n)):(e.next=s.next,s.next=e),n.interleaved=e,yn(r,t)}function Oc(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Wp(r,t)}}function a0(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function lu(r,e,t,n){var s=r.updateQueue;Un=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=r.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=r,p=a;switch(f=e,g=t,p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(g,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(g,d,f):m,f==null)break e;d=Ee({},d,f);break e;case 2:Un=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ks|=o,r.lanes=o,r.memoizedState=d}}function l0(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error(L(191,s));s.call(n)}}}var al={},Wr=ys(al),Aa=ys(al),Ma=ys(al);function Ls(r){if(r===al)throw Error(L(174));return r}function ig(r,e){switch(me(Ma,e),me(Aa,r),me(Wr,al),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:af(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=af(e,r)}be(Wr),me(Wr,e)}function fo(){be(Wr),be(Aa),be(Ma)}function nw(r){Ls(Ma.current);var e=Ls(Wr.current),t=af(e,r.type);e!==t&&(me(Aa,r),me(Wr,t))}function og(r){Aa.current===r&&(be(Wr),be(Aa))}var ke=ys(0);function cu(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ad=[];function ag(){for(var r=0;r<ad.length;r++)ad[r]._workInProgressVersionPrimary=null;ad.length=0}var Nc=kn.ReactCurrentDispatcher,ld=kn.ReactCurrentBatchConfig,qs=0,Te=null,Fe=null,Ve=null,uu=!1,ha=!1,Ra=0,JC=0;function et(){throw Error(L(321))}function lg(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!jr(r[t],e[t]))return!1;return!0}function cg(r,e,t,n,s,i){if(qs=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nc.current=r===null||r.memoizedState===null?rj:nj,r=t(n,s),ha){i=0;do{if(ha=!1,Ra=0,25<=i)throw Error(L(301));i+=1,Ve=Fe=null,e.updateQueue=null,Nc.current=sj,r=t(n,s)}while(ha)}if(Nc.current=hu,e=Fe!==null&&Fe.next!==null,qs=0,Ve=Fe=Te=null,uu=!1,e)throw Error(L(300));return r}function ug(){var r=Ra!==0;return Ra=0,r}function Ar(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Te.memoizedState=Ve=r:Ve=Ve.next=r,Ve}function nr(){if(Fe===null){var r=Te.alternate;r=r!==null?r.memoizedState:null}else r=Fe.next;var e=Ve===null?Te.memoizedState:Ve.next;if(e!==null)Ve=e,Fe=r;else{if(r===null)throw Error(L(310));Fe=r,r={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ve===null?Te.memoizedState=Ve=r:Ve=Ve.next=r}return Ve}function La(r,e){return typeof e=="function"?e(r):e}function cd(r){var e=nr(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=r;var n=Fe,s=n.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((qs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:r(n,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,Te.lanes|=h,Ks|=h}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,jr(n,e.memoizedState)||(_t=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){s=r;do i=s.lane,Te.lanes|=i,Ks|=i,s=s.next;while(s!==r)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ud(r){var e=nr(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=r;var n=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=r(i,o.action),o=o.next;while(o!==s);jr(i,e.memoizedState)||(_t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,n]}function sw(){}function iw(r,e){var t=Te,n=nr(),s=e(),i=!jr(n.memoizedState,s);if(i&&(n.memoizedState=s,_t=!0),n=n.queue,hg(lw.bind(null,t,n,r),[r]),n.getSnapshot!==e||i||Ve!==null&&Ve.memoizedState.tag&1){if(t.flags|=2048,Ia(9,aw.bind(null,t,n,s,e),void 0,null),He===null)throw Error(L(349));qs&30||ow(t,e,s)}return s}function ow(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function aw(r,e,t,n){e.value=t,e.getSnapshot=n,cw(e)&&uw(r)}function lw(r,e,t){return t(function(){cw(e)&&uw(r)})}function cw(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!jr(r,t)}catch{return!0}}function uw(r){var e=yn(r,1);e!==null&&Sr(e,r,1,-1)}function c0(r){var e=Ar();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:r},e.queue=r,r=r.dispatch=tj.bind(null,Te,r),[e.memoizedState,r]}function Ia(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function hw(){return nr().memoizedState}function Pc(r,e,t,n){var s=Ar();Te.flags|=r,s.memoizedState=Ia(1|e,t,void 0,n===void 0?null:n)}function Yu(r,e,t,n){var s=nr();n=n===void 0?null:n;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,n!==null&&lg(n,o.deps)){s.memoizedState=Ia(e,t,i,n);return}}Te.flags|=r,s.memoizedState=Ia(1|e,t,i,n)}function u0(r,e){return Pc(8390656,8,r,e)}function hg(r,e){return Yu(2048,8,r,e)}function dw(r,e){return Yu(4,2,r,e)}function fw(r,e){return Yu(4,4,r,e)}function pw(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function gw(r,e,t){return t=t!=null?t.concat([r]):null,Yu(4,4,pw.bind(null,e,r),t)}function dg(){}function mw(r,e){var t=nr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&lg(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function vw(r,e){var t=nr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&lg(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function yw(r,e,t){return qs&21?(jr(t,e)||(t=Sx(),Te.lanes|=t,Ks|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,_t=!0),r.memoizedState=t)}function ZC(r,e){var t=de;de=t!==0&&4>t?t:4,r(!0);var n=ld.transition;ld.transition={};try{r(!1),e()}finally{de=t,ld.transition=n}}function xw(){return nr().memoizedState}function ej(r,e,t){var n=os(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},ww(r))bw(e,t);else if(t=tw(r,e,t,n),t!==null){var s=ft();Sr(t,r,n,s),_w(t,e,n)}}function tj(r,e,t){var n=os(r),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(ww(r))bw(e,s);else{var i=r.alternate;if(r.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,jr(a,o)){var l=e.interleaved;l===null?(s.next=s,ng(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=tw(r,e,s,n),t!==null&&(s=ft(),Sr(t,r,n,s),_w(t,e,n))}}function ww(r){var e=r.alternate;return r===Te||e!==null&&e===Te}function bw(r,e){ha=uu=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function _w(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Wp(r,t)}}var hu={readContext:rr,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},rj={readContext:rr,useCallback:function(r,e){return Ar().memoizedState=[r,e===void 0?null:e],r},useContext:rr,useEffect:u0,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,Pc(4194308,4,pw.bind(null,e,r),t)},useLayoutEffect:function(r,e){return Pc(4194308,4,r,e)},useInsertionEffect:function(r,e){return Pc(4,2,r,e)},useMemo:function(r,e){var t=Ar();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=Ar();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=ej.bind(null,Te,r),[n.memoizedState,r]},useRef:function(r){var e=Ar();return r={current:r},e.memoizedState=r},useState:c0,useDebugValue:dg,useDeferredValue:function(r){return Ar().memoizedState=r},useTransition:function(){var r=c0(!1),e=r[0];return r=ZC.bind(null,r[1]),Ar().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Te,s=Ar();if(_e){if(t===void 0)throw Error(L(407));t=t()}else{if(t=e(),He===null)throw Error(L(349));qs&30||ow(n,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,u0(lw.bind(null,n,i,r),[r]),n.flags|=2048,Ia(9,aw.bind(null,n,i,t,e),void 0,null),t},useId:function(){var r=Ar(),e=He.identifierPrefix;if(_e){var t=un,n=cn;t=(n&~(1<<32-_r(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ra++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=JC++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},nj={readContext:rr,useCallback:mw,useContext:rr,useEffect:hg,useImperativeHandle:gw,useInsertionEffect:dw,useLayoutEffect:fw,useMemo:vw,useReducer:cd,useRef:hw,useState:function(){return cd(La)},useDebugValue:dg,useDeferredValue:function(r){var e=nr();return yw(e,Fe.memoizedState,r)},useTransition:function(){var r=cd(La)[0],e=nr().memoizedState;return[r,e]},useMutableSource:sw,useSyncExternalStore:iw,useId:xw,unstable_isNewReconciler:!1},sj={readContext:rr,useCallback:mw,useContext:rr,useEffect:hg,useImperativeHandle:gw,useInsertionEffect:dw,useLayoutEffect:fw,useMemo:vw,useReducer:ud,useRef:hw,useState:function(){return ud(La)},useDebugValue:dg,useDeferredValue:function(r){var e=nr();return Fe===null?e.memoizedState=r:yw(e,Fe.memoizedState,r)},useTransition:function(){var r=ud(La)[0],e=nr().memoizedState;return[r,e]},useMutableSource:sw,useSyncExternalStore:iw,useId:xw,unstable_isNewReconciler:!1};function hr(r,e){if(r&&r.defaultProps){e=Ee({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function Ef(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Ee({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var Gu={isMounted:function(r){return(r=r._reactInternals)?ri(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=ft(),s=os(r),i=pn(n,s);i.payload=e,t!=null&&(i.callback=t),e=ss(r,i,s),e!==null&&(Sr(e,r,s,n),Oc(e,r,s))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=ft(),s=os(r),i=pn(n,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=ss(r,i,s),e!==null&&(Sr(e,r,s,n),Oc(e,r,s))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=ft(),n=os(r),s=pn(t,n);s.tag=2,e!=null&&(s.callback=e),e=ss(r,s,n),e!==null&&(Sr(e,r,n,t),Oc(e,r,n))}};function h0(r,e,t,n,s,i,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oa(t,n)||!Oa(s,i):!0}function Sw(r,e,t){var n=!1,s=cs,i=e.contextType;return typeof i=="object"&&i!==null?i=rr(i):(s=Ct(e)?Gs:at.current,n=e.contextTypes,i=(n=n!=null)?co(r,s):cs),e=new e(t,i),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gu,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=i),e}function d0(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&Gu.enqueueReplaceState(e,e.state,null)}function Of(r,e,t,n){var s=r.stateNode;s.props=t,s.state=r.memoizedState,s.refs={},sg(r);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rr(i):(i=Ct(e)?Gs:at.current,s.context=co(r,i)),s.state=r.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ef(r,e,i,t),s.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gu.enqueueReplaceState(s,s.state,null),lu(r,t,s,n),s.state=r.memoizedState),typeof s.componentDidMount=="function"&&(r.flags|=4194308)}function po(r,e){try{var t="",n=e;do t+=DS(n),n=n.return;while(n);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:r,source:e,stack:s,digest:null}}function hd(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function Nf(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var ij=typeof WeakMap=="function"?WeakMap:Map;function Cw(r,e,t){t=pn(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){fu||(fu=!0,zf=n),Nf(r,e)},t}function jw(r,e,t){t=pn(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;t.payload=function(){return n(s)},t.callback=function(){Nf(r,e)}}var i=r.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Nf(r,e),typeof n!="function"&&(is===null?is=new Set([this]):is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function f0(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new ij;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(s.add(t),r=xj.bind(null,r,e,t),e.then(r,r))}function p0(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function g0(r,e,t,n,s){return r.mode&1?(r.flags|=65536,r.lanes=s,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=pn(-1,1),e.tag=2,ss(t,e,1))),t.lanes|=1),r)}var oj=kn.ReactCurrentOwner,_t=!1;function ct(r,e,t,n){e.child=r===null?ew(e,null,t,n):ho(e,r.child,t,n)}function m0(r,e,t,n,s){t=t.render;var i=e.ref;return Vi(e,s),n=cg(r,e,t,n,i,s),t=ug(),r!==null&&!_t?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,xn(r,e,s)):(_e&&t&&Qp(e),e.flags|=1,ct(r,e,n,s),e.child)}function v0(r,e,t,n,s){if(r===null){var i=t.type;return typeof i=="function"&&!wg(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,kw(r,e,i,n,s)):(r=Rc(t.type,null,n,e,e.mode,s),r.ref=e.ref,r.return=e,e.child=r)}if(i=r.child,!(r.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Oa,t(o,n)&&r.ref===e.ref)return xn(r,e,s)}return e.flags|=1,r=as(i,n),r.ref=e.ref,r.return=e,e.child=r}function kw(r,e,t,n,s){if(r!==null){var i=r.memoizedProps;if(Oa(i,n)&&r.ref===e.ref)if(_t=!1,e.pendingProps=n=i,(r.lanes&s)!==0)r.flags&131072&&(_t=!0);else return e.lanes=r.lanes,xn(r,e,s)}return Pf(r,e,t,n,s)}function Tw(r,e,t){var n=e.pendingProps,s=n.children,i=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Li,At),At|=t;else{if(!(t&1073741824))return r=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,me(Li,At),At|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:t,me(Li,At),At|=n}else i!==null?(n=i.baseLanes|t,e.memoizedState=null):n=t,me(Li,At),At|=n;return ct(r,e,s,t),e.child}function Ew(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Pf(r,e,t,n,s){var i=Ct(t)?Gs:at.current;return i=co(e,i),Vi(e,s),t=cg(r,e,t,n,i,s),n=ug(),r!==null&&!_t?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~s,xn(r,e,s)):(_e&&n&&Qp(e),e.flags|=1,ct(r,e,t,s),e.child)}function y0(r,e,t,n,s){if(Ct(t)){var i=!0;nu(e)}else i=!1;if(Vi(e,s),e.stateNode===null)Dc(r,e),Sw(e,t,n),Of(e,t,n,s),n=!0;else if(r===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=rr(c):(c=Ct(t)?Gs:at.current,c=co(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&d0(e,o,n,c),Un=!1;var f=e.memoizedState;o.state=f,lu(e,n,o,s),l=e.memoizedState,a!==n||f!==l||St.current||Un?(typeof h=="function"&&(Ef(e,t,h,n),l=e.memoizedState),(a=Un||h0(e,t,a,n,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,rw(r,e),a=e.memoizedProps,c=e.type===e.elementType?a:hr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=rr(l):(l=Ct(t)?Gs:at.current,l=co(e,l));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&d0(e,o,n,l),Un=!1,f=e.memoizedState,o.state=f,lu(e,n,o,s);var m=e.memoizedState;a!==d||f!==m||St.current||Un?(typeof g=="function"&&(Ef(e,t,g,n),m=e.memoizedState),(c=Un||h0(e,t,c,n,f,m,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),n=!1)}return Df(r,e,t,n,i,s)}function Df(r,e,t,n,s,i){Ew(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&n0(e,t,!1),xn(r,e,i);n=e.stateNode,oj.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=ho(e,r.child,null,i),e.child=ho(e,null,a,i)):ct(r,e,a,i),e.memoizedState=n.state,s&&n0(e,t,!0),e.child}function Ow(r){var e=r.stateNode;e.pendingContext?r0(r,e.pendingContext,e.pendingContext!==e.context):e.context&&r0(r,e.context,!1),ig(r,e.containerInfo)}function x0(r,e,t,n,s){return uo(),Zp(s),e.flags|=256,ct(r,e,t,n),e.child}var Af={dehydrated:null,treeContext:null,retryLane:0};function Mf(r){return{baseLanes:r,cachePool:null,transitions:null}}function Nw(r,e,t){var n=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(s|=1),me(ke,s&1),r===null)return kf(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ku(o,n,0,null),r=Vs(r,n,t,null),i.return=e,r.return=e,i.sibling=r,e.child=i,e.child.memoizedState=Mf(t),e.memoizedState=Af,r):fg(e,o));if(s=r.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return aj(r,e,o,n,a,s,t);if(i){i=n.fallback,o=e.mode,s=r.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=as(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=as(a,i):(i=Vs(i,o,t,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=r.child.memoizedState,o=o===null?Mf(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=r.childLanes&~t,e.memoizedState=Af,n}return i=r.child,r=i.sibling,n=as(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function fg(r,e){return e=Ku({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function Il(r,e,t,n){return n!==null&&Zp(n),ho(e,r.child,null,t),r=fg(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function aj(r,e,t,n,s,i,o){if(t)return e.flags&256?(e.flags&=-257,n=hd(Error(L(422))),Il(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Ku({mode:"visible",children:n.children},s,0,null),i=Vs(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&ho(e,r.child,null,o),e.child.memoizedState=Mf(o),e.memoizedState=Af,i);if(!(e.mode&1))return Il(r,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(L(419)),n=hd(i,n,void 0),Il(r,e,o,n)}if(a=(o&r.childLanes)!==0,_t||a){if(n=He,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yn(r,s),Sr(n,r,s,-1))}return xg(),n=hd(Error(L(421))),Il(r,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=r.child,e=wj.bind(null,r),s._reactRetry=e,null):(r=i.treeContext,$t=ns(s.nextSibling),zt=e,_e=!0,vr=null,r!==null&&(qt[Kt++]=cn,qt[Kt++]=un,qt[Kt++]=Xs,cn=r.id,un=r.overflow,Xs=e),e=fg(e,n.children),e.flags|=4096,e)}function w0(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),Tf(r.return,e,t)}function dd(r,e,t,n,s){var i=r.memoizedState;i===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=s)}function Pw(r,e,t){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(ct(r,e,n.children,t),n=ke.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&w0(r,t,e);else if(r.tag===19)w0(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(me(ke,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)r=t.alternate,r!==null&&cu(r)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),dd(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(r=s.alternate,r!==null&&cu(r)===null){e.child=s;break}r=s.sibling,s.sibling=t,t=s,s=r}dd(e,!0,t,null,i);break;case"together":dd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dc(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function xn(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Ks|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(L(153));if(e.child!==null){for(r=e.child,t=as(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=as(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function lj(r,e,t){switch(e.tag){case 3:Ow(e),uo();break;case 5:nw(e);break;case 1:Ct(e.type)&&nu(e);break;case 4:ig(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;me(ou,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(me(ke,ke.current&1),e.flags|=128,null):t&e.child.childLanes?Nw(r,e,t):(me(ke,ke.current&1),r=xn(r,e,t),r!==null?r.sibling:null);me(ke,ke.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return Pw(r,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(ke,ke.current),n)break;return null;case 22:case 23:return e.lanes=0,Tw(r,e,t)}return xn(r,e,t)}var Dw,Rf,Aw,Mw;Dw=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Rf=function(){};Aw=function(r,e,t,n){var s=r.memoizedProps;if(s!==n){r=e.stateNode,Ls(Wr.current);var i=null;switch(t){case"input":s=rf(r,s),n=rf(r,n),i=[];break;case"select":s=Ee({},s,{value:void 0}),n=Ee({},n,{value:void 0}),i=[];break;case"textarea":s=of(r,s),n=of(r,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=tu)}lf(t,n);var o;t=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_a.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_a.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&we("scroll",r),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Mw=function(r,e,t,n){t!==n&&(e.flags|=4)};function Yo(r,e){if(!_e)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function tt(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var s=r.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=r,s=s.sibling;else for(s=r.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=r,s=s.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function cj(r,e,t){var n=e.pendingProps;switch(Jp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return Ct(e.type)&&ru(),tt(e),null;case 3:return n=e.stateNode,fo(),be(St),be(at),ag(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(Rl(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vr!==null&&(Wf(vr),vr=null))),Rf(r,e),tt(e),null;case 5:og(e);var s=Ls(Ma.current);if(t=e.type,r!==null&&e.stateNode!=null)Aw(r,e,t,n,s),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(L(166));return tt(e),null}if(r=Ls(Wr.current),Rl(e)){n=e.stateNode,t=e.type;var i=e.memoizedProps;switch(n[Fr]=e,n[Da]=i,r=(e.mode&1)!==0,t){case"dialog":we("cancel",n),we("close",n);break;case"iframe":case"object":case"embed":we("load",n);break;case"video":case"audio":for(s=0;s<na.length;s++)we(na[s],n);break;case"source":we("error",n);break;case"img":case"image":case"link":we("error",n),we("load",n);break;case"details":we("toggle",n);break;case"input":Om(n,i),we("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},we("invalid",n);break;case"textarea":Pm(n,i),we("invalid",n)}lf(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ml(n.textContent,a,r),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ml(n.textContent,a,r),s=["children",""+a]):_a.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",n)}switch(t){case"input":kl(n),Nm(n,i,!0);break;case"textarea":kl(n),Dm(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=tu)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=lx(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[Fr]=e,r[Da]=n,Dw(r,e,!1,!1),e.stateNode=r;e:{switch(o=cf(t,n),t){case"dialog":we("cancel",r),we("close",r),s=n;break;case"iframe":case"object":case"embed":we("load",r),s=n;break;case"video":case"audio":for(s=0;s<na.length;s++)we(na[s],r);s=n;break;case"source":we("error",r),s=n;break;case"img":case"image":case"link":we("error",r),we("load",r),s=n;break;case"details":we("toggle",r),s=n;break;case"input":Om(r,n),s=rf(r,n),we("invalid",r);break;case"option":s=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},s=Ee({},n,{value:void 0}),we("invalid",r);break;case"textarea":Pm(r,n),s=of(r,n),we("invalid",r);break;default:s=n}lf(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?hx(r,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cx(r,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Sa(r,l):typeof l=="number"&&Sa(r,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_a.hasOwnProperty(i)?l!=null&&i==="onScroll"&&we("scroll",r):l!=null&&Ip(r,i,l,o))}switch(t){case"input":kl(r),Nm(r,n,!1);break;case"textarea":kl(r),Dm(r);break;case"option":n.value!=null&&r.setAttribute("value",""+ls(n.value));break;case"select":r.multiple=!!n.multiple,i=n.value,i!=null?zi(r,!!n.multiple,i,!1):n.defaultValue!=null&&zi(r,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(r.onclick=tu)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(r&&e.stateNode!=null)Mw(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(L(166));if(t=Ls(Ma.current),Ls(Wr.current),Rl(e)){if(n=e.stateNode,t=e.memoizedProps,n[Fr]=e,(i=n.nodeValue!==t)&&(r=zt,r!==null))switch(r.tag){case 3:Ml(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ml(n.nodeValue,t,(r.mode&1)!==0)}i&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Fr]=e,e.stateNode=n}return tt(e),null;case 13:if(be(ke),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_e&&$t!==null&&e.mode&1&&!(e.flags&128))Jx(),uo(),e.flags|=98560,i=!1;else if(i=Rl(e),n!==null&&n.dehydrated!==null){if(r===null){if(!i)throw Error(L(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Fr]=e}else uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),i=!1}else vr!==null&&(Wf(vr),vr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||ke.current&1?$e===0&&($e=3):xg())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return fo(),Rf(r,e),r===null&&Na(e.stateNode.containerInfo),tt(e),null;case 10:return rg(e.type._context),tt(e),null;case 17:return Ct(e.type)&&ru(),tt(e),null;case 19:if(be(ke),i=e.memoizedState,i===null)return tt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Yo(i,!1);else{if($e!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=cu(r),o!==null){for(e.flags|=128,Yo(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)i=t,r=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return me(ke,ke.current&1|2),e.child}r=r.sibling}i.tail!==null&&De()>go&&(e.flags|=128,n=!0,Yo(i,!1),e.lanes=4194304)}else{if(!n)if(r=cu(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_e)return tt(e),null}else 2*De()-i.renderingStartTime>go&&t!==1073741824&&(e.flags|=128,n=!0,Yo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,t=ke.current,me(ke,n?t&1|2:t&1),e):(tt(e),null);case 22:case 23:return yg(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?At&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function uj(r,e){switch(Jp(e),e.tag){case 1:return Ct(e.type)&&ru(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return fo(),be(St),be(at),ag(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return og(e),null;case 13:if(be(ke),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(L(340));uo()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return be(ke),null;case 4:return fo(),null;case 10:return rg(e.type._context),null;case 22:case 23:return yg(),null;case 24:return null;default:return null}}var Fl=!1,it=!1,hj=typeof WeakSet=="function"?WeakSet:Set,H=null;function Ri(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Ne(r,e,n)}else t.current=null}function Lf(r,e,t){try{t()}catch(n){Ne(r,e,n)}}var b0=!1;function dj(r,e){if(xf=Jc,r=$x(),Kp(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=r,f=null;t:for(;;){for(var g;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===r)break t;if(f===t&&++c===s&&(a=o),f===i&&++h===n&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(wf={focusedElem:r,selectionRange:t},Jc=!1,H=e;H!==null;)if(e=H,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,H=r;else for(;H!==null;){e=H;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,y=m.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:hr(e.type,p),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){Ne(e,e.return,_)}if(r=e.sibling,r!==null){r.return=e.return,H=r;break}H=e.return}return m=b0,b0=!1,m}function da(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&r)===r){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lf(e,t,i)}s=s.next}while(s!==n)}}function Xu(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function If(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function Rw(r){var e=r.alternate;e!==null&&(r.alternate=null,Rw(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Fr],delete e[Da],delete e[Sf],delete e[XC],delete e[qC])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Lw(r){return r.tag===5||r.tag===3||r.tag===4}function _0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Lw(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ff(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=tu));else if(n!==4&&(r=r.child,r!==null))for(Ff(r,e,t),r=r.sibling;r!==null;)Ff(r,e,t),r=r.sibling}function $f(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for($f(r,e,t),r=r.sibling;r!==null;)$f(r,e,t),r=r.sibling}var qe=null,pr=!1;function Dn(r,e,t){for(t=t.child;t!==null;)Iw(r,e,t),t=t.sibling}function Iw(r,e,t){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(zu,t)}catch{}switch(t.tag){case 5:it||Ri(t,e);case 6:var n=qe,s=pr;qe=null,Dn(r,e,t),qe=n,pr=s,qe!==null&&(pr?(r=qe,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):qe.removeChild(t.stateNode));break;case 18:qe!==null&&(pr?(r=qe,t=t.stateNode,r.nodeType===8?id(r.parentNode,t):r.nodeType===1&&id(r,t),Ta(r)):id(qe,t.stateNode));break;case 4:n=qe,s=pr,qe=t.stateNode.containerInfo,pr=!0,Dn(r,e,t),qe=n,pr=s;break;case 0:case 11:case 14:case 15:if(!it&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Lf(t,e,o),s=s.next}while(s!==n)}Dn(r,e,t);break;case 1:if(!it&&(Ri(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Ne(t,e,a)}Dn(r,e,t);break;case 21:Dn(r,e,t);break;case 22:t.mode&1?(it=(n=it)||t.memoizedState!==null,Dn(r,e,t),it=n):Dn(r,e,t);break;default:Dn(r,e,t)}}function S0(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new hj),e.forEach(function(n){var s=bj.bind(null,r,n);t.has(n)||(t.add(n),n.then(s,s))})}}function ar(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var i=r,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qe=a.stateNode,pr=!1;break e;case 3:qe=a.stateNode.containerInfo,pr=!0;break e;case 4:qe=a.stateNode.containerInfo,pr=!0;break e}a=a.return}if(qe===null)throw Error(L(160));Iw(i,o,s),qe=null,pr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ne(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fw(e,r),e=e.sibling}function Fw(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ar(e,r),Dr(r),n&4){try{da(3,r,r.return),Xu(3,r)}catch(p){Ne(r,r.return,p)}try{da(5,r,r.return)}catch(p){Ne(r,r.return,p)}}break;case 1:ar(e,r),Dr(r),n&512&&t!==null&&Ri(t,t.return);break;case 5:if(ar(e,r),Dr(r),n&512&&t!==null&&Ri(t,t.return),r.flags&32){var s=r.stateNode;try{Sa(s,"")}catch(p){Ne(r,r.return,p)}}if(n&4&&(s=r.stateNode,s!=null)){var i=r.memoizedProps,o=t!==null?t.memoizedProps:i,a=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ox(s,i),cf(a,o);var c=cf(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?hx(s,d):h==="dangerouslySetInnerHTML"?cx(s,d):h==="children"?Sa(s,d):Ip(s,h,d,c)}switch(a){case"input":nf(s,i);break;case"textarea":ax(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?zi(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?zi(s,!!i.multiple,i.defaultValue,!0):zi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Da]=i}catch(p){Ne(r,r.return,p)}}break;case 6:if(ar(e,r),Dr(r),n&4){if(r.stateNode===null)throw Error(L(162));s=r.stateNode,i=r.memoizedProps;try{s.nodeValue=i}catch(p){Ne(r,r.return,p)}}break;case 3:if(ar(e,r),Dr(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(p){Ne(r,r.return,p)}break;case 4:ar(e,r),Dr(r);break;case 13:ar(e,r),Dr(r),s=r.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mg=De())),n&4&&S0(r);break;case 22:if(h=t!==null&&t.memoizedState!==null,r.mode&1?(it=(c=it)||h,ar(e,r),it=c):ar(e,r),Dr(r),n&8192){if(c=r.memoizedState!==null,(r.stateNode.isHidden=c)&&!h&&r.mode&1)for(H=r,h=r.child;h!==null;){for(d=H=h;H!==null;){switch(f=H,g=f.child,f.tag){case 0:case 11:case 14:case 15:da(4,f,f.return);break;case 1:Ri(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Ne(n,t,p)}}break;case 5:Ri(f,f.return);break;case 22:if(f.memoizedState!==null){j0(d);continue}}g!==null?(g.return=f,H=g):j0(d)}h=h.sibling}e:for(h=null,d=r;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ux("display",o))}catch(p){Ne(r,r.return,p)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(p){Ne(r,r.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ar(e,r),Dr(r),n&4&&S0(r);break;case 21:break;default:ar(e,r),Dr(r)}}function Dr(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(Lw(t)){var n=t;break e}t=t.return}throw Error(L(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Sa(s,""),n.flags&=-33);var i=_0(r);$f(r,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=_0(r);Ff(r,a,o);break;default:throw Error(L(161))}}catch(l){Ne(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function fj(r,e,t){H=r,$w(r)}function $w(r,e,t){for(var n=(r.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Fl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||it;a=Fl;var c=it;if(Fl=o,(it=l)&&!c)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?k0(s):l!==null?(l.return=o,H=l):k0(s);for(;i!==null;)H=i,$w(i),i=i.sibling;H=s,Fl=a,it=c}C0(r)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):C0(r)}}function C0(r){for(;H!==null;){var e=H;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||Xu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!it)if(t===null)n.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:hr(e.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&l0(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}l0(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ta(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}it||e.flags&512&&If(e)}catch(f){Ne(e,e.return,f)}}if(e===r){H=null;break}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}}function j0(r){for(;H!==null;){var e=H;if(e===r){H=null;break}var t=e.sibling;if(t!==null){t.return=e.return,H=t;break}H=e.return}}function k0(r){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Xu(4,e)}catch(l){Ne(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Ne(e,s,l)}}var i=e.return;try{If(e)}catch(l){Ne(e,i,l)}break;case 5:var o=e.return;try{If(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===r){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var pj=Math.ceil,du=kn.ReactCurrentDispatcher,pg=kn.ReactCurrentOwner,er=kn.ReactCurrentBatchConfig,ie=0,He=null,Le=null,Qe=0,At=0,Li=ys(0),$e=0,Fa=null,Ks=0,qu=0,gg=0,fa=null,wt=null,mg=0,go=1/0,tn=null,fu=!1,zf=null,is=null,$l=!1,Jn=null,pu=0,pa=0,Bf=null,Ac=-1,Mc=0;function ft(){return ie&6?De():Ac!==-1?Ac:Ac=De()}function os(r){return r.mode&1?ie&2&&Qe!==0?Qe&-Qe:QC.transition!==null?(Mc===0&&(Mc=Sx()),Mc):(r=de,r!==0||(r=window.event,r=r===void 0?16:Nx(r.type)),r):1}function Sr(r,e,t,n){if(50<pa)throw pa=0,Bf=null,Error(L(185));sl(r,t,n),(!(ie&2)||r!==He)&&(r===He&&(!(ie&2)&&(qu|=t),$e===4&&Vn(r,Qe)),jt(r,n),t===1&&ie===0&&!(e.mode&1)&&(go=De()+500,Hu&&xs()))}function jt(r,e){var t=r.callbackNode;QS(r,e);var n=Qc(r,r===He?Qe:0);if(n===0)t!==null&&Rm(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&Rm(t),e===1)r.tag===0?KC(T0.bind(null,r)):qx(T0.bind(null,r)),YC(function(){!(ie&6)&&xs()}),t=null;else{switch(Cx(n)){case 1:t=Up;break;case 4:t=bx;break;case 16:t=Kc;break;case 536870912:t=_x;break;default:t=Kc}t=Gw(t,zw.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function zw(r,e){if(Ac=-1,Mc=0,ie&6)throw Error(L(327));var t=r.callbackNode;if(Hi()&&r.callbackNode!==t)return null;var n=Qc(r,r===He?Qe:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=gu(r,n);else{e=n;var s=ie;ie|=2;var i=Uw();(He!==r||Qe!==e)&&(tn=null,go=De()+500,Ws(r,e));do try{vj();break}catch(a){Bw(r,a)}while(!0);tg(),du.current=i,ie=s,Le!==null?e=0:(He=null,Qe=0,e=$e)}if(e!==0){if(e===2&&(s=pf(r),s!==0&&(n=s,e=Uf(r,s))),e===1)throw t=Fa,Ws(r,0),Vn(r,n),jt(r,De()),t;if(e===6)Vn(r,n);else{if(s=r.current.alternate,!(n&30)&&!gj(s)&&(e=gu(r,n),e===2&&(i=pf(r),i!==0&&(n=i,e=Uf(r,i))),e===1))throw t=Fa,Ws(r,0),Vn(r,n),jt(r,De()),t;switch(r.finishedWork=s,r.finishedLanes=n,e){case 0:case 1:throw Error(L(345));case 2:Os(r,wt,tn);break;case 3:if(Vn(r,n),(n&130023424)===n&&(e=mg+500-De(),10<e)){if(Qc(r,0)!==0)break;if(s=r.suspendedLanes,(s&n)!==n){ft(),r.pingedLanes|=r.suspendedLanes&s;break}r.timeoutHandle=_f(Os.bind(null,r,wt,tn),e);break}Os(r,wt,tn);break;case 4:if(Vn(r,n),(n&4194240)===n)break;for(e=r.eventTimes,s=-1;0<n;){var o=31-_r(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=De()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pj(n/1960))-n,10<n){r.timeoutHandle=_f(Os.bind(null,r,wt,tn),n);break}Os(r,wt,tn);break;case 5:Os(r,wt,tn);break;default:throw Error(L(329))}}}return jt(r,De()),r.callbackNode===t?zw.bind(null,r):null}function Uf(r,e){var t=fa;return r.current.memoizedState.isDehydrated&&(Ws(r,e).flags|=256),r=gu(r,e),r!==2&&(e=wt,wt=t,e!==null&&Wf(e)),r}function Wf(r){wt===null?wt=r:wt.push.apply(wt,r)}function gj(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],i=s.getSnapshot;s=s.value;try{if(!jr(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vn(r,e){for(e&=~gg,e&=~qu,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-_r(e),n=1<<t;r[t]=-1,e&=~n}}function T0(r){if(ie&6)throw Error(L(327));Hi();var e=Qc(r,0);if(!(e&1))return jt(r,De()),null;var t=gu(r,e);if(r.tag!==0&&t===2){var n=pf(r);n!==0&&(e=n,t=Uf(r,n))}if(t===1)throw t=Fa,Ws(r,0),Vn(r,e),jt(r,De()),t;if(t===6)throw Error(L(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Os(r,wt,tn),jt(r,De()),null}function vg(r,e){var t=ie;ie|=1;try{return r(e)}finally{ie=t,ie===0&&(go=De()+500,Hu&&xs())}}function Qs(r){Jn!==null&&Jn.tag===0&&!(ie&6)&&Hi();var e=ie;ie|=1;var t=er.transition,n=de;try{if(er.transition=null,de=1,r)return r()}finally{de=n,er.transition=t,ie=e,!(ie&6)&&xs()}}function yg(){At=Li.current,be(Li)}function Ws(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,HC(t)),Le!==null)for(t=Le.return;t!==null;){var n=t;switch(Jp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ru();break;case 3:fo(),be(St),be(at),ag();break;case 5:og(n);break;case 4:fo();break;case 13:be(ke);break;case 19:be(ke);break;case 10:rg(n.type._context);break;case 22:case 23:yg()}t=t.return}if(He=r,Le=r=as(r.current,null),Qe=At=e,$e=0,Fa=null,gg=qu=Ks=0,wt=fa=null,Rs!==null){for(e=0;e<Rs.length;e++)if(t=Rs[e],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}t.pending=n}Rs=null}return r}function Bw(r,e){do{var t=Le;try{if(tg(),Nc.current=hu,uu){for(var n=Te.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}uu=!1}if(qs=0,Ve=Fe=Te=null,ha=!1,Ra=0,pg.current=null,t===null||t.return===null){$e=1,Fa=e,Le=null;break}e:{var i=r,o=t.return,a=t,l=e;if(e=Qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=p0(o);if(g!==null){g.flags&=-257,g0(g,o,a,i,e),g.mode&1&&f0(i,c,e),e=g,l=c;var m=e.updateQueue;if(m===null){var p=new Set;p.add(l),e.updateQueue=p}else m.add(l);break e}else{if(!(e&1)){f0(i,c,e),xg();break e}l=Error(L(426))}}else if(_e&&a.mode&1){var y=p0(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),g0(y,o,a,i,e),Zp(po(l,a));break e}}i=l=po(l,a),$e!==4&&($e=2),fa===null?fa=[i]:fa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Cw(i,l,e);a0(i,v);break e;case 1:a=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(is===null||!is.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=jw(i,a,e);a0(i,_);break e}}i=i.return}while(i!==null)}Vw(t)}catch(S){e=S,Le===t&&t!==null&&(Le=t=t.return);continue}break}while(!0)}function Uw(){var r=du.current;return du.current=hu,r===null?hu:r}function xg(){($e===0||$e===3||$e===2)&&($e=4),He===null||!(Ks&268435455)&&!(qu&268435455)||Vn(He,Qe)}function gu(r,e){var t=ie;ie|=2;var n=Uw();(He!==r||Qe!==e)&&(tn=null,Ws(r,e));do try{mj();break}catch(s){Bw(r,s)}while(!0);if(tg(),ie=t,du.current=n,Le!==null)throw Error(L(261));return He=null,Qe=0,$e}function mj(){for(;Le!==null;)Ww(Le)}function vj(){for(;Le!==null&&!US();)Ww(Le)}function Ww(r){var e=Yw(r.alternate,r,At);r.memoizedProps=r.pendingProps,e===null?Vw(r):Le=e,pg.current=null}function Vw(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=uj(t,e),t!==null){t.flags&=32767,Le=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{$e=6,Le=null;return}}else if(t=cj(t,e,At),t!==null){Le=t;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=r}while(e!==null);$e===0&&($e=5)}function Os(r,e,t){var n=de,s=er.transition;try{er.transition=null,de=1,yj(r,e,t,n)}finally{er.transition=s,de=n}return null}function yj(r,e,t,n){do Hi();while(Jn!==null);if(ie&6)throw Error(L(327));t=r.finishedWork;var s=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(L(177));r.callbackNode=null,r.callbackPriority=0;var i=t.lanes|t.childLanes;if(JS(r,i),r===He&&(Le=He=null,Qe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||$l||($l=!0,Gw(Kc,function(){return Hi(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=er.transition,er.transition=null;var o=de;de=1;var a=ie;ie|=4,pg.current=null,dj(r,t),Fw(t,r),FC(wf),Jc=!!xf,wf=xf=null,r.current=t,fj(t),WS(),ie=a,de=o,er.transition=i}else r.current=t;if($l&&($l=!1,Jn=r,pu=s),i=r.pendingLanes,i===0&&(is=null),YS(t.stateNode),jt(r,De()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)s=e[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(fu)throw fu=!1,r=zf,zf=null,r;return pu&1&&r.tag!==0&&Hi(),i=r.pendingLanes,i&1?r===Bf?pa++:(pa=0,Bf=r):pa=0,xs(),null}function Hi(){if(Jn!==null){var r=Cx(pu),e=er.transition,t=de;try{if(er.transition=null,de=16>r?16:r,Jn===null)var n=!1;else{if(r=Jn,Jn=null,pu=0,ie&6)throw Error(L(331));var s=ie;for(ie|=4,H=r.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:da(8,h,i)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var f=h.sibling,g=h.return;if(Rw(h),h===c){H=null;break}if(f!==null){f.return=g,H=f;break}H=g}}}var m=i.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:da(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,H=v;break e}H=i.return}}var x=r.current;for(H=x;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else e:for(o=x;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xu(9,a)}}catch(S){Ne(a,a.return,S)}if(a===o){H=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,H=_;break e}H=a.return}}if(ie=s,xs(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(zu,r)}catch{}n=!0}return n}finally{de=t,er.transition=e}}return!1}function E0(r,e,t){e=po(t,e),e=Cw(r,e,1),r=ss(r,e,1),e=ft(),r!==null&&(sl(r,1,e),jt(r,e))}function Ne(r,e,t){if(r.tag===3)E0(r,r,t);else for(;e!==null;){if(e.tag===3){E0(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(is===null||!is.has(n))){r=po(t,r),r=jw(e,r,1),e=ss(e,r,1),r=ft(),e!==null&&(sl(e,1,r),jt(e,r));break}}e=e.return}}function xj(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=ft(),r.pingedLanes|=r.suspendedLanes&t,He===r&&(Qe&t)===t&&($e===4||$e===3&&(Qe&130023424)===Qe&&500>De()-mg?Ws(r,0):gg|=t),jt(r,e)}function Hw(r,e){e===0&&(r.mode&1?(e=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):e=1);var t=ft();r=yn(r,e),r!==null&&(sl(r,e,t),jt(r,t))}function wj(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Hw(r,t)}function bj(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,s=r.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(L(314))}n!==null&&n.delete(e),Hw(r,t)}var Yw;Yw=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||St.current)_t=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return _t=!1,lj(r,e,t);_t=!!(r.flags&131072)}else _t=!1,_e&&e.flags&1048576&&Kx(e,iu,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Dc(r,e),r=e.pendingProps;var s=co(e,at.current);Vi(e,t),s=cg(null,e,n,r,s,t);var i=ug();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(n)?(i=!0,nu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sg(e),s.updater=Gu,e.stateNode=s,s._reactInternals=e,Of(e,n,r,t),e=Df(null,e,n,!0,i,t)):(e.tag=0,_e&&i&&Qp(e),ct(null,e,s,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Dc(r,e),r=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Sj(n),r=hr(n,r),s){case 0:e=Pf(null,e,n,r,t);break e;case 1:e=y0(null,e,n,r,t);break e;case 11:e=m0(null,e,n,r,t);break e;case 14:e=v0(null,e,n,hr(n.type,r),t);break e}throw Error(L(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hr(n,s),Pf(r,e,n,s,t);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hr(n,s),y0(r,e,n,s,t);case 3:e:{if(Ow(e),r===null)throw Error(L(387));n=e.pendingProps,i=e.memoizedState,s=i.element,rw(r,e),lu(e,n,null,t);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=po(Error(L(423)),e),e=x0(r,e,n,t,s);break e}else if(n!==s){s=po(Error(L(424)),e),e=x0(r,e,n,t,s);break e}else for($t=ns(e.stateNode.containerInfo.firstChild),zt=e,_e=!0,vr=null,t=ew(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(uo(),n===s){e=xn(r,e,t);break e}ct(r,e,n,t)}e=e.child}return e;case 5:return nw(e),r===null&&kf(e),n=e.type,s=e.pendingProps,i=r!==null?r.memoizedProps:null,o=s.children,bf(n,s)?o=null:i!==null&&bf(n,i)&&(e.flags|=32),Ew(r,e),ct(r,e,o,t),e.child;case 6:return r===null&&kf(e),null;case 13:return Nw(r,e,t);case 4:return ig(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=ho(e,null,n,t):ct(r,e,n,t),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hr(n,s),m0(r,e,n,s,t);case 7:return ct(r,e,e.pendingProps,t),e.child;case 8:return ct(r,e,e.pendingProps.children,t),e.child;case 12:return ct(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,me(ou,n._currentValue),n._currentValue=o,i!==null)if(jr(i.value,o)){if(i.children===s.children&&!St.current){e=xn(r,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=pn(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),Tf(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Tf(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ct(r,e,s.children,t),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Vi(e,t),s=rr(s),n=n(s),e.flags|=1,ct(r,e,n,t),e.child;case 14:return n=e.type,s=hr(n,e.pendingProps),s=hr(n.type,s),v0(r,e,n,s,t);case 15:return kw(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:hr(n,s),Dc(r,e),e.tag=1,Ct(n)?(r=!0,nu(e)):r=!1,Vi(e,t),Sw(e,n,s),Of(e,n,s,t),Df(null,e,n,!0,r,t);case 19:return Pw(r,e,t);case 22:return Tw(r,e,t)}throw Error(L(156,e.tag))};function Gw(r,e){return wx(r,e)}function _j(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(r,e,t,n){return new _j(r,e,t,n)}function wg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Sj(r){if(typeof r=="function")return wg(r)?1:0;if(r!=null){if(r=r.$$typeof,r===$p)return 11;if(r===zp)return 14}return 2}function as(r,e){var t=r.alternate;return t===null?(t=Zt(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Rc(r,e,t,n,s,i){var o=2;if(n=r,typeof r=="function")wg(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case ki:return Vs(t.children,s,i,e);case Fp:o=8,s|=8;break;case Jd:return r=Zt(12,t,e,s|2),r.elementType=Jd,r.lanes=i,r;case Zd:return r=Zt(13,t,e,s),r.elementType=Zd,r.lanes=i,r;case ef:return r=Zt(19,t,e,s),r.elementType=ef,r.lanes=i,r;case nx:return Ku(t,s,i,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case tx:o=10;break e;case rx:o=9;break e;case $p:o=11;break e;case zp:o=14;break e;case Bn:o=16,n=null;break e}throw Error(L(130,r==null?r:typeof r,""))}return e=Zt(o,t,e,s),e.elementType=r,e.type=n,e.lanes=i,e}function Vs(r,e,t,n){return r=Zt(7,r,n,e),r.lanes=t,r}function Ku(r,e,t,n){return r=Zt(22,r,n,e),r.elementType=nx,r.lanes=t,r.stateNode={isHidden:!1},r}function fd(r,e,t){return r=Zt(6,r,null,e),r.lanes=t,r}function pd(r,e,t){return e=Zt(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function Cj(r,e,t,n,s){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xh(0),this.expirationTimes=Xh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bg(r,e,t,n,s,i,o,a,l){return r=new Cj(r,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zt(3,null,null,e),r.current=i,i.stateNode=r,i.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},sg(i),r}function jj(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function Xw(r){if(!r)return cs;r=r._reactInternals;e:{if(ri(r)!==r||r.tag!==1)throw Error(L(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(r.tag===1){var t=r.type;if(Ct(t))return Xx(r,t,e)}return e}function qw(r,e,t,n,s,i,o,a,l){return r=bg(t,n,!0,r,s,i,o,a,l),r.context=Xw(null),t=r.current,n=ft(),s=os(t),i=pn(n,s),i.callback=e??null,ss(t,i,s),r.current.lanes=s,sl(r,s,n),jt(r,n),r}function Qu(r,e,t,n){var s=e.current,i=ft(),o=os(s);return t=Xw(t),e.context===null?e.context=t:e.pendingContext=t,e=pn(i,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=ss(s,e,o),r!==null&&(Sr(r,s,o,i),Oc(r,s,o)),o}function mu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function O0(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function _g(r,e){O0(r,e),(r=r.alternate)&&O0(r,e)}function kj(){return null}var Kw=typeof reportError=="function"?reportError:function(r){console.error(r)};function Sg(r){this._internalRoot=r}Ju.prototype.render=Sg.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(L(409));Qu(r,e,null,null)};Ju.prototype.unmount=Sg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Qs(function(){Qu(null,r,null,null)}),e[vn]=null}};function Ju(r){this._internalRoot=r}Ju.prototype.unstable_scheduleHydration=function(r){if(r){var e=Tx();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Wn.length&&e!==0&&e<Wn[t].priority;t++);Wn.splice(t,0,r),t===0&&Ox(r)}};function Cg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Zu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function N0(){}function Tj(r,e,t,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=mu(o);i.call(c)}}var o=qw(e,n,r,0,null,!1,!1,"",N0);return r._reactRootContainer=o,r[vn]=o.current,Na(r.nodeType===8?r.parentNode:r),Qs(),o}for(;s=r.lastChild;)r.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=mu(l);a.call(c)}}var l=bg(r,0,!1,null,null,!1,!1,"",N0);return r._reactRootContainer=l,r[vn]=l.current,Na(r.nodeType===8?r.parentNode:r),Qs(function(){Qu(e,l,t,n)}),l}function eh(r,e,t,n,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=mu(o);a.call(l)}}Qu(e,o,r,s)}else o=Tj(t,e,r,s,n);return mu(o)}jx=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=ra(e.pendingLanes);t!==0&&(Wp(e,t|1),jt(e,De()),!(ie&6)&&(go=De()+500,xs()))}break;case 13:Qs(function(){var n=yn(r,1);if(n!==null){var s=ft();Sr(n,r,1,s)}}),_g(r,1)}};Vp=function(r){if(r.tag===13){var e=yn(r,134217728);if(e!==null){var t=ft();Sr(e,r,134217728,t)}_g(r,134217728)}};kx=function(r){if(r.tag===13){var e=os(r),t=yn(r,e);if(t!==null){var n=ft();Sr(t,r,e,n)}_g(r,e)}};Tx=function(){return de};Ex=function(r,e){var t=de;try{return de=r,e()}finally{de=t}};hf=function(r,e,t){switch(e){case"input":if(nf(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var s=Vu(n);if(!s)throw Error(L(90));ix(n),nf(n,s)}}}break;case"textarea":ax(r,t);break;case"select":e=t.value,e!=null&&zi(r,!!t.multiple,e,!1)}};px=vg;gx=Qs;var Ej={usingClientEntryPoint:!1,Events:[ol,Ni,Vu,dx,fx,vg]},Go={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Oj={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=yx(r),r===null?null:r.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||kj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{zu=zl.inject(Oj),Ur=zl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ej;Wt.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cg(e))throw Error(L(200));return jj(r,e,null,t)};Wt.createRoot=function(r,e){if(!Cg(r))throw Error(L(299));var t=!1,n="",s=Kw;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bg(r,1,!1,null,null,t,!1,n,s),r[vn]=e.current,Na(r.nodeType===8?r.parentNode:r),new Sg(e)};Wt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(L(188)):(r=Object.keys(r).join(","),Error(L(268,r)));return r=yx(e),r=r===null?null:r.stateNode,r};Wt.flushSync=function(r){return Qs(r)};Wt.hydrate=function(r,e,t){if(!Zu(e))throw Error(L(200));return eh(null,r,e,!0,t)};Wt.hydrateRoot=function(r,e,t){if(!Cg(r))throw Error(L(405));var n=t!=null&&t.hydratedSources||null,s=!1,i="",o=Kw;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=qw(e,null,r,1,t??null,s,!1,i,o),r[vn]=e.current,Na(r),n)for(r=0;r<n.length;r++)t=n[r],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Ju(e)};Wt.render=function(r,e,t){if(!Zu(e))throw Error(L(200));return eh(null,r,e,!1,t)};Wt.unmountComponentAtNode=function(r){if(!Zu(r))throw Error(L(40));return r._reactRootContainer?(Qs(function(){eh(null,null,r,!1,function(){r._reactRootContainer=null,r[vn]=null})}),!0):!1};Wt.unstable_batchedUpdates=vg;Wt.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!Zu(t))throw Error(L(200));if(r==null||r._reactInternals===void 0)throw Error(L(38));return eh(r,e,t,!1,n)};Wt.version="18.3.1-next-f1338f8080-20240426";function Qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qw)}catch(r){console.error(r)}}Qw(),Qy.exports=Wt;var ll=Qy.exports;const Jw=Fy(ll);var Zw,P0=ll;Zw=P0.createRoot,P0.hydrateRoot;const Nj=1,Pj=1e6;let gd=0;function Dj(){return gd=(gd+1)%Number.MAX_SAFE_INTEGER,gd.toString()}const md=new Map,D0=r=>{if(md.has(r))return;const e=setTimeout(()=>{md.delete(r),ga({type:"REMOVE_TOAST",toastId:r})},Pj);md.set(r,e)},Aj=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,Nj)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?D0(t):r.toasts.forEach(n=>{D0(n.id)}),{...r,toasts:r.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},Lc=[];let Ic={toasts:[]};function ga(r){Ic=Aj(Ic,r),Lc.forEach(e=>{e(Ic)})}function Mj({...r}){const e=Dj(),t=s=>ga({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>ga({type:"DISMISS_TOAST",toastId:e});return ga({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:t}}function Rj(){const[r,e]=b.useState(Ic);return b.useEffect(()=>(Lc.push(e),()=>{const t=Lc.indexOf(e);t>-1&&Lc.splice(t,1)}),[r]),{...r,toast:Mj,dismiss:t=>ga({type:"DISMISS_TOAST",toastId:t})}}function Se(r,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(r==null||r(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Lj(r,e){typeof r=="function"?r(e):r!=null&&(r.current=e)}function e1(...r){return e=>r.forEach(t=>Lj(t,e))}function pt(...r){return b.useCallback(e1(...r),r)}function Ij(r,e=[]){let t=[];function n(i,o){const a=b.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:f,children:g,...m}=d,p=(f==null?void 0:f[r][l])||a,y=b.useMemo(()=>m,Object.values(m));return u.jsx(p.Provider,{value:y,children:g})}function h(d,f){const g=(f==null?void 0:f[r][l])||a,m=b.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,h]}const s=()=>{const i=t.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return b.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,Fj(s,...e)]}function Fj(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var mo=b.forwardRef((r,e)=>{const{children:t,...n}=r,s=b.Children.toArray(t),i=s.find($j);if(i){const o=i.props.children,a=s.map(l=>l===i?b.Children.count(o)>1?b.Children.only(null):b.isValidElement(o)?o.props.children:null:l);return u.jsx(Vf,{...n,ref:e,children:b.isValidElement(o)?b.cloneElement(o,void 0,a):null})}return u.jsx(Vf,{...n,ref:e,children:t})});mo.displayName="Slot";var Vf=b.forwardRef((r,e)=>{const{children:t,...n}=r;if(b.isValidElement(t)){const s=Bj(t);return b.cloneElement(t,{...zj(n,t.props),ref:e?e1(e,s):s})}return b.Children.count(t)>1?b.Children.only(null):null});Vf.displayName="SlotClone";var t1=({children:r})=>u.jsx(u.Fragment,{children:r});function $j(r){return b.isValidElement(r)&&r.type===t1}function zj(r,e){const t={...e};for(const n in e){const s=r[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?t[n]=(...a)=>{i(...a),s(...a)}:s&&(t[n]=s):n==="style"?t[n]={...s,...i}:n==="className"&&(t[n]=[s,i].filter(Boolean).join(" "))}return{...r,...t}}function Bj(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function Uj(r){const e=r+"CollectionProvider",[t,n]=Ij(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:m,children:p}=g,y=$.useRef(null),v=$.useRef(new Map).current;return u.jsx(s,{scope:m,itemMap:v,collectionRef:y,children:p})};o.displayName=e;const a=r+"CollectionSlot",l=$.forwardRef((g,m)=>{const{scope:p,children:y}=g,v=i(a,p),x=pt(m,v.collectionRef);return u.jsx(mo,{ref:x,children:y})});l.displayName=a;const c=r+"CollectionItemSlot",h="data-radix-collection-item",d=$.forwardRef((g,m)=>{const{scope:p,children:y,...v}=g,x=$.useRef(null),w=pt(m,x),_=i(c,p);return $.useEffect(()=>(_.itemMap.set(x,{ref:x,...v}),()=>void _.itemMap.delete(x))),u.jsx(mo,{[h]:"",ref:w,children:y})});d.displayName=c;function f(g){const m=i(r+"CollectionConsumer",g);return $.useCallback(()=>{const y=m.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(m.itemMap.values()).sort((_,S)=>v.indexOf(_.ref.current)-v.indexOf(S.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,n]}function Wj(r,e){const t=b.createContext(e),n=i=>{const{children:o,...a}=i,l=b.useMemo(()=>a,Object.values(a));return u.jsx(t.Provider,{value:l,children:o})};n.displayName=r+"Provider";function s(i){const o=b.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${r}\``)}return[n,s]}function jg(r,e=[]){let t=[];function n(i,o){const a=b.createContext(o),l=t.length;t=[...t,o];const c=d=>{var v;const{scope:f,children:g,...m}=d,p=((v=f==null?void 0:f[r])==null?void 0:v[l])||a,y=b.useMemo(()=>m,Object.values(m));return u.jsx(p.Provider,{value:y,children:g})};c.displayName=i+"Provider";function h(d,f){var p;const g=((p=f==null?void 0:f[r])==null?void 0:p[l])||a,m=b.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,h]}const s=()=>{const i=t.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return b.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,Vj(s,...e)]}function Vj(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var Hj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Me=Hj.reduce((r,e)=>{const t=b.forwardRef((n,s)=>{const{asChild:i,...o}=n,a=i?mo:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{});function r1(r,e){r&&ll.flushSync(()=>r.dispatchEvent(e))}function sr(r){const e=b.useRef(r);return b.useEffect(()=>{e.current=r}),b.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function Yj(r,e=globalThis==null?void 0:globalThis.document){const t=sr(r);b.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var Gj="DismissableLayer",Hf="dismissableLayer.update",Xj="dismissableLayer.pointerDownOutside",qj="dismissableLayer.focusOutside",A0,n1=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),th=b.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=r,c=b.useContext(n1),[h,d]=b.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=b.useState({}),m=pt(e,T=>d(T)),p=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=p.indexOf(y),x=h?p.indexOf(h):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,_=x>=v,S=Qj(T=>{const E=T.target,D=[...c.branches].some(N=>N.contains(E));!_||D||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},f),C=Jj(T=>{const E=T.target;[...c.branches].some(N=>N.contains(E))||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},f);return Yj(T=>{x===c.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),b.useEffect(()=>{if(h)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(A0=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(h)),c.layers.add(h),M0(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=A0)}},[h,f,t,c]),b.useEffect(()=>()=>{h&&(c.layers.delete(h),c.layersWithOutsidePointerEventsDisabled.delete(h),M0())},[h,c]),b.useEffect(()=>{const T=()=>g({});return document.addEventListener(Hf,T),()=>document.removeEventListener(Hf,T)},[]),u.jsx(Me.div,{...l,ref:m,style:{pointerEvents:w?_?"auto":"none":void 0,...r.style},onFocusCapture:Se(r.onFocusCapture,C.onFocusCapture),onBlurCapture:Se(r.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Se(r.onPointerDownCapture,S.onPointerDownCapture)})});th.displayName=Gj;var Kj="DismissableLayerBranch",s1=b.forwardRef((r,e)=>{const t=b.useContext(n1),n=b.useRef(null),s=pt(e,n);return b.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),u.jsx(Me.div,{...r,ref:s})});s1.displayName=Kj;function Qj(r,e=globalThis==null?void 0:globalThis.document){const t=sr(r),n=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){i1(Xj,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function Jj(r,e=globalThis==null?void 0:globalThis.document){const t=sr(r),n=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!n.current&&i1(qj,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function M0(){const r=new CustomEvent(Hf);document.dispatchEvent(r)}function i1(r,e,t,{discrete:n}){const s=t.originalEvent.target,i=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?r1(s,i):s.dispatchEvent(i)}var Zj=th,ek=s1,us=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},tk="Portal",kg=b.forwardRef((r,e)=>{var a;const{container:t,...n}=r,[s,i]=b.useState(!1);us(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Jw.createPortal(u.jsx(Me.div,{...n,ref:e}),o):null});kg.displayName=tk;function rk(r,e){return b.useReducer((t,n)=>e[t][n]??t,r)}var Co=r=>{const{present:e,children:t}=r,n=nk(e),s=typeof t=="function"?t({present:n.isPresent}):b.Children.only(t),i=pt(n.ref,sk(s));return typeof t=="function"||n.isPresent?b.cloneElement(s,{ref:i}):null};Co.displayName="Presence";function nk(r){const[e,t]=b.useState(),n=b.useRef({}),s=b.useRef(r),i=b.useRef("none"),o=r?"mounted":"unmounted",[a,l]=rk(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=Bl(n.current);i.current=a==="mounted"?c:"none"},[a]),us(()=>{const c=n.current,h=s.current;if(h!==r){const f=i.current,g=Bl(c);r?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(h&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=r}},[r,l]),us(()=>{if(e){let c;const h=e.ownerDocument.defaultView??window,d=g=>{const p=Bl(n.current).includes(g.animationName);if(g.target===e&&p&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=g=>{g.target===e&&(i.current=Bl(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{h.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{c&&(n.current=getComputedStyle(c)),t(c)},[])}}function Bl(r){return(r==null?void 0:r.animationName)||"none"}function sk(r){var n,s;let e=(n=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(s=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function o1({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,s]=ik({defaultProp:e,onChange:t}),i=r!==void 0,o=i?r:n,a=sr(t),l=b.useCallback(c=>{if(i){const d=typeof c=="function"?c(r):c;d!==r&&a(d)}else s(c)},[i,r,s,a]);return[o,l]}function ik({defaultProp:r,onChange:e}){const t=b.useState(r),[n]=t,s=b.useRef(n),i=sr(e);return b.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),t}var ok="VisuallyHidden",rh=b.forwardRef((r,e)=>u.jsx(Me.span,{...r,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...r.style}}));rh.displayName=ok;var ak=rh,Tg="ToastProvider",[Eg,lk,ck]=Uj("Toast"),[a1,ZL]=jg("Toast",[ck]),[uk,nh]=a1(Tg),l1=r=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=r,[a,l]=b.useState(null),[c,h]=b.useState(0),d=b.useRef(!1),f=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Tg}\`. Expected non-empty \`string\`.`),u.jsx(Eg.Provider,{scope:e,children:u.jsx(uk,{scope:e,label:t,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>h(g=>g+1),[]),onToastRemove:b.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};l1.displayName=Tg;var c1="ToastViewport",hk=["F8"],Yf="toast.viewportPause",Gf="toast.viewportResume",u1=b.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:n=hk,label:s="Notifications ({hotkey})",...i}=r,o=nh(c1,t),a=lk(t),l=b.useRef(null),c=b.useRef(null),h=b.useRef(null),d=b.useRef(null),f=pt(e,d,o.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;b.useEffect(()=>{const y=v=>{var w;n.length!==0&&n.every(_=>v[_]||v.code===_)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),b.useEffect(()=>{const y=l.current,v=d.current;if(m&&y&&v){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(Yf);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Gf);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},_=C=>{!y.contains(C.relatedTarget)&&w()},S=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",x),y.addEventListener("focusout",_),y.addEventListener("pointermove",x),y.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",x),y.removeEventListener("focusout",_),y.removeEventListener("pointermove",x),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[m,o.isClosePausedRef]);const p=b.useCallback(({tabbingDirection:y})=>{const x=a().map(w=>{const _=w.ref.current,S=[_,...Ck(_)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?x.reverse():x).flat()},[a]);return b.useEffect(()=>{const y=d.current;if(y){const v=x=>{var S,C,T;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const E=document.activeElement,D=x.shiftKey;if(x.target===y&&D){(S=c.current)==null||S.focus();return}const R=p({tabbingDirection:D?"backwards":"forwards"}),z=R.findIndex(M=>M===E);vd(R.slice(z+1))?x.preventDefault():D?(C=c.current)==null||C.focus():(T=h.current)==null||T.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[a,p]),u.jsxs(ek,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&u.jsx(Xf,{ref:c,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});vd(y)}}),u.jsx(Eg.Slot,{scope:t,children:u.jsx(Me.ol,{tabIndex:-1,...i,ref:f})}),m&&u.jsx(Xf,{ref:h,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});vd(y)}})]})});u1.displayName=c1;var h1="ToastFocusProxy",Xf=b.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...s}=r,i=nh(h1,t);return u.jsx(rh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&n()}})});Xf.displayName=h1;var sh="Toast",dk="toast.swipeStart",fk="toast.swipeMove",pk="toast.swipeCancel",gk="toast.swipeEnd",d1=b.forwardRef((r,e)=>{const{forceMount:t,open:n,defaultOpen:s,onOpenChange:i,...o}=r,[a=!0,l]=o1({prop:n,defaultProp:s,onChange:i});return u.jsx(Co,{present:t||a,children:u.jsx(yk,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:sr(r.onPause),onResume:sr(r.onResume),onSwipeStart:Se(r.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(r.onSwipeMove,c=>{const{x:h,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Se(r.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(r.onSwipeEnd,c=>{const{x:h,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});d1.displayName=sh;var[mk,vk]=a1(sh,{onClose(){}}),yk=b.forwardRef((r,e)=>{const{__scopeToast:t,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:h,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:g,...m}=r,p=nh(sh,t),[y,v]=b.useState(null),x=pt(e,M=>v(M)),w=b.useRef(null),_=b.useRef(null),S=s||p.duration,C=b.useRef(0),T=b.useRef(S),E=b.useRef(0),{onToastAdd:D,onToastRemove:N}=p,F=sr(()=>{var Y;(y==null?void 0:y.contains(document.activeElement))&&((Y=p.viewport)==null||Y.focus()),o()}),R=b.useCallback(M=>{!M||M===1/0||(window.clearTimeout(E.current),C.current=new Date().getTime(),E.current=window.setTimeout(F,M))},[F]);b.useEffect(()=>{const M=p.viewport;if(M){const Y=()=>{R(T.current),c==null||c()},V=()=>{const G=new Date().getTime()-C.current;T.current=T.current-G,window.clearTimeout(E.current),l==null||l()};return M.addEventListener(Yf,V),M.addEventListener(Gf,Y),()=>{M.removeEventListener(Yf,V),M.removeEventListener(Gf,Y)}}},[p.viewport,S,l,c,R]),b.useEffect(()=>{i&&!p.isClosePausedRef.current&&R(S)},[i,S,p.isClosePausedRef,R]),b.useEffect(()=>(D(),()=>N()),[D,N]);const z=b.useMemo(()=>y?x1(y):null,[y]);return p.viewport?u.jsxs(u.Fragment,{children:[z&&u.jsx(xk,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),u.jsx(mk,{scope:t,onClose:F,children:ll.createPortal(u.jsx(Eg.ItemSlot,{scope:t,children:u.jsx(Zj,{asChild:!0,onEscapeKeyDown:Se(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||F(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(Me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...m,ref:x,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:Se(r.onKeyDown,M=>{M.key==="Escape"&&(a==null||a(M.nativeEvent),M.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Se(r.onPointerDown,M=>{M.button===0&&(w.current={x:M.clientX,y:M.clientY})}),onPointerMove:Se(r.onPointerMove,M=>{if(!w.current)return;const Y=M.clientX-w.current.x,V=M.clientY-w.current.y,G=!!_.current,O=["left","right"].includes(p.swipeDirection),I=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,U=O?I(0,Y):0,B=O?0:I(0,V),X=M.pointerType==="touch"?10:2,Q={x:U,y:B},ae={originalEvent:M,delta:Q};G?(_.current=Q,Ul(fk,d,ae,{discrete:!1})):R0(Q,p.swipeDirection,X)?(_.current=Q,Ul(dk,h,ae,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(Y)>X||Math.abs(V)>X)&&(w.current=null)}),onPointerUp:Se(r.onPointerUp,M=>{const Y=_.current,V=M.target;if(V.hasPointerCapture(M.pointerId)&&V.releasePointerCapture(M.pointerId),_.current=null,w.current=null,Y){const G=M.currentTarget,O={originalEvent:M,delta:Y};R0(Y,p.swipeDirection,p.swipeThreshold)?Ul(gk,g,O,{discrete:!0}):Ul(pk,f,O,{discrete:!0}),G.addEventListener("click",I=>I.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),xk=r=>{const{__scopeToast:e,children:t,...n}=r,s=nh(sh,e),[i,o]=b.useState(!1),[a,l]=b.useState(!1);return _k(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:u.jsx(kg,{asChild:!0,children:u.jsx(rh,{...n,children:i&&u.jsxs(u.Fragment,{children:[s.label," ",t]})})})},wk="ToastTitle",f1=b.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return u.jsx(Me.div,{...n,ref:e})});f1.displayName=wk;var bk="ToastDescription",p1=b.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return u.jsx(Me.div,{...n,ref:e})});p1.displayName=bk;var g1="ToastAction",m1=b.forwardRef((r,e)=>{const{altText:t,...n}=r;return t.trim()?u.jsx(y1,{altText:t,asChild:!0,children:u.jsx(Og,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${g1}\`. Expected non-empty \`string\`.`),null)});m1.displayName=g1;var v1="ToastClose",Og=b.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r,s=vk(v1,t);return u.jsx(y1,{asChild:!0,children:u.jsx(Me.button,{type:"button",...n,ref:e,onClick:Se(r.onClick,s.onClose)})})});Og.displayName=v1;var y1=b.forwardRef((r,e)=>{const{__scopeToast:t,altText:n,...s}=r;return u.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function x1(r){const e=[];return Array.from(r.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Sk(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...x1(n))}}),e}function Ul(r,e,t,{discrete:n}){const s=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?r1(s,i):s.dispatchEvent(i)}var R0=(r,e,t=0)=>{const n=Math.abs(r.x),s=Math.abs(r.y),i=n>s;return e==="left"||e==="right"?i&&n>t:!i&&s>t};function _k(r=()=>{}){const e=sr(r);us(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function Sk(r){return r.nodeType===r.ELEMENT_NODE}function Ck(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function vd(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var jk=l1,w1=u1,b1=d1,_1=f1,S1=p1,C1=m1,j1=Og;function k1(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=k1(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function T1(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=k1(r))&&(n&&(n+=" "),n+=e);return n}const L0=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,I0=T1,cl=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return I0(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const h=t==null?void 0:t[c],d=i==null?void 0:i[c];if(h===null)return null;const f=L0(h)||L0(d);return s[c][f]}),a=t&&Object.entries(t).reduce((c,h)=>{let[d,f]=h;return f===void 0||(c[d]=f),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,h)=>{let{class:d,className:f,...g}=h;return Object.entries(g).every(m=>{let[p,y]=m;return Array.isArray(y)?y.includes({...i,...a}[p]):{...i,...a}[p]===y})?[...c,d,f]:c},[]);return I0(r,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E1=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=b.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...Tk,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:E1("lucide",s),...a},[...o.map(([c,h])=>b.createElement(c,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(r,e)=>{const t=b.forwardRef(({className:n,...s},i)=>b.createElement(Ek,{ref:i,iconNode:e,className:E1(`lucide-${kk(r)}`,n),...s}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=le("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=le("FileUser",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 18a3 3 0 1 0-6 0",key:"16awa0"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=le("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=le("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=le("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=le("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=le("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=le("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=le("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=le("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pg="-",Kk=r=>{const e=Jk(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const a=o.split(Pg);return a[0]===""&&a.length!==1&&a.shift(),A1(a,e)||Qk(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},A1=(r,e)=>{var o;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?A1(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(Pg);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},z0=/^\[(.+)\]$/,Qk=r=>{if(z0.test(r)){const e=z0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Jk=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return eT(Object.entries(r.classGroups),t).forEach(([i,o])=>{qf(o,n,i,e)}),n},qf=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:B0(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(Zk(s)){qf(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{qf(o,B0(e,i),t,n)})})},B0=(r,e)=>{let t=r;return e.split(Pg).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},Zk=r=>r.isThemeGetter,eT=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):r,tT=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,o)=>{t.set(i,o),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},M1="!",rT=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,h=0,d;for(let y=0;y<a.length;y++){let v=a[y];if(c===0){if(v===s&&(n||a.slice(y,y+i)===e)){l.push(a.slice(h,y)),h=y+i;continue}if(v==="/"){d=y;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(h),g=f.startsWith(M1),m=g?f.substring(1):f,p=d&&d>h?d-h:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:p}};return t?a=>t({className:a,parseClassName:o}):o},nT=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},sT=r=>({cache:tT(r.cacheSize),parseClassName:rT(r),...Kk(r)}),iT=/\s+/,oT=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=r.trim().split(iT);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:h,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:g}=t(c);let m=!!g,p=n(m?f.substring(0,g):f);if(!p){if(!m){a=c+(a.length>0?" "+a:a);continue}if(p=n(f),!p){a=c+(a.length>0?" "+a:a);continue}m=!1}const y=nT(h).join(":"),v=d?y+M1:y,x=v+p;if(i.includes(x))continue;i.push(x);const w=s(p,m);for(let _=0;_<w.length;++_){const S=w[_];i.push(v+S)}a=c+(a.length>0?" "+a:a)}return a};function aT(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=R1(e))&&(n&&(n+=" "),n+=t);return n}const R1=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=R1(r[n]))&&(t&&(t+=" "),t+=e);return t};function lT(r,...e){let t,n,s,i=o;function o(l){const c=e.reduce((h,d)=>d(h),r());return t=sT(c),n=t.cache.get,s=t.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const h=oT(l,t);return s(l,h),h}return function(){return i(aT.apply(null,arguments))}}const xe=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},L1=/^\[(?:([a-z-]+):)?(.+)\]$/i,cT=/^\d+\/\d+$/,uT=new Set(["px","full","screen"]),hT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=r=>Yi(r)||uT.has(r)||cT.test(r),An=r=>jo(r,"length",ST),Yi=r=>!!r&&!Number.isNaN(Number(r)),yd=r=>jo(r,"number",Yi),Xo=r=>!!r&&Number.isInteger(Number(r)),mT=r=>r.endsWith("%")&&Yi(r.slice(0,-1)),Z=r=>L1.test(r),Mn=r=>hT.test(r),vT=new Set(["length","size","percentage"]),yT=r=>jo(r,vT,I1),xT=r=>jo(r,"position",I1),wT=new Set(["image","url"]),bT=r=>jo(r,wT,jT),_T=r=>jo(r,"",CT),qo=()=>!0,jo=(r,e,t)=>{const n=L1.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},ST=r=>dT.test(r)&&!fT.test(r),I1=()=>!1,CT=r=>pT.test(r),jT=r=>gT.test(r),kT=()=>{const r=xe("colors"),e=xe("spacing"),t=xe("blur"),n=xe("brightness"),s=xe("borderColor"),i=xe("borderRadius"),o=xe("borderSpacing"),a=xe("borderWidth"),l=xe("contrast"),c=xe("grayscale"),h=xe("hueRotate"),d=xe("invert"),f=xe("gap"),g=xe("gradientColorStops"),m=xe("gradientColorStopPositions"),p=xe("inset"),y=xe("margin"),v=xe("opacity"),x=xe("padding"),w=xe("saturate"),_=xe("scale"),S=xe("sepia"),C=xe("skew"),T=xe("space"),E=xe("translate"),D=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Z,e],R=()=>[Z,e],z=()=>["",Kr,An],M=()=>["auto",Yi,Z],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",Z],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Yi,Z];return{cacheSize:500,separator:":",theme:{colors:[qo],spacing:[Kr,An],blur:["none","",Mn,Z],brightness:B(),borderColor:[r],borderRadius:["none","","full",Mn,Z],borderSpacing:R(),borderWidth:z(),contrast:B(),grayscale:I(),hueRotate:B(),invert:I(),gap:R(),gradientColorStops:[r],gradientColorStopPositions:[mT,An],inset:F(),margin:F(),opacity:B(),padding:R(),saturate:B(),scale:B(),sepia:I(),skew:B(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Z]}],container:["container"],columns:[{columns:[Mn]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),Z]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xo,Z]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Z]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",Xo,Z]}],"grid-cols":[{"grid-cols":[qo]}],"col-start-end":[{col:["auto",{span:["full",Xo,Z]},Z]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[qo]}],"row-start-end":[{row:["auto",{span:[Xo,Z]},Z]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Z]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Z,e]}],"min-w":[{"min-w":[Z,e,"min","max","fit"]}],"max-w":[{"max-w":[Z,e,"none","full","min","max","fit","prose",{screen:[Mn]},Mn]}],h:[{h:[Z,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Z,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Z,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Z,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Mn,An]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yd]}],"font-family":[{font:[qo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Z]}],"line-clamp":[{"line-clamp":["none",Yi,yd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kr,Z]}],"list-image":[{"list-image":["none",Z]}],"list-style-type":[{list:["none","disc","decimal",Z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kr,An]}],"underline-offset":[{"underline-offset":["auto",Kr,Z]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),xT]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bT]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Kr,Z]}],"outline-w":[{outline:[Kr,An]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Kr,An]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Mn,_T]}],"shadow-color":[{shadow:[qo]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Mn,Z]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Z]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Z]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Xo,Z]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Z]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Z]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Z]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Kr,An,yd]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},TT=lT(kT);function ve(...r){return TT(T1(r))}const ET=jk,F1=b.forwardRef(({className:r,...e},t)=>u.jsx(w1,{ref:t,className:ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));F1.displayName=w1.displayName;const OT=cl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$1=b.forwardRef(({className:r,variant:e,...t},n)=>u.jsx(b1,{ref:n,className:ve(OT({variant:e}),r),...t}));$1.displayName=b1.displayName;const NT=b.forwardRef(({className:r,...e},t)=>u.jsx(C1,{ref:t,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));NT.displayName=C1.displayName;const z1=b.forwardRef(({className:r,...e},t)=>u.jsx(j1,{ref:t,className:ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:u.jsx(ih,{className:"h-4 w-4"})}));z1.displayName=j1.displayName;const B1=b.forwardRef(({className:r,...e},t)=>u.jsx(_1,{ref:t,className:ve("text-sm font-semibold",r),...e}));B1.displayName=_1.displayName;const U1=b.forwardRef(({className:r,...e},t)=>u.jsx(S1,{ref:t,className:ve("text-sm opacity-90",r),...e}));U1.displayName=S1.displayName;function PT(){const{toasts:r}=Rj();return u.jsxs(ET,{children:[r.map(function({id:e,title:t,description:n,action:s,...i}){return u.jsxs($1,{...i,children:[u.jsxs("div",{className:"grid gap-1",children:[t&&u.jsx(B1,{children:t}),n&&u.jsx(U1,{children:n})]}),s,u.jsx(z1,{})]},e)}),u.jsx(F1,{})]})}var U0=["light","dark"],DT="(prefers-color-scheme: dark)",AT=b.createContext(void 0),MT={setTheme:r=>{},themes:[]},RT=()=>{var r;return(r=b.useContext(AT))!=null?r:MT};b.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,d=s?U0.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,p=!1,y=!0)=>{let v=o?o[m]:m,x=p?m+"|| ''":`'${v}'`,w="";return s&&y&&!p&&U0.includes(m)&&(w+=`d.style.colorScheme = '${m}';`),t==="class"?p||v?w+=`c.add(${x})`:w+="null":v&&(w+=`d[s](n,${x})`),w},g=r?`!function(){${h}${f(r)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${DT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${d}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:g}})});var LT=r=>{switch(r){case"success":return $T;case"info":return BT;case"warning":return zT;case"error":return UT;default:return null}},IT=Array(12).fill(0),FT=({visible:r})=>$.createElement("div",{className:"sonner-loading-wrapper","data-visible":r},$.createElement("div",{className:"sonner-spinner"},IT.map((e,t)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),$T=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zT=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),BT=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),UT=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),WT=()=>{let[r,e]=$.useState(document.hidden);return $.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},Kf=1,VT=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Kf++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:n}),{...l,...e,id:i,dismissible:a,title:n}):l):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),i=n!==void 0;return s.then(async o=>{if(YT(o)&&!o.ok){i=!1;let a=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:n,type:"error",message:a,description:l})}else if(t.success!==void 0){i=!1;let a=typeof t.success=="function"?await t.success(o):t.success,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:n,type:"success",message:a,description:l})}}).catch(async o=>{if(t.error!==void 0){i=!1;let a=typeof t.error=="function"?await t.error(o):t.error,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:n,type:"error",message:a,description:l})}}).finally(()=>{var o;i&&(this.dismiss(n),n=void 0),(o=t.finally)==null||o.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Kf++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},Dt=new VT,HT=(r,e)=>{let t=(e==null?void 0:e.id)||Kf++;return Dt.addToast({title:r,...e,id:t}),t},YT=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",GT=HT,XT=()=>Dt.toasts,rn=Object.assign(GT,{success:Dt.success,info:Dt.info,warning:Dt.warning,error:Dt.error,custom:Dt.custom,message:Dt.message,promise:Dt.promise,dismiss:Dt.dismiss,loading:Dt.loading},{getHistory:XT});function qT(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}qT(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Wl(r){return r.label!==void 0}var KT=3,QT="32px",JT=4e3,ZT=356,eE=14,tE=20,rE=200;function nE(...r){return r.filter(Boolean).join(" ")}var sE=r=>{var e,t,n,s,i,o,a,l,c,h;let{invert:d,toast:f,unstyled:g,interacting:m,setHeights:p,visibleToasts:y,heights:v,index:x,toasts:w,expanded:_,removeToast:S,defaultRichColors:C,closeButton:T,style:E,cancelButtonStyle:D,actionButtonStyle:N,className:F="",descriptionClassName:R="",duration:z,position:M,gap:Y,loadingIcon:V,expandByDefault:G,classNames:O,icons:I,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:B,cn:X}=r,[Q,ae]=$.useState(!1),[Ue,re]=$.useState(!1),[Ye,Or]=$.useState(!1),[Ht,Ge]=$.useState(!1),[xl,ai]=$.useState(0),[js,$o]=$.useState(0),wl=$.useRef(null),Nn=$.useRef(null),Fh=x===0,$h=x+1<=y,Xe=f.type,li=f.dismissible!==!1,K2=f.className||"",Q2=f.descriptionClassName||"",bl=$.useMemo(()=>v.findIndex(J=>J.toastId===f.id)||0,[v,f.id]),J2=$.useMemo(()=>{var J;return(J=f.closeButton)!=null?J:T},[f.closeButton,T]),vm=$.useMemo(()=>f.duration||z||JT,[f.duration,z]),zh=$.useRef(0),ci=$.useRef(0),ym=$.useRef(0),ui=$.useRef(null),[xm,Z2]=M.split("-"),wm=$.useMemo(()=>v.reduce((J,ye,fe)=>fe>=bl?J:J+ye.height,0),[v,bl]),bm=WT(),eS=f.invert||d,Bh=Xe==="loading";ci.current=$.useMemo(()=>bl*Y+wm,[bl,wm]),$.useEffect(()=>{ae(!0)},[]),$.useLayoutEffect(()=>{if(!Q)return;let J=Nn.current,ye=J.style.height;J.style.height="auto";let fe=J.getBoundingClientRect().height;J.style.height=ye,$o(fe),p(Nr=>Nr.find(Pr=>Pr.toastId===f.id)?Nr.map(Pr=>Pr.toastId===f.id?{...Pr,height:fe}:Pr):[{toastId:f.id,height:fe,position:f.position},...Nr])},[Q,f.title,f.description,p,f.id]);let Pn=$.useCallback(()=>{re(!0),ai(ci.current),p(J=>J.filter(ye=>ye.toastId!==f.id)),setTimeout(()=>{S(f)},rE)},[f,S,p,ci]);$.useEffect(()=>{if(f.promise&&Xe==="loading"||f.duration===1/0||f.type==="loading")return;let J,ye=vm;return _||m||B&&bm?(()=>{if(ym.current<zh.current){let fe=new Date().getTime()-zh.current;ye=ye-fe}ym.current=new Date().getTime()})():ye!==1/0&&(zh.current=new Date().getTime(),J=setTimeout(()=>{var fe;(fe=f.onAutoClose)==null||fe.call(f,f),Pn()},ye)),()=>clearTimeout(J)},[_,m,G,f,vm,Pn,f.promise,Xe,B,bm]),$.useEffect(()=>{let J=Nn.current;if(J){let ye=J.getBoundingClientRect().height;return $o(ye),p(fe=>[{toastId:f.id,height:ye,position:f.position},...fe]),()=>p(fe=>fe.filter(Nr=>Nr.toastId!==f.id))}},[p,f.id]),$.useEffect(()=>{f.delete&&Pn()},[Pn,f.delete]);function tS(){return I!=null&&I.loading?$.createElement("div",{className:"sonner-loader","data-visible":Xe==="loading"},I.loading):V?$.createElement("div",{className:"sonner-loader","data-visible":Xe==="loading"},V):$.createElement(FT,{visible:Xe==="loading"})}return $.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Nn,className:X(F,K2,O==null?void 0:O.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[Xe],(t=f==null?void 0:f.classNames)==null?void 0:t[Xe]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:C,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":Q,"data-promise":!!f.promise,"data-removed":Ue,"data-visible":$h,"data-y-position":xm,"data-x-position":Z2,"data-index":x,"data-front":Fh,"data-swiping":Ye,"data-dismissible":li,"data-type":Xe,"data-invert":eS,"data-swipe-out":Ht,"data-expanded":!!(_||G&&Q),style:{"--index":x,"--toasts-before":x,"--z-index":w.length-x,"--offset":`${Ue?xl:ci.current}px`,"--initial-height":G?"auto":`${js}px`,...E,...f.style},onPointerDown:J=>{Bh||!li||(wl.current=new Date,ai(ci.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(Or(!0),ui.current={x:J.clientX,y:J.clientY}))},onPointerUp:()=>{var J,ye,fe,Nr;if(Ht||!li)return;ui.current=null;let Pr=Number(((J=Nn.current)==null?void 0:J.style.getPropertyValue("--swipe-amount").replace("px",""))||0),_l=new Date().getTime()-((ye=wl.current)==null?void 0:ye.getTime()),rS=Math.abs(Pr)/_l;if(Math.abs(Pr)>=tE||rS>.11){ai(ci.current),(fe=f.onDismiss)==null||fe.call(f,f),Pn(),Ge(!0);return}(Nr=Nn.current)==null||Nr.style.setProperty("--swipe-amount","0px"),Or(!1)},onPointerMove:J=>{var ye;if(!ui.current||!li)return;let fe=J.clientY-ui.current.y,Nr=J.clientX-ui.current.x,Pr=(xm==="top"?Math.min:Math.max)(0,fe),_l=J.pointerType==="touch"?10:2;Math.abs(Pr)>_l?(ye=Nn.current)==null||ye.style.setProperty("--swipe-amount",`${fe}px`):Math.abs(Nr)>_l&&(ui.current=null)}},J2&&!f.jsx?$.createElement("button",{"aria-label":U,"data-disabled":Bh,"data-close-button":!0,onClick:Bh||!li?()=>{}:()=>{var J;Pn(),(J=f.onDismiss)==null||J.call(f,f)},className:X(O==null?void 0:O.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||$.isValidElement(f.title)?f.jsx||f.title:$.createElement($.Fragment,null,Xe||f.icon||f.promise?$.createElement("div",{"data-icon":"",className:X(O==null?void 0:O.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||tS():null,f.type!=="loading"?f.icon||(I==null?void 0:I[Xe])||LT(Xe):null):null,$.createElement("div",{"data-content":"",className:X(O==null?void 0:O.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},$.createElement("div",{"data-title":"",className:X(O==null?void 0:O.title,(a=f==null?void 0:f.classNames)==null?void 0:a.title)},f.title),f.description?$.createElement("div",{"data-description":"",className:X(R,Q2,O==null?void 0:O.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),$.isValidElement(f.cancel)?f.cancel:f.cancel&&Wl(f.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||D,onClick:J=>{var ye,fe;Wl(f.cancel)&&li&&((fe=(ye=f.cancel).onClick)==null||fe.call(ye,J),Pn())},className:X(O==null?void 0:O.cancelButton,(c=f==null?void 0:f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,$.isValidElement(f.action)?f.action:f.action&&Wl(f.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||N,onClick:J=>{var ye,fe;Wl(f.action)&&(J.defaultPrevented||((fe=(ye=f.action).onClick)==null||fe.call(ye,J),Pn()))},className:X(O==null?void 0:O.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function W0(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}var iE=r=>{let{invert:e,position:t="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:a,theme:l="light",richColors:c,duration:h,style:d,visibleToasts:f=KT,toastOptions:g,dir:m=W0(),gap:p=eE,loadingIcon:y,icons:v,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:w,cn:_=nE}=r,[S,C]=$.useState([]),T=$.useMemo(()=>Array.from(new Set([t].concat(S.filter(B=>B.position).map(B=>B.position)))),[S,t]),[E,D]=$.useState([]),[N,F]=$.useState(!1),[R,z]=$.useState(!1),[M,Y]=$.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=$.useRef(null),G=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=$.useRef(null),I=$.useRef(!1),U=$.useCallback(B=>{var X;(X=S.find(Q=>Q.id===B.id))!=null&&X.delete||Dt.dismiss(B.id),C(Q=>Q.filter(({id:ae})=>ae!==B.id))},[S]);return $.useEffect(()=>Dt.subscribe(B=>{if(B.dismiss){C(X=>X.map(Q=>Q.id===B.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{Jw.flushSync(()=>{C(X=>{let Q=X.findIndex(ae=>ae.id===B.id);return Q!==-1?[...X.slice(0,Q),{...X[Q],...B},...X.slice(Q+1)]:[B,...X]})})})}),[]),$.useEffect(()=>{if(l!=="system"){Y(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{Y(B?"dark":"light")})},[l]),$.useEffect(()=>{S.length<=1&&F(!1)},[S]),$.useEffect(()=>{let B=X=>{var Q,ae;n.every(Ue=>X[Ue]||X.code===Ue)&&(F(!0),(Q=V.current)==null||Q.focus()),X.code==="Escape"&&(document.activeElement===V.current||(ae=V.current)!=null&&ae.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[n]),$.useEffect(()=>{if(V.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,I.current=!1)}},[V.current]),S.length?$.createElement("section",{"aria-label":`${x} ${G}`,tabIndex:-1},T.map((B,X)=>{var Q;let[ae,Ue]=B.split("-");return $.createElement("ol",{key:B,dir:m==="auto"?W0():m,tabIndex:-1,ref:V,className:o,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":ae,"data-x-position":Ue,style:{"--front-toast-height":`${((Q=E[0])==null?void 0:Q.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||QT,"--width":`${ZT}px`,"--gap":`${p}px`,...d},onBlur:re=>{I.current&&!re.currentTarget.contains(re.relatedTarget)&&(I.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||I.current||(I.current=!0,O.current=re.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{R||F(!1)},onPointerDown:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},S.filter(re=>!re.position&&X===0||re.position===B).map((re,Ye)=>{var Or,Ht;return $.createElement(sE,{key:re.id,icons:v,index:Ye,toast:re,defaultRichColors:c,duration:(Or=g==null?void 0:g.duration)!=null?Or:h,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:e,visibleToasts:f,closeButton:(Ht=g==null?void 0:g.closeButton)!=null?Ht:i,interacting:R,position:B,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:U,toasts:S.filter(Ge=>Ge.position==re.position),heights:E.filter(Ge=>Ge.position==re.position),setHeights:D,expandByDefault:s,gap:p,loadingIcon:y,expanded:N,pauseWhenPageIsHidden:w,cn:_})}))})):null};const oE=({...r})=>{const{theme:e="system"}=RT();return u.jsx(iE,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})};var aE=qy.useId||(()=>{}),lE=0;function xd(r){const[e,t]=b.useState(aE());return us(()=>{r||t(n=>n??String(lE++))},[r]),r||(e?`radix-${e}`:"")}const cE=["top","right","bottom","left"],hs=Math.min,Mt=Math.max,xu=Math.round,Vl=Math.floor,ds=r=>({x:r,y:r}),uE={left:"right",right:"left",bottom:"top",top:"bottom"},hE={start:"end",end:"start"};function Qf(r,e,t){return Mt(r,hs(e,t))}function wn(r,e){return typeof r=="function"?r(e):r}function bn(r){return r.split("-")[0]}function ko(r){return r.split("-")[1]}function Dg(r){return r==="x"?"y":"x"}function Ag(r){return r==="y"?"height":"width"}function fs(r){return["top","bottom"].includes(bn(r))?"y":"x"}function Mg(r){return Dg(fs(r))}function dE(r,e,t){t===void 0&&(t=!1);const n=ko(r),s=Mg(r),i=Ag(s);let o=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=wu(o)),[o,wu(o)]}function fE(r){const e=wu(r);return[Jf(r),e,Jf(e)]}function Jf(r){return r.replace(/start|end/g,e=>hE[e])}function pE(r,e,t){const n=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return t?e?s:n:e?n:s;case"left":case"right":return e?i:o;default:return[]}}function gE(r,e,t,n){const s=ko(r);let i=pE(bn(r),t==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Jf)))),i}function wu(r){return r.replace(/left|right|bottom|top/g,e=>uE[e])}function mE(r){return{top:0,right:0,bottom:0,left:0,...r}}function W1(r){return typeof r!="number"?mE(r):{top:r,right:r,bottom:r,left:r}}function bu(r){const{x:e,y:t,width:n,height:s}=r;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}function V0(r,e,t){let{reference:n,floating:s}=r;const i=fs(e),o=Mg(e),a=Ag(o),l=bn(e),c=i==="y",h=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let g;switch(l){case"top":g={x:h,y:n.y-s.height};break;case"bottom":g={x:h,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:d};break;case"left":g={x:n.x-s.width,y:d};break;default:g={x:n.x,y:n.y}}switch(ko(e)){case"start":g[o]-=f*(t&&c?-1:1);break;case"end":g[o]+=f*(t&&c?-1:1);break}return g}const vE=async(r,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:r,floating:e,strategy:s}),{x:h,y:d}=V0(c,n,l),f=n,g={},m=0;for(let p=0;p<a.length;p++){const{name:y,fn:v}=a[p],{x,y:w,data:_,reset:S}=await v({x:h,y:d,initialPlacement:n,placement:f,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:r,floating:e}});h=x??h,d=w??d,g={...g,[y]:{...g[y],..._}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:s}):S.rects),{x:h,y:d}=V0(c,f,l)),p=-1)}return{x:h,y:d,placement:f,strategy:s,middlewareData:g}};async function $a(r,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:f=!1,padding:g=0}=wn(e,r),m=W1(g),y=a[f?d==="floating"?"reference":"floating":d],v=bu(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(y)))==null||t?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),x=d==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},S=bu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(v.top-S.top+m.top)/_.y,bottom:(S.bottom-v.bottom+m.bottom)/_.y,left:(v.left-S.left+m.left)/_.x,right:(S.right-v.right+m.right)/_.x}}const yE=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:h=0}=wn(r,e)||{};if(c==null)return{};const d=W1(h),f={x:t,y:n},g=Mg(s),m=Ag(g),p=await o.getDimensions(c),y=g==="y",v=y?"top":"left",x=y?"bottom":"right",w=y?"clientHeight":"clientWidth",_=i.reference[m]+i.reference[g]-f[g]-i.floating[m],S=f[g]-i.reference[g],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=C?C[w]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=a.floating[w]||i.floating[m]);const E=_/2-S/2,D=T/2-p[m]/2-1,N=hs(d[v],D),F=hs(d[x],D),R=N,z=T-p[m]-F,M=T/2-p[m]/2+E,Y=Qf(R,M,z),V=!l.arrow&&ko(s)!=null&&M!==Y&&i.reference[m]/2-(M<R?N:F)-p[m]/2<0,G=V?M<R?M-R:M-z:0;return{[g]:f[g]+G,data:{[g]:Y,centerOffset:M-Y-G,...V&&{alignmentOffset:G}},reset:V}}}),xE=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...y}=wn(r,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=bn(s),x=fs(a),w=bn(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=f||(w||!p?[wu(a)]:fE(a)),C=m!=="none";!f&&C&&S.push(...gE(a,p,m,_));const T=[a,...S],E=await $a(e,y),D=[];let N=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&D.push(E[v]),d){const M=dE(s,o,_);D.push(E[M[0]],E[M[1]])}if(N=[...N,{placement:s,overflows:D}],!D.every(M=>M<=0)){var F,R;const M=(((F=i.flip)==null?void 0:F.index)||0)+1,Y=T[M];if(Y)return{data:{index:M,overflows:N},reset:{placement:Y}};let V=(R=N.filter(G=>G.overflows[0]<=0).sort((G,O)=>G.overflows[1]-O.overflows[1])[0])==null?void 0:R.placement;if(!V)switch(g){case"bestFit":{var z;const G=(z=N.filter(O=>{if(C){const I=fs(O.placement);return I===x||I==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(I=>I>0).reduce((I,U)=>I+U,0)]).sort((O,I)=>O[1]-I[1])[0])==null?void 0:z[0];G&&(V=G);break}case"initialPlacement":V=a;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function H0(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function Y0(r){return cE.some(e=>r[e]>=0)}const wE=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...s}=wn(r,e);switch(n){case"referenceHidden":{const i=await $a(e,{...s,elementContext:"reference"}),o=H0(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Y0(o)}}}case"escaped":{const i=await $a(e,{...s,altBoundary:!0}),o=H0(i,t.floating);return{data:{escapedOffsets:o,escaped:Y0(o)}}}default:return{}}}}};async function bE(r,e){const{placement:t,platform:n,elements:s}=r,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=bn(t),a=ko(t),l=fs(t)==="y",c=["left","top"].includes(o)?-1:1,h=i&&l?-1:1,d=wn(e,r);let{mainAxis:f,crossAxis:g,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(g=a==="end"?m*-1:m),l?{x:g*h,y:f*c}:{x:f*c,y:g*h}}const _E=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await bE(e,r);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},SE=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:x}=y;return{x:v,y:x}}},...l}=wn(r,e),c={x:t,y:n},h=await $a(e,l),d=fs(bn(s)),f=Dg(d);let g=c[f],m=c[d];if(i){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=g+h[y],w=g-h[v];g=Qf(x,g,w)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=m+h[y],w=m-h[v];m=Qf(x,m,w)}const p=a.fn({...e,[f]:g,[d]:m});return{...p,data:{x:p.x-t,y:p.y-n,enabled:{[f]:i,[d]:o}}}}}},CE=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=wn(r,e),h={x:t,y:n},d=fs(s),f=Dg(d);let g=h[f],m=h[d];const p=wn(a,e),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const w=f==="y"?"height":"width",_=i.reference[f]-i.floating[w]+y.mainAxis,S=i.reference[f]+i.reference[w]-y.mainAxis;g<_?g=_:g>S&&(g=S)}if(c){var v,x;const w=f==="y"?"width":"height",_=["top","left"].includes(bn(s)),S=i.reference[d]-i.floating[w]+(_&&((v=o.offset)==null?void 0:v[d])||0)+(_?0:y.crossAxis),C=i.reference[d]+i.reference[w]+(_?0:((x=o.offset)==null?void 0:x[d])||0)-(_?y.crossAxis:0);m<S?m=S:m>C&&(m=C)}return{[f]:g,[d]:m}}}},jE=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=wn(r,e),h=await $a(e,c),d=bn(s),f=ko(s),g=fs(s)==="y",{width:m,height:p}=i.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=f==="end"?"top":"bottom");const x=p-h.top-h.bottom,w=m-h.left-h.right,_=hs(p-h[y],x),S=hs(m-h[v],w),C=!e.middlewareData.shift;let T=_,E=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(E=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=x),C&&!f){const N=Mt(h.left,0),F=Mt(h.right,0),R=Mt(h.top,0),z=Mt(h.bottom,0);g?E=m-2*(N!==0||F!==0?N+F:Mt(h.left,h.right)):T=p-2*(R!==0||z!==0?R+z:Mt(h.top,h.bottom))}await l({...e,availableWidth:E,availableHeight:T});const D=await o.getDimensions(a.floating);return m!==D.width||p!==D.height?{reset:{rects:!0}}:{}}}};function oh(){return typeof window<"u"}function To(r){return V1(r)?(r.nodeName||"").toLowerCase():"#document"}function Bt(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Gr(r){var e;return(e=(V1(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function V1(r){return oh()?r instanceof Node||r instanceof Bt(r).Node:!1}function kr(r){return oh()?r instanceof Element||r instanceof Bt(r).Element:!1}function Hr(r){return oh()?r instanceof HTMLElement||r instanceof Bt(r).HTMLElement:!1}function G0(r){return!oh()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Bt(r).ShadowRoot}function ul(r){const{overflow:e,overflowX:t,overflowY:n,display:s}=Tr(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(s)}function kE(r){return["table","td","th"].includes(To(r))}function ah(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function Rg(r){const e=Lg(),t=kr(r)?Tr(r):r;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function TE(r){let e=ps(r);for(;Hr(e)&&!vo(e);){if(Rg(e))return e;if(ah(e))return null;e=ps(e)}return null}function Lg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vo(r){return["html","body","#document"].includes(To(r))}function Tr(r){return Bt(r).getComputedStyle(r)}function lh(r){return kr(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function ps(r){if(To(r)==="html")return r;const e=r.assignedSlot||r.parentNode||G0(r)&&r.host||Gr(r);return G0(e)?e.host:e}function H1(r){const e=ps(r);return vo(e)?r.ownerDocument?r.ownerDocument.body:r.body:Hr(e)&&ul(e)?e:H1(e)}function za(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=H1(r),i=s===((n=r.ownerDocument)==null?void 0:n.body),o=Bt(s);if(i){const a=Zf(o);return e.concat(o,o.visualViewport||[],ul(s)?s:[],a&&t?za(a):[])}return e.concat(s,za(s,[],t))}function Zf(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Y1(r){const e=Tr(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Hr(r),i=s?r.offsetWidth:t,o=s?r.offsetHeight:n,a=xu(t)!==i||xu(n)!==o;return a&&(t=i,n=o),{width:t,height:n,$:a}}function Ig(r){return kr(r)?r:r.contextElement}function Gi(r){const e=Ig(r);if(!Hr(e))return ds(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:i}=Y1(e);let o=(i?xu(t.width):t.width)/n,a=(i?xu(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const EE=ds(0);function G1(r){const e=Bt(r);return!Lg()||!e.visualViewport?EE:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OE(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Bt(r)?!1:e}function Js(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=r.getBoundingClientRect(),i=Ig(r);let o=ds(1);e&&(n?kr(n)&&(o=Gi(n)):o=Gi(r));const a=OE(i,t,n)?G1(i):ds(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,h=s.width/o.x,d=s.height/o.y;if(i){const f=Bt(i),g=n&&kr(n)?Bt(n):n;let m=f,p=Zf(m);for(;p&&n&&g!==m;){const y=Gi(p),v=p.getBoundingClientRect(),x=Tr(p),w=v.left+(p.clientLeft+parseFloat(x.paddingLeft))*y.x,_=v.top+(p.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,h*=y.x,d*=y.y,l+=w,c+=_,m=Bt(p),p=Zf(m)}}return bu({width:h,height:d,x:l,y:c})}function NE(r){let{elements:e,rect:t,offsetParent:n,strategy:s}=r;const i=s==="fixed",o=Gr(n),a=e?ah(e.floating):!1;if(n===o||a&&i)return t;let l={scrollLeft:0,scrollTop:0},c=ds(1);const h=ds(0),d=Hr(n);if((d||!d&&!i)&&((To(n)!=="body"||ul(o))&&(l=lh(n)),Hr(n))){const f=Js(n);c=Gi(n),h.x=f.x+n.clientLeft,h.y=f.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+h.x,y:t.y*c.y-l.scrollTop*c.y+h.y}}function PE(r){return Array.from(r.getClientRects())}function ep(r,e){const t=lh(r).scrollLeft;return e?e.left+t:Js(Gr(r)).left+t}function DE(r){const e=Gr(r),t=lh(r),n=r.ownerDocument.body,s=Mt(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Mt(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+ep(r);const a=-t.scrollTop;return Tr(n).direction==="rtl"&&(o+=Mt(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}function AE(r,e){const t=Bt(r),n=Gr(r),s=t.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Lg();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function ME(r,e){const t=Js(r,!0,e==="fixed"),n=t.top+r.clientTop,s=t.left+r.clientLeft,i=Hr(r)?Gi(r):ds(1),o=r.clientWidth*i.x,a=r.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function X0(r,e,t){let n;if(e==="viewport")n=AE(r,t);else if(e==="document")n=DE(Gr(r));else if(kr(e))n=ME(e,t);else{const s=G1(r);n={...e,x:e.x-s.x,y:e.y-s.y}}return bu(n)}function X1(r,e){const t=ps(r);return t===e||!kr(t)||vo(t)?!1:Tr(t).position==="fixed"||X1(t,e)}function RE(r,e){const t=e.get(r);if(t)return t;let n=za(r,[],!1).filter(a=>kr(a)&&To(a)!=="body"),s=null;const i=Tr(r).position==="fixed";let o=i?ps(r):r;for(;kr(o)&&!vo(o);){const a=Tr(o),l=Rg(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ul(o)&&!l&&X1(r,o))?n=n.filter(h=>h!==o):s=a,o=ps(o)}return e.set(r,n),n}function LE(r){let{element:e,boundary:t,rootBoundary:n,strategy:s}=r;const o=[...t==="clippingAncestors"?ah(e)?[]:RE(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((c,h)=>{const d=X0(e,h,s);return c.top=Mt(d.top,c.top),c.right=hs(d.right,c.right),c.bottom=hs(d.bottom,c.bottom),c.left=Mt(d.left,c.left),c},X0(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IE(r){const{width:e,height:t}=Y1(r);return{width:e,height:t}}function FE(r,e,t){const n=Hr(e),s=Gr(e),i=t==="fixed",o=Js(r,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ds(0);if(n||!n&&!i)if((To(e)!=="body"||ul(s))&&(a=lh(e)),n){const g=Js(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&(l.x=ep(s));let c=0,h=0;if(s&&!n&&!i){const g=s.getBoundingClientRect();h=g.top+a.scrollTop,c=g.left+a.scrollLeft-ep(s,g)}const d=o.left+a.scrollLeft-l.x-c,f=o.top+a.scrollTop-l.y-h;return{x:d,y:f,width:o.width,height:o.height}}function wd(r){return Tr(r).position==="static"}function q0(r,e){if(!Hr(r)||Tr(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Gr(r)===t&&(t=t.ownerDocument.body),t}function q1(r,e){const t=Bt(r);if(ah(r))return t;if(!Hr(r)){let s=ps(r);for(;s&&!vo(s);){if(kr(s)&&!wd(s))return s;s=ps(s)}return t}let n=q0(r,e);for(;n&&kE(n)&&wd(n);)n=q0(n,e);return n&&vo(n)&&wd(n)&&!Rg(n)?t:n||TE(r)||t}const $E=async function(r){const e=this.getOffsetParent||q1,t=this.getDimensions,n=await t(r.floating);return{reference:FE(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function zE(r){return Tr(r).direction==="rtl"}const BE={convertOffsetParentRelativeRectToViewportRelativeRect:NE,getDocumentElement:Gr,getClippingRect:LE,getOffsetParent:q1,getElementRects:$E,getClientRects:PE,getDimensions:IE,getScale:Gi,isElement:kr,isRTL:zE};function UE(r,e){let t=null,n;const s=Gr(r);function i(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:h,width:d,height:f}=r.getBoundingClientRect();if(a||e(),!d||!f)return;const g=Vl(h),m=Vl(s.clientWidth-(c+d)),p=Vl(s.clientHeight-(h+f)),y=Vl(c),x={rootMargin:-g+"px "+-m+"px "+-p+"px "+-y+"px",threshold:Mt(0,hs(1,l))||1};let w=!0;function _(S){const C=S[0].intersectionRatio;if(C!==l){if(!w)return o();C?o(!1,C):n=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{t=new IntersectionObserver(_,{...x,root:s.ownerDocument})}catch{t=new IntersectionObserver(_,x)}t.observe(r)}return o(!0),i}function WE(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Ig(r),h=s||i?[...c?za(c):[],...za(e)]:[];h.forEach(v=>{s&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const d=c&&a?UE(c,t):null;let f=-1,g=null;o&&(g=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let m,p=l?Js(r):null;l&&y();function y(){const v=Js(r);p&&(v.x!==p.x||v.y!==p.y||v.width!==p.width||v.height!==p.height)&&t(),p=v,m=requestAnimationFrame(y)}return t(),()=>{var v;h.forEach(x=>{s&&x.removeEventListener("scroll",t),i&&x.removeEventListener("resize",t)}),d==null||d(),(v=g)==null||v.disconnect(),g=null,l&&cancelAnimationFrame(m)}}const VE=_E,HE=SE,YE=xE,GE=jE,XE=wE,K0=yE,qE=CE,KE=(r,e,t)=>{const n=new Map,s={platform:BE,...t},i={...s.platform,_c:n};return vE(r,e,{...s,platform:i})};var $c=typeof document<"u"?b.useLayoutEffect:b.useEffect;function _u(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,s;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!_u(r[n],e[n]))return!1;return!0}if(s=Object.keys(r),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const i=s[n];if(!(i==="_owner"&&r.$$typeof)&&!_u(r[i],e[i]))return!1}return!0}return r!==r&&e!==e}function K1(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function Q0(r,e){const t=K1(r);return Math.round(e*t)/t}function bd(r){const e=b.useRef(r);return $c(()=>{e.current=r}),e}function QE(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=r,[h,d]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,g]=b.useState(n);_u(f,n)||g(n);const[m,p]=b.useState(null),[y,v]=b.useState(null),x=b.useCallback(O=>{O!==C.current&&(C.current=O,p(O))},[]),w=b.useCallback(O=>{O!==T.current&&(T.current=O,v(O))},[]),_=i||m,S=o||y,C=b.useRef(null),T=b.useRef(null),E=b.useRef(h),D=l!=null,N=bd(l),F=bd(s),R=bd(c),z=b.useCallback(()=>{if(!C.current||!T.current)return;const O={placement:e,strategy:t,middleware:f};F.current&&(O.platform=F.current),KE(C.current,T.current,O).then(I=>{const U={...I,isPositioned:R.current!==!1};M.current&&!_u(E.current,U)&&(E.current=U,ll.flushSync(()=>{d(U)}))})},[f,e,t,F,R]);$c(()=>{c===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const M=b.useRef(!1);$c(()=>(M.current=!0,()=>{M.current=!1}),[]),$c(()=>{if(_&&(C.current=_),S&&(T.current=S),_&&S){if(N.current)return N.current(_,S,z);z()}},[_,S,z,N,D]);const Y=b.useMemo(()=>({reference:C,floating:T,setReference:x,setFloating:w}),[x,w]),V=b.useMemo(()=>({reference:_,floating:S}),[_,S]),G=b.useMemo(()=>{const O={position:t,left:0,top:0};if(!V.floating)return O;const I=Q0(V.floating,h.x),U=Q0(V.floating,h.y);return a?{...O,transform:"translate("+I+"px, "+U+"px)",...K1(V.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:I,top:U}},[t,a,V.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:z,refs:Y,elements:V,floatingStyles:G}),[h,z,Y,V,G])}const JE=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:s}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?K0({element:n.current,padding:s}).fn(t):{}:n?K0({element:n,padding:s}).fn(t):{}}}},ZE=(r,e)=>({...VE(r),options:[r,e]}),eO=(r,e)=>({...HE(r),options:[r,e]}),tO=(r,e)=>({...qE(r),options:[r,e]}),rO=(r,e)=>({...YE(r),options:[r,e]}),nO=(r,e)=>({...GE(r),options:[r,e]}),sO=(r,e)=>({...XE(r),options:[r,e]}),iO=(r,e)=>({...JE(r),options:[r,e]});var oO="Arrow",Q1=b.forwardRef((r,e)=>{const{children:t,width:n=10,height:s=5,...i}=r;return u.jsx(Me.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});Q1.displayName=oO;var aO=Q1;function lO(r,e=[]){let t=[];function n(i,o){const a=b.createContext(o),l=t.length;t=[...t,o];function c(d){const{scope:f,children:g,...m}=d,p=(f==null?void 0:f[r][l])||a,y=b.useMemo(()=>m,Object.values(m));return u.jsx(p.Provider,{value:y,children:g})}function h(d,f){const g=(f==null?void 0:f[r][l])||a,m=b.useContext(g);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,h]}const s=()=>{const i=t.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[r])||i;return b.useMemo(()=>({[`__scope${r}`]:{...a,[r]:l}}),[a,l])}};return s.scopeName=r,[n,cO(s,...e)]}function cO(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function uO(r){const[e,t]=b.useState(void 0);return us(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=r.offsetWidth,a=r.offsetHeight;t({width:o,height:a})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var J1="Popper",[Z1,eb]=lO(J1),[tI,tb]=Z1(J1),rb="PopperAnchor",nb=b.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...s}=r,i=tb(rb,t),o=b.useRef(null),a=pt(e,o);return b.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:u.jsx(Me.div,{...s,ref:a})});nb.displayName=rb;var Fg="PopperContent",[hO,dO]=Z1(Fg),sb=b.forwardRef((r,e)=>{var Ye,Or,Ht,Ge,xl,ai;const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:m,...p}=r,y=tb(Fg,t),[v,x]=b.useState(null),w=pt(e,js=>x(js)),[_,S]=b.useState(null),C=uO(_),T=(C==null?void 0:C.width)??0,E=(C==null?void 0:C.height)??0,D=n+(i!=="center"?"-"+i:""),N=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},F=Array.isArray(c)?c:[c],R=F.length>0,z={padding:N,boundary:F.filter(pO),altBoundary:R},{refs:M,floatingStyles:Y,placement:V,isPositioned:G,middlewareData:O}=QE({strategy:"fixed",placement:D,whileElementsMounted:(...js)=>WE(...js,{animationFrame:g==="always"}),elements:{reference:y.anchor},middleware:[ZE({mainAxis:s+E,alignmentAxis:o}),l&&eO({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?tO():void 0,...z}),l&&rO({...z}),nO({...z,apply:({elements:js,rects:$o,availableWidth:wl,availableHeight:Nn})=>{const{width:Fh,height:$h}=$o.reference,Xe=js.floating.style;Xe.setProperty("--radix-popper-available-width",`${wl}px`),Xe.setProperty("--radix-popper-available-height",`${Nn}px`),Xe.setProperty("--radix-popper-anchor-width",`${Fh}px`),Xe.setProperty("--radix-popper-anchor-height",`${$h}px`)}}),_&&iO({element:_,padding:a}),gO({arrowWidth:T,arrowHeight:E}),f&&sO({strategy:"referenceHidden",...z})]}),[I,U]=ab(V),B=sr(m);us(()=>{G&&(B==null||B())},[G,B]);const X=(Ye=O.arrow)==null?void 0:Ye.x,Q=(Or=O.arrow)==null?void 0:Or.y,ae=((Ht=O.arrow)==null?void 0:Ht.centerOffset)!==0,[Ue,re]=b.useState();return us(()=>{v&&re(window.getComputedStyle(v).zIndex)},[v]),u.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:G?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ue,"--radix-popper-transform-origin":[(Ge=O.transformOrigin)==null?void 0:Ge.x,(xl=O.transformOrigin)==null?void 0:xl.y].join(" "),...((ai=O.hide)==null?void 0:ai.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:u.jsx(hO,{scope:t,placedSide:I,onArrowChange:S,arrowX:X,arrowY:Q,shouldHideArrow:ae,children:u.jsx(Me.div,{"data-side":I,"data-align":U,...p,ref:w,style:{...p.style,animation:G?void 0:"none"}})})})});sb.displayName=Fg;var ib="PopperArrow",fO={top:"bottom",right:"left",bottom:"top",left:"right"},ob=b.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,i=dO(ib,n),o=fO[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(aO,{...s,ref:t,style:{...s.style,display:"block"}})})});ob.displayName=ib;function pO(r){return r!==null}var gO=r=>({name:"transformOrigin",options:r,fn(e){var y,v,x;const{placement:t,rects:n,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:r.arrowWidth,l=o?0:r.arrowHeight,[c,h]=ab(t),d={start:"0%",center:"50%",end:"100%"}[h],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,g=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${n.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${g}px`):c==="left"&&(m=`${n.floating.width+l}px`,p=o?d:`${g}px`),{data:{x:m,y:p}}}});function ab(r){const[e,t="center"]=r.split("-");return[e,t]}var mO=nb,vO=sb,yO=ob,[ch,rI]=jg("Tooltip",[eb]),$g=eb(),lb="TooltipProvider",xO=700,J0="tooltip.open",[wO,cb]=ch(lb),ub=r=>{const{__scopeTooltip:e,delayDuration:t=xO,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=r,[o,a]=b.useState(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),u.jsx(wO,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(h=>{l.current=h},[]),disableHoverableContent:s,children:i})};ub.displayName=lb;var hb="Tooltip",[nI,uh]=ch(hb),tp="TooltipTrigger",bO=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=uh(tp,t),i=cb(tp,t),o=$g(t),a=b.useRef(null),l=pt(e,a,s.onTriggerChange),c=b.useRef(!1),h=b.useRef(!1),d=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),u.jsx(mO,{asChild:!0,...o,children:u.jsx(Me.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:Se(r.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Se(r.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Se(r.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Se(r.onFocus,()=>{c.current||s.onOpen()}),onBlur:Se(r.onBlur,s.onClose),onClick:Se(r.onClick,s.onClose)})})});bO.displayName=tp;var _O="TooltipPortal",[sI,SO]=ch(_O,{forceMount:void 0}),yo="TooltipContent",db=b.forwardRef((r,e)=>{const t=SO(yo,r.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...i}=r,o=uh(yo,r.__scopeTooltip);return u.jsx(Co,{present:n||o.open,children:o.disableHoverableContent?u.jsx(fb,{side:s,...i,ref:e}):u.jsx(CO,{side:s,...i,ref:e})})}),CO=b.forwardRef((r,e)=>{const t=uh(yo,r.__scopeTooltip),n=cb(yo,r.__scopeTooltip),s=b.useRef(null),i=pt(e,s),[o,a]=b.useState(null),{trigger:l,onClose:c}=t,h=s.current,{onPointerInTransitChange:d}=n,f=b.useCallback(()=>{a(null),d(!1)},[d]),g=b.useCallback((m,p)=>{const y=m.currentTarget,v={x:m.clientX,y:m.clientY},x=EO(v,y.getBoundingClientRect()),w=OO(v,x),_=NO(p.getBoundingClientRect()),S=DO([...w,..._]);a(S),d(!0)},[d]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(l&&h){const m=y=>g(y,h),p=y=>g(y,l);return l.addEventListener("pointerleave",m),h.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",m),h.removeEventListener("pointerleave",p)}}},[l,h,g,f]),b.useEffect(()=>{if(o){const m=p=>{const y=p.target,v={x:p.clientX,y:p.clientY},x=(l==null?void 0:l.contains(y))||(h==null?void 0:h.contains(y)),w=!PO(v,o);x?f():w&&(f(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,h,o,c,f]),u.jsx(fb,{...r,ref:i})}),[jO,kO]=ch(hb,{isInside:!1}),fb=b.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=r,l=uh(yo,t),c=$g(t),{onClose:h}=l;return b.useEffect(()=>(document.addEventListener(J0,h),()=>document.removeEventListener(J0,h)),[h]),b.useEffect(()=>{if(l.trigger){const d=f=>{const g=f.target;g!=null&&g.contains(l.trigger)&&h()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,h]),u.jsx(th,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:h,children:u.jsxs(vO,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(t1,{children:n}),u.jsx(jO,{scope:t,isInside:!0,children:u.jsx(ak,{id:l.contentId,role:"tooltip",children:s||n})})]})})});db.displayName=yo;var pb="TooltipArrow",TO=b.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=$g(t);return kO(pb,t).isInside?null:u.jsx(yO,{...s,...n,ref:e})});TO.displayName=pb;function EO(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),s=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,s,i)){case i:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function OO(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function NO(r){const{top:e,right:t,bottom:n,left:s}=r;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function PO(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,h=e[o].y;l>n!=h>n&&t<(c-a)*(n-l)/(h-l)+a&&(s=!s)}return s}function DO(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),AO(e)}function AO(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const s=r[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const s=r[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var MO=ub,gb=db;const RO=MO,LO=b.forwardRef(({className:r,sideOffset:e=4,...t},n)=>u.jsx(gb,{ref:n,sideOffset:e,className:ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));LO.displayName=gb.displayName;var hh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dh=typeof window>"u"||"Deno"in globalThis;function dr(){}function IO(r,e){return typeof r=="function"?r(e):r}function FO(r){return typeof r=="number"&&r>=0&&r!==1/0}function $O(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Z0(r,e){return typeof r=="function"?r(e):r}function zO(r,e){return typeof r=="function"?r(e):r}function ev(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:a}=r;if(o){if(n){if(e.queryHash!==zg(o,e.options))return!1}else if(!Ua(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function tv(r,e){const{exact:t,status:n,predicate:s,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(Ba(e.options.mutationKey)!==Ba(i))return!1}else if(!Ua(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function zg(r,e){return((e==null?void 0:e.queryKeyHashFn)||Ba)(r)}function Ba(r){return JSON.stringify(r,(e,t)=>rp(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function Ua(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Ua(r[t],e[t])):!1}function mb(r,e){if(r===e)return r;const t=rv(r)&&rv(e);if(t||rp(r)&&rp(e)){const n=t?r:Object.keys(r),s=n.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const h=t?c:i[c];(!t&&n.includes(h)||t)&&r[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=mb(r[h],e[h]),a[h]===r[h]&&r[h]!==void 0&&l++)}return s===o&&l===s?r:a}return e}function rv(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function rp(r){if(!nv(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!nv(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function nv(r){return Object.prototype.toString.call(r)==="[object Object]"}function BO(r){return new Promise(e=>{setTimeout(e,r)})}function UO(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?mb(r,e):e}function WO(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function VO(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var Bg=Symbol();function vb(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Bg?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var $s,Yn,Zi,Ny,HO=(Ny=class extends hh{constructor(){super();ce(this,$s);ce(this,Yn);ce(this,Zi);ee(this,Zi,e=>{if(!dh&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){A(this,Yn)||this.setEventListener(A(this,Zi))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,Yn))==null||e.call(this),ee(this,Yn,void 0))}setEventListener(e){var t;ee(this,Zi,e),(t=A(this,Yn))==null||t.call(this),ee(this,Yn,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){A(this,$s)!==e&&(ee(this,$s,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof A(this,$s)=="boolean"?A(this,$s):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$s=new WeakMap,Yn=new WeakMap,Zi=new WeakMap,Ny),yb=new HO,eo,Gn,to,Py,YO=(Py=class extends hh{constructor(){super();ce(this,eo,!0);ce(this,Gn);ce(this,to);ee(this,to,e=>{if(!dh&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){A(this,Gn)||this.setEventListener(A(this,to))}onUnsubscribe(){var e;this.hasListeners()||((e=A(this,Gn))==null||e.call(this),ee(this,Gn,void 0))}setEventListener(e){var t;ee(this,to,e),(t=A(this,Gn))==null||t.call(this),ee(this,Gn,e(this.setOnline.bind(this)))}setOnline(e){A(this,eo)!==e&&(ee(this,eo,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return A(this,eo)}},eo=new WeakMap,Gn=new WeakMap,to=new WeakMap,Py),Su=new YO;function GO(){let r,e;const t=new Promise((s,i)=>{r=s,e=i});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function XO(r){return Math.min(1e3*2**r,3e4)}function xb(r){return(r??"online")==="online"?Su.isOnline():!0}var wb=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function _d(r){return r instanceof wb}function bb(r){let e=!1,t=0,n=!1,s;const i=GO(),o=p=>{var y;n||(f(new wb(p)),(y=r.abort)==null||y.call(r))},a=()=>{e=!0},l=()=>{e=!1},c=()=>yb.isFocused()&&(r.networkMode==="always"||Su.isOnline())&&r.canRun(),h=()=>xb(r.networkMode)&&r.canRun(),d=p=>{var y;n||(n=!0,(y=r.onSuccess)==null||y.call(r,p),s==null||s(),i.resolve(p))},f=p=>{var y;n||(n=!0,(y=r.onError)==null||y.call(r,p),s==null||s(),i.reject(p))},g=()=>new Promise(p=>{var y;s=v=>{(n||c())&&p(v)},(y=r.onPause)==null||y.call(r)}).then(()=>{var p;s=void 0,n||(p=r.onContinue)==null||p.call(r)}),m=()=>{if(n)return;let p;const y=t===0?r.initialPromise:void 0;try{p=y??r.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(d).catch(v=>{var C;if(n)return;const x=r.retry??(dh?0:3),w=r.retryDelay??XO,_=typeof w=="function"?w(t,v):w,S=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,v);if(e||!S){f(v);return}t++,(C=r.onFail)==null||C.call(r,t,v),BO(_).then(()=>c()?void 0:g()).then(()=>{e?f(v):m()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?m():g().then(m),i)}}function qO(){let r=[],e=0,t=a=>{a()},n=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?r.push(a):s(()=>{t(a)})},o=()=>{const a=r;r=[],a.length&&s(()=>{n(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{s=a}}}var ht=qO(),zs,Dy,_b=(Dy=class{constructor(){ce(this,zs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),FO(this.gcTime)&&ee(this,zs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(dh?1/0:5*60*1e3))}clearGcTimeout(){A(this,zs)&&(clearTimeout(A(this,zs)),ee(this,zs,void 0))}},zs=new WeakMap,Dy),ro,no,Gt,nt,tl,Bs,fr,Qr,Ay,KO=(Ay=class extends _b{constructor(e){super();ce(this,fr);ce(this,ro);ce(this,no);ce(this,Gt);ce(this,nt);ce(this,tl);ce(this,Bs);ee(this,Bs,!1),ee(this,tl,e.defaultOptions),this.setOptions(e.options),this.observers=[],ee(this,Gt,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ee(this,ro,JO(this.options)),this.state=e.state??A(this,ro),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=A(this,nt))==null?void 0:e.promise}setOptions(e){this.options={...A(this,tl),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&A(this,Gt).remove(this)}setData(e,t){const n=UO(this.state.data,e,this.options);return Ze(this,fr,Qr).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){Ze(this,fr,Qr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,s;const t=(n=A(this,nt))==null?void 0:n.promise;return(s=A(this,nt))==null||s.cancel(e),t?t.then(dr).catch(dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(A(this,ro))}isActive(){return this.observers.some(e=>zO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Bg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!$O(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=A(this,nt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=A(this,nt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),A(this,Gt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(A(this,nt)&&(A(this,Bs)?A(this,nt).cancel({revert:!0}):A(this,nt).cancelRetry()),this.scheduleGc()),A(this,Gt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ze(this,fr,Qr).call(this,{type:"invalidate"})}fetch(e,t){var l,c,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(A(this,nt))return A(this,nt).continueRetry(),A(this,nt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ee(this,Bs,!0),n.signal)})},i=()=>{const d=vb(this.options,t),f={queryKey:this.queryKey,meta:this.meta};return s(f),ee(this,Bs,!1),this.options.persister?this.options.persister(d,f,this):d(f)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),ee(this,no,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&Ze(this,fr,Qr).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const a=d=>{var f,g,m,p;_d(d)&&d.silent||Ze(this,fr,Qr).call(this,{type:"error",error:d}),_d(d)||((g=(f=A(this,Gt).config).onError)==null||g.call(f,d,this),(p=(m=A(this,Gt).config).onSettled)==null||p.call(m,this.state.data,d,this)),this.scheduleGc()};return ee(this,nt,bb({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var f,g,m,p;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){a(y);return}(g=(f=A(this,Gt).config).onSuccess)==null||g.call(f,d,this),(p=(m=A(this,Gt).config).onSettled)==null||p.call(m,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{Ze(this,fr,Qr).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{Ze(this,fr,Qr).call(this,{type:"pause"})},onContinue:()=>{Ze(this,fr,Qr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),A(this,nt).start()}},ro=new WeakMap,no=new WeakMap,Gt=new WeakMap,nt=new WeakMap,tl=new WeakMap,Bs=new WeakMap,fr=new WeakSet,Qr=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...QO(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return _d(s)&&s.revert&&A(this,no)?{...A(this,no),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),ht.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),A(this,Gt).notify({query:this,type:"updated",action:e})})},Ay);function QO(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xb(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function JO(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Rr,My,ZO=(My=class extends hh{constructor(e={}){super();ce(this,Rr);this.config=e,ee(this,Rr,new Map)}build(e,t,n){const s=t.queryKey,i=t.queryHash??zg(s,t);let o=this.get(i);return o||(o=new KO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){A(this,Rr).has(e.queryHash)||(A(this,Rr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=A(this,Rr).get(e.queryHash);t&&(e.destroy(),t===e&&A(this,Rr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return A(this,Rr).get(e)}getAll(){return[...A(this,Rr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>ev(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>ev(e,n)):t}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Rr=new WeakMap,My),Lr,lt,Us,Ir,Fn,Ry,eN=(Ry=class extends _b{constructor(e){super();ce(this,Ir);ce(this,Lr);ce(this,lt);ce(this,Us);this.mutationId=e.mutationId,ee(this,lt,e.mutationCache),ee(this,Lr,[]),this.state=e.state||tN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){A(this,Lr).includes(e)||(A(this,Lr).push(e),this.clearGcTimeout(),A(this,lt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ee(this,Lr,A(this,Lr).filter(t=>t!==e)),this.scheduleGc(),A(this,lt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){A(this,Lr).length||(this.state.status==="pending"?this.scheduleGc():A(this,lt).remove(this))}continue(){var e;return((e=A(this,Us))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,c,h,d,f,g,m,p,y,v,x,w,_,S,C,T;ee(this,Us,bb({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(E,D)=>{Ze(this,Ir,Fn).call(this,{type:"failed",failureCount:E,error:D})},onPause:()=>{Ze(this,Ir,Fn).call(this,{type:"pause"})},onContinue:()=>{Ze(this,Ir,Fn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>A(this,lt).canRun(this)}));const t=this.state.status==="pending",n=!A(this,Us).canStart();try{if(!t){Ze(this,Ir,Fn).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=A(this,lt).config).onMutate)==null?void 0:i.call(s,e,this));const D=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));D!==this.state.context&&Ze(this,Ir,Fn).call(this,{type:"pending",context:D,variables:e,isPaused:n})}const E=await A(this,Us).start();return await((c=(l=A(this,lt).config).onSuccess)==null?void 0:c.call(l,E,e,this.state.context,this)),await((d=(h=this.options).onSuccess)==null?void 0:d.call(h,E,e,this.state.context)),await((g=(f=A(this,lt).config).onSettled)==null?void 0:g.call(f,E,null,this.state.variables,this.state.context,this)),await((p=(m=this.options).onSettled)==null?void 0:p.call(m,E,null,e,this.state.context)),Ze(this,Ir,Fn).call(this,{type:"success",data:E}),E}catch(E){try{throw await((v=(y=A(this,lt).config).onError)==null?void 0:v.call(y,E,e,this.state.context,this)),await((w=(x=this.options).onError)==null?void 0:w.call(x,E,e,this.state.context)),await((S=(_=A(this,lt).config).onSettled)==null?void 0:S.call(_,void 0,E,this.state.variables,this.state.context,this)),await((T=(C=this.options).onSettled)==null?void 0:T.call(C,void 0,E,e,this.state.context)),E}finally{Ze(this,Ir,Fn).call(this,{type:"error",error:E})}}finally{A(this,lt).runNext(this)}}},Lr=new WeakMap,lt=new WeakMap,Us=new WeakMap,Ir=new WeakSet,Fn=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ht.batch(()=>{A(this,Lr).forEach(n=>{n.onMutationUpdate(e)}),A(this,lt).notify({mutation:this,type:"updated",action:e})})},Ry);function tN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pt,rl,Ly,rN=(Ly=class extends hh{constructor(e={}){super();ce(this,Pt);ce(this,rl);this.config=e,ee(this,Pt,new Map),ee(this,rl,Date.now())}build(e,t,n){const s=new eN({mutationCache:this,mutationId:++Sl(this,rl)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){const t=Hl(e),n=A(this,Pt).get(t)??[];n.push(e),A(this,Pt).set(t,n),this.notify({type:"added",mutation:e})}remove(e){var n;const t=Hl(e);if(A(this,Pt).has(t)){const s=(n=A(this,Pt).get(t))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?A(this,Pt).delete(t):A(this,Pt).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const t=(n=A(this,Pt).get(Hl(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var n;const t=(n=A(this,Pt).get(Hl(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...A(this,Pt).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>tv(t,n))}findAll(e={}){return this.getAll().filter(t=>tv(e,t))}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ht.batch(()=>Promise.all(e.map(t=>t.continue().catch(dr))))}},Pt=new WeakMap,rl=new WeakMap,Ly);function Hl(r){var e;return((e=r.options.scope)==null?void 0:e.id)??String(r.mutationId)}function sv(r){return{onFetch:(e,t)=>{var h,d,f,g,m;const n=e.options,s=(f=(d=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},v=vb(e.options,e.fetchOptions),x=async(w,_,S)=>{if(p)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const C={queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};y(C);const T=await v(C),{maxPages:E}=e.options,D=S?VO:WO;return{pages:D(w.pages,T,E),pageParams:D(w.pageParams,_,E)}};if(s&&i.length){const w=s==="backward",_=w?nN:iv,S={pages:i,pageParams:o},C=_(n,S);a=await x(S,C,w)}else{const w=r??i.length;do{const _=l===0?o[0]??n.initialPageParam:iv(n,a);if(l>0&&_==null)break;a=await x(a,_),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var p,y;return(y=(p=e.options).persister)==null?void 0:y.call(p,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function iv(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function nN(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var Oe,Xn,qn,so,io,Kn,oo,ao,Iy,sN=(Iy=class{constructor(r={}){ce(this,Oe);ce(this,Xn);ce(this,qn);ce(this,so);ce(this,io);ce(this,Kn);ce(this,oo);ce(this,ao);ee(this,Oe,r.queryCache||new ZO),ee(this,Xn,r.mutationCache||new rN),ee(this,qn,r.defaultOptions||{}),ee(this,so,new Map),ee(this,io,new Map),ee(this,Kn,0)}mount(){Sl(this,Kn)._++,A(this,Kn)===1&&(ee(this,oo,yb.subscribe(async r=>{r&&(await this.resumePausedMutations(),A(this,Oe).onFocus())})),ee(this,ao,Su.subscribe(async r=>{r&&(await this.resumePausedMutations(),A(this,Oe).onOnline())})))}unmount(){var r,e;Sl(this,Kn)._--,A(this,Kn)===0&&((r=A(this,oo))==null||r.call(this),ee(this,oo,void 0),(e=A(this,ao))==null||e.call(this),ee(this,ao,void 0))}isFetching(r){return A(this,Oe).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return A(this,Xn).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=A(this,Oe).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.getQueryData(r.queryKey);if(e===void 0)return this.fetchQuery(r);{const t=this.defaultQueryOptions(r),n=A(this,Oe).build(this,t);return r.revalidateIfStale&&n.isStaleByTime(Z0(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(r){return A(this,Oe).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=A(this,Oe).get(n.queryHash),i=s==null?void 0:s.state.data,o=IO(e,i);if(o!==void 0)return A(this,Oe).build(this,n).setData(o,{...t,manual:!0})}setQueriesData(r,e,t){return ht.batch(()=>A(this,Oe).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=A(this,Oe).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=A(this,Oe);ht.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=A(this,Oe),n={type:"active",...r};return ht.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(r={},e={}){const t={revert:!0,...e},n=ht.batch(()=>A(this,Oe).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(dr).catch(dr)}invalidateQueries(r={},e={}){return ht.batch(()=>{if(A(this,Oe).findAll(r).forEach(n=>{n.invalidate()}),r.refetchType==="none")return Promise.resolve();const t={...r,type:r.refetchType??r.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(r={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=ht.batch(()=>A(this,Oe).findAll(r).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(dr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(dr)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=A(this,Oe).build(this,e);return t.isStaleByTime(Z0(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(dr).catch(dr)}fetchInfiniteQuery(r){return r.behavior=sv(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(dr).catch(dr)}ensureInfiniteQueryData(r){return r.behavior=sv(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Su.isOnline()?A(this,Xn).resumePausedMutations():Promise.resolve()}getQueryCache(){return A(this,Oe)}getMutationCache(){return A(this,Xn)}getDefaultOptions(){return A(this,qn)}setDefaultOptions(r){ee(this,qn,r)}setQueryDefaults(r,e){A(this,so).set(Ba(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...A(this,so).values()];let t={};return e.forEach(n=>{Ua(r,n.queryKey)&&(t={...t,...n.defaultOptions})}),t}setMutationDefaults(r,e){A(this,io).set(Ba(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...A(this,io).values()];let t={};return e.forEach(n=>{Ua(r,n.mutationKey)&&(t={...t,...n.defaultOptions})}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...A(this,qn).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=zg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Bg&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...A(this,qn).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){A(this,Oe).clear(),A(this,Xn).clear()}},Oe=new WeakMap,Xn=new WeakMap,qn=new WeakMap,so=new WeakMap,io=new WeakMap,Kn=new WeakMap,oo=new WeakMap,ao=new WeakMap,Iy),iN=b.createContext(void 0),oN=({client:r,children:e})=>(b.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),u.jsx(iN.Provider,{value:r,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Wa.apply(this,arguments)}var Zn;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Zn||(Zn={}));const ov="popstate";function aN(r){r===void 0&&(r={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return np("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Cb(s)}return cN(e,t,null,r)}function Ie(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sb(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lN(){return Math.random().toString(36).substr(2,8)}function av(r,e){return{usr:r.state,key:r.key,idx:e}}function np(r,e,t,n){return t===void 0&&(t=null),Wa({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Eo(e):e,{state:t,key:e&&e.key||n||lN()})}function Cb(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Eo(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function cN(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=Zn.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Wa({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Zn.Pop;let y=h(),v=y==null?null:y-c;c=y,l&&l({action:a,location:p.location,delta:v})}function f(y,v){a=Zn.Push;let x=np(p.location,y,v);c=h()+1;let w=av(x,c),_=p.createHref(x);try{o.pushState(w,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&l&&l({action:a,location:p.location,delta:1})}function g(y,v){a=Zn.Replace;let x=np(p.location,y,v);c=h();let w=av(x,c),_=p.createHref(x);o.replaceState(w,"",_),i&&l&&l({action:a,location:p.location,delta:0})}function m(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof y=="string"?y:Cb(y);return x=x.replace(/ $/,"%20"),Ie(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let p={get action(){return a},get location(){return r(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ov,d),l=y,()=>{s.removeEventListener(ov,d),l=null}},createHref(y){return e(s,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(y){return o.go(y)}};return p}var lv;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(lv||(lv={}));function uN(r,e,t){return t===void 0&&(t="/"),hN(r,e,t,!1)}function hN(r,e,t,n){let s=typeof e=="string"?Eo(e):e,i=Tb(s.pathname||"/",t);if(i==null)return null;let o=jb(r);dN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=SN(i);a=bN(o[l],c,n)}return a}function jb(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ie(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Hs([n,l.relativePath]),h=t.concat(l);i.children&&i.children.length>0&&(Ie(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),jb(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:xN(c,i.index),routesMeta:h})};return r.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of kb(i.path))s(i,o,l)}),e}function kb(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=kb(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>r.startsWith("/")&&l===""?"/":l)}function dN(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:wN(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const fN=/^:[\w-]+$/,pN=3,gN=2,mN=1,vN=10,yN=-2,cv=r=>r==="*";function xN(r,e){let t=r.split("/"),n=t.length;return t.some(cv)&&(n+=yN),e&&(n+=gN),t.filter(s=>!cv(s)).reduce((s,i)=>s+(fN.test(i)?pN:i===""?mN:vN),n)}function wN(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function bN(r,e,t){let{routesMeta:n}=r,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=uv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&t&&!n[n.length-1].route.index&&(d=uv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Hs([i,d.pathname]),pathnameBase:TN(Hs([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Hs([i,d.pathnameBase]))}return o}function uv(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=_N(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let p=a[d]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const m=a[d];return g&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:r}}function _N(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Sb(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function SN(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sb(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Tb(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function CN(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Eo(r):r;return{pathname:t?t.startsWith("/")?t:jN(t,e):e,search:EN(n),hash:ON(s)}}function jN(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Sd(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Eb(r,e){let t=kN(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function Ob(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=Eo(r):(s=Wa({},r),Ie(!s.pathname||!s.pathname.includes("?"),Sd("?","pathname","search",s)),Ie(!s.pathname||!s.pathname.includes("#"),Sd("#","pathname","hash",s)),Ie(!s.search||!s.search.includes("#"),Sd("#","search","hash",s)));let i=r===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=CN(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Hs=r=>r.join("/").replace(/\/\/+/g,"/"),TN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),EN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ON=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function NN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Nb=["post","put","patch","delete"];new Set(Nb);const PN=["get",...Nb];new Set(PN);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Va(){return Va=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Va.apply(this,arguments)}const Ug=b.createContext(null),DN=b.createContext(null),hl=b.createContext(null),fh=b.createContext(null),ni=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Pb=b.createContext(null);function dl(){return b.useContext(fh)!=null}function ph(){return dl()||Ie(!1),b.useContext(fh).location}function Db(r){b.useContext(hl).static||b.useLayoutEffect(r)}function Tn(){let{isDataRoute:r}=b.useContext(ni);return r?HN():AN()}function AN(){dl()||Ie(!1);let r=b.useContext(Ug),{basename:e,future:t,navigator:n}=b.useContext(hl),{matches:s}=b.useContext(ni),{pathname:i}=ph(),o=JSON.stringify(Eb(s,t.v7_relativeSplatPath)),a=b.useRef(!1);return Db(()=>{a.current=!0}),b.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let d=Ob(c,JSON.parse(o),i,h.relative==="path");r==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Hs([e,d.pathname])),(h.replace?n.replace:n.push)(d,h.state,h)},[e,n,o,i,r])}function MN(r,e){return RN(r,e)}function RN(r,e,t,n){dl()||Ie(!1);let{navigator:s}=b.useContext(hl),{matches:i}=b.useContext(ni),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ph(),h;if(e){var d;let y=typeof e=="string"?Eo(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||Ie(!1),h=y}else h=c;let f=h.pathname||"/",g=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=uN(r,{pathname:g}),p=zN(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Hs([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Hs([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,t,n);return e&&p?b.createElement(fh.Provider,{value:{location:Va({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Zn.Pop}},p):p}function LN(){let r=VN(),e=NN(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:s},t):null,null)}const IN=b.createElement(LN,null);class FN extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(ni.Provider,{value:this.props.routeContext},b.createElement(Pb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $N(r){let{routeContext:e,match:t,children:n}=r,s=b.useContext(Ug);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(ni.Provider,{value:e},n)}function zN(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,a=(s=t)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Ie(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(t&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:g}=t,m=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,m=!1,p=null,y=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,p=d.route.errorElement||IN,l&&(c<0&&f===0?(m=!0,y=null):c===f&&(m=!0,y=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),x=()=>{let w;return g?w=p:m?w=y:d.route.Component?w=b.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=h,b.createElement($N,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:w})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(FN,{location:t.location,revalidation:t.revalidation,component:p,error:g,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var Ab=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Ab||{}),Cu=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Cu||{});function BN(r){let e=b.useContext(Ug);return e||Ie(!1),e}function UN(r){let e=b.useContext(DN);return e||Ie(!1),e}function WN(r){let e=b.useContext(ni);return e||Ie(!1),e}function Mb(r){let e=WN(),t=e.matches[e.matches.length-1];return t.route.id||Ie(!1),t.route.id}function VN(){var r;let e=b.useContext(Pb),t=UN(Cu.UseRouteError),n=Mb(Cu.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function HN(){let{router:r}=BN(Ab.UseNavigateStable),e=Mb(Cu.UseNavigateStable),t=b.useRef(!1);return Db(()=>{t.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,Va({fromRouteId:e},i)))},[r,e])}function YN(r){let{to:e,replace:t,state:n,relative:s}=r;dl()||Ie(!1);let{future:i,static:o}=b.useContext(hl),{matches:a}=b.useContext(ni),{pathname:l}=ph(),c=Tn(),h=Ob(e,Eb(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(h);return b.useEffect(()=>c(JSON.parse(d),{replace:t,state:n,relative:s}),[c,d,s,t,n]),null}function Jr(r){Ie(!1)}function GN(r){let{basename:e="/",children:t=null,location:n,navigationType:s=Zn.Pop,navigator:i,static:o=!1,future:a}=r;dl()&&Ie(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:i,static:o,future:Va({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=Eo(n));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:m="default"}=n,p=b.useMemo(()=>{let y=Tb(h,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:g,key:m},navigationType:s}},[l,h,d,f,g,m,s]);return p==null?null:b.createElement(hl.Provider,{value:c},b.createElement(fh.Provider,{children:t,value:p}))}function XN(r){let{children:e,location:t}=r;return MN(sp(e),t)}new Promise(()=>{});function sp(r,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(r,(n,s)=>{if(!b.isValidElement(n))return;let i=[...e,s];if(n.type===b.Fragment){t.push.apply(t,sp(n.props.children,i));return}n.type!==Jr&&Ie(!1),!n.props.index||!n.props.children||Ie(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=sp(n.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qN="6";try{window.__reactRouterVersion=qN}catch{}const KN="startTransition",hv=qy[KN];function QN(r){let{basename:e,children:t,future:n,window:s}=r,i=b.useRef();i.current==null&&(i.current=aN({window:s,v5Compat:!0}));let o=i.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},h=b.useCallback(d=>{c&&hv?hv(()=>l(d)):l(d)},[l,c]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.createElement(GN,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:n})}var dv;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(dv||(dv={}));var fv;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(fv||(fv={}));const JN="modulepreload",ZN=function(r){return"/"+r},pv={},fl=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=ZN(l),l in pv)return;pv[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":JN,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},eP=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>fl(async()=>{const{default:n}=await Promise.resolve().then(()=>Oo);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Wg extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class tP extends Wg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gv extends Wg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mv extends Wg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ip;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ip||(ip={}));var rP=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class nP{constructor(e,{headers:t={},customFetch:n,region:s=ip.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=eP(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return rP(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(a["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(a["Content-Type"]="application/json",h=JSON.stringify(o)));const d=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:h}).catch(p=>{throw new tP(p)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new gv(d);if(!d.ok)throw new mv(d);let g=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return g==="application/json"?m=yield d.json():g==="application/octet-stream"?m=yield d.blob():g==="text/event-stream"?m=d:g==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof mv||s instanceof gv?s.context:void 0}}})}}var bt={},Vg={},gh={},pl={},mh={},vh={},sP=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xo=sP();const iP=xo.fetch,Rb=xo.fetch.bind(xo),Lb=xo.Headers,oP=xo.Request,aP=xo.Response,Oo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lb,Request:oP,Response:aP,default:Rb,fetch:iP},Symbol.toStringTag,{value:"Module"})),lP=sS(Oo);var yh={};Object.defineProperty(yh,"__esModule",{value:!0});let cP=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};yh.default=cP;var Ib=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vh,"__esModule",{value:!0});const uP=Ib(lP),hP=Ib(yh);let dP=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=uP.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,h=null,d=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=v:h=JSON.parse(v))}const p=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");p&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,d=null,f=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const p=await i.text();try{c=JSON.parse(p),Array.isArray(c)&&i.status===404&&(h=[],c=null,f=200,g="OK")}catch{i.status===404&&p===""?(f=204,g="No Content"):c={message:p}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,g="OK"),c&&this.shouldThrowOnError)throw new hP.default(c)}return{error:c,data:h,count:d,status:f,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};vh.default=dP;var fP=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mh,"__esModule",{value:!0});const pP=fP(vh);let gP=class extends pP.default{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};mh.default=gP;var mP=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pl,"__esModule",{value:!0});const vP=mP(mh);let yP=class extends vP.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};pl.default=yP;var xP=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gh,"__esModule",{value:!0});const Ko=xP(pl);let wP=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ko.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ko.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Ko.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Ko.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ko.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};gh.default=wP;var xh={},wh={};Object.defineProperty(wh,"__esModule",{value:!0});wh.version=void 0;wh.version="0.0.0-automated";Object.defineProperty(xh,"__esModule",{value:!0});xh.DEFAULT_HEADERS=void 0;const bP=wh;xh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${bP.version}`};var Fb=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vg,"__esModule",{value:!0});const _P=Fb(gh),SP=Fb(pl),CP=xh;let jP=class $b{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},CP.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new _P.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $b(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;n||s?(o=n?"HEAD":"GET",Object.entries(t).filter(([h,d])=>d!==void 0).map(([h,d])=>[h,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([h,d])=>{a.searchParams.append(h,d)})):(o="POST",l=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new SP.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Vg.default=jP;var No=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});bt.PostgrestError=bt.PostgrestBuilder=bt.PostgrestTransformBuilder=bt.PostgrestFilterBuilder=bt.PostgrestQueryBuilder=bt.PostgrestClient=void 0;const zb=No(Vg);bt.PostgrestClient=zb.default;const Bb=No(gh);bt.PostgrestQueryBuilder=Bb.default;const Ub=No(pl);bt.PostgrestFilterBuilder=Ub.default;const Wb=No(mh);bt.PostgrestTransformBuilder=Wb.default;const Vb=No(vh);bt.PostgrestBuilder=Vb.default;const Hb=No(yh);bt.PostgrestError=Hb.default;var kP=bt.default={PostgrestClient:zb.default,PostgrestQueryBuilder:Bb.default,PostgrestFilterBuilder:Ub.default,PostgrestTransformBuilder:Wb.default,PostgrestBuilder:Vb.default,PostgrestError:Hb.default};const{PostgrestClient:TP,PostgrestQueryBuilder:uI,PostgrestFilterBuilder:hI,PostgrestTransformBuilder:dI,PostgrestBuilder:fI,PostgrestError:pI}=kP;function EP(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const OP=EP(),NP="2.11.15",PP=`realtime-js/${NP}`,DP="1.0.0",Yb=1e4,AP=1e3;var ma;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ma||(ma={}));var rt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(rt||(rt={}));var gr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(gr||(gr={}));var op;(function(r){r.websocket="websocket"})(op||(op={}));var Ps;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ps||(Ps={}));class MP{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const l=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class Gb{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pe;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(pe||(pe={}));const vv=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=RP(o,r,e,s),i),{})},RP=(r,e,t,n)=>{const s=e.find(a=>a.name===r),i=s==null?void 0:s.type,o=t[r];return i&&!n.includes(i)?Xb(i,o):ap(o)},Xb=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return $P(e,t)}switch(r){case pe.bool:return LP(e);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return IP(e);case pe.json:case pe.jsonb:return FP(e);case pe.timestamp:return zP(e);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return ap(e);default:return ap(e)}},ap=r=>r,LP=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},IP=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},FP=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},$P=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Xb(e,a))}return r},zP=r=>typeof r=="string"?r.replace(" ","T"):r,qb=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Cd{constructor(e,t,n={},s=Yb){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yv;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(yv||(yv={}));class va{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=va.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=va.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=va.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const d=i[c];if(d){const f=h.map(y=>y.presence_ref),g=d.map(y=>y.presence_ref),m=h.filter(y=>g.indexOf(y.presence_ref)<0),p=d.filter(y=>f.indexOf(y.presence_ref)<0);m.length>0&&(a[c]=m),p.length>0&&(l[c]=p)}else a[c]=h}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const d=e[a].map(g=>g.presence_ref),f=h.filter(g=>d.indexOf(g.presence_ref)<0);e[a].unshift(...f)}n(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(d=>d.presence_ref);c=c.filter(d=>h.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xv;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(xv||(xv={}));var wv;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(wv||(wv={}));var nn;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(nn||(nn={}));class Hg{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Cd(this,gr.join,this.params,this.timeout),this.rejoinTimer=new Gb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new va(this),this.broadcastEndpointURL=qb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==rt.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e(nn.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(nn.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var d;if(this.socket.setAuth(),h===void 0){e==null||e(nn.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,g=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,m=[];for(let p=0;p<g;p++){const y=f[p],{filter:{event:v,schema:x,table:w,filter:_}}=y,S=h&&h[p];if(S&&S.event===v&&S.schema===x&&S.table===w&&S.filter===_)m.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=rt.errored,e==null||e(nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(nn.SUBSCRIBED);return}}).receive("error",h=>{this.state=rt.errored,e==null||e(nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Cd(this,gr.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Cd(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=gr;if(n&&[a,l,c,h].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var m,p,y;return((m=g.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(p=g.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(g=>g.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var m,p,y,v,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const _=g.id,S=(m=g.filter)===null||m===void 0?void 0:m.event;return _&&((p=t.ids)===null||p===void 0?void 0:p.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(x=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:p,table:y,commit_timestamp:v,type:x,errors:w}=m;f=Object.assign(Object.assign({},{schema:p,table:y,commit_timestamp:v,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(m))}g.callback(f,n)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Hg.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gr.close,{},e)}_onError(e){this._on(gr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=vv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=vv(e.columns,e.old_record)),t}}const bv=()=>{},BP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class UP{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yb,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bv,this.ref=0,this.logger=bv,this.conn=null,this.sendBuffer=[],this.serializer=new MP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>fl(async()=>{const{default:l}=await Promise.resolve().then(()=>Oo);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${op.websocket}`,this.httpEndpoint=qb(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Gb(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=OP),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:DP}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ma.connecting:return Ps.Connecting;case ma.open:return Ps.Open;case ma.closing:return Ps.Closing;default:return Ps.Closed}}isConnected(){return this.connectionState()===Ps.Open}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Hg(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const s={access_token:t,version:PP};t&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(gr.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(AP,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:o}=t;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([BP],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class Yg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function We(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class WP extends Yg{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lp extends Yg{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var VP=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const Kb=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>fl(async()=>{const{default:n}=await Promise.resolve().then(()=>Oo);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},HP=()=>VP(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fl(()=>Promise.resolve().then(()=>Oo),void 0)).Response:Response}),cp=r=>{if(Array.isArray(r))return r.map(t=>cp(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=cp(n)}),e},YP=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var si=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const jd=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),GP=(r,e,t)=>si(void 0,void 0,void 0,function*(){const n=yield HP();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{const i=r.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new WP(jd(s),i,o))}).catch(s=>{e(new lp(jd(s),s))}):e(new lp(jd(r),r))}),XP=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!n?s:(YP(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),t))};function gl(r,e,t,n,s,i){return si(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,XP(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>GP(l,a,n))})})}function ju(r,e,t,n){return si(this,void 0,void 0,function*(){return gl(r,"GET",e,t,n)})}function sn(r,e,t,n,s){return si(this,void 0,void 0,function*(){return gl(r,"POST",e,n,s,t)})}function up(r,e,t,n,s){return si(this,void 0,void 0,function*(){return gl(r,"PUT",e,n,s,t)})}function qP(r,e,t,n){return si(this,void 0,void 0,function*(){return gl(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Qb(r,e,t,n,s){return si(this,void 0,void 0,function*(){return gl(r,"DELETE",e,n,s,t)})}var yt=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const KP={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_v={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class QP{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Kb(s)}uploadOrUpdate(e,t,n,s){return yt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},_v),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(t),h=this._getFinalPath(c),d=yield(e=="PUT"?up:sn)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(We(i))return{data:null,error:i};throw i}})}upload(e,t,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return yt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:_v.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const d=yield up(this.fetch,a.toString(),l,{headers:h});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(We(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield sn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Yg("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}update(e,t,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return yt(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}copy(e,t,n){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return yt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield sn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return yt(this,void 0,void 0,function*(){try{const s=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}download(e,t){return yt(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ju(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(We(a))return{data:null,error:a};throw a}})}info(e){return yt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield ju(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cp(n),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}exists(e){return yt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield qP(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(We(n)&&n instanceof lp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return yt(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}})}list(e,t,n){return yt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},KP),t),{prefix:e||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const JP="2.10.4",ZP={"X-Client-Info":`storage-js/${JP}`};var di=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class eD{constructor(e,t={},n,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},ZP),t),this.fetch=Kb(n)}listBuckets(){return di(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(We(e))return{data:null,error:e};throw e}})}getBucket(e){return di(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return di(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return di(this,void 0,void 0,function*(){try{return{data:yield up(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}emptyBucket(e){return di(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}})}deleteBucket(e){return di(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}})}}class tD extends eD{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new QP(this.url,this.headers,e,this.fetch)}}const rD="2.53.0";let sa="";typeof Deno<"u"?sa="deno":typeof document<"u"?sa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sa="react-native":sa="node";const nD={"X-Client-Info":`supabase-js-${sa}/${rD}`},sD={headers:nD},iD={schema:"public"},oD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aD={};var lD=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};const cD=r=>{let e;return r?e=r:typeof fetch>"u"?e=Rb:e=fetch,(...t)=>e(...t)},uD=()=>typeof Headers>"u"?Lb:Headers,hD=(r,e,t)=>{const n=cD(t),s=uD();return(i,o)=>lD(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:r;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var dD=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};function fD(r){return r.endsWith("/")?r:r+"/"}function pD(r,e){var t,n;const{db:s,auth:i,realtime:o,global:a}=r,{db:l,auth:c,realtime:h,global:d}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>dD(this,void 0,void 0,function*(){return""})};return r.accessToken?f.accessToken=r.accessToken:delete f.accessToken,f}const Jb="2.71.1",_i=30*1e3,hp=3,kd=hp*_i,gD="http://localhost:9999",mD="supabase.auth.token",vD={"X-Client-Info":`gotrue-js/${Jb}`},dp="X-Supabase-Api-Version",Zb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xD=10*60*1e3;class Gg extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function K(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class wD extends Gg{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function bD(r){return K(r)&&r.name==="AuthApiError"}class e_ extends Gg{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ws extends Gg{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class $n extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _D(r){return K(r)&&r.name==="AuthSessionMissingError"}class Yl extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gl extends ws{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends ws{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SD(r){return K(r)&&r.name==="AuthImplicitGrantRedirectError"}class Sv extends ws{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fp extends ws{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Td(r){return K(r)&&r.name==="AuthRetryableFetchError"}class Cv extends ws{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class pp extends ws{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ku="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jv=` 	
\r=`.split(""),CD=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<jv.length;e+=1)r[jv[e].charCodeAt(0)]=-2;for(let e=0;e<ku.length;e+=1)r[ku[e].charCodeAt(0)]=e;return r})();function kv(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ku[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ku[n]),e.queuedBits-=6}}function t_(r,e,t){const n=CD[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Tv(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{TD(o,n,t)};for(let o=0;o<r.length;o+=1)t_(r.charCodeAt(o),s,i);return e.join("")}function jD(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function kD(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}jD(n,e)}}function TD(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if(!(r>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ED(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<r.length;s+=1)t_(r.charCodeAt(s),t,n);return new Uint8Array(e)}function OD(r){const e=[];return kD(r,t=>e.push(t)),new Uint8Array(e)}function ND(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};return r.forEach(s=>kv(s,t,n)),kv(null,t,n),e.join("")}function PD(r){return Math.round(Date.now()/1e3)+r}function DD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const cr=()=>typeof window<"u"&&typeof document<"u",ks={tested:!1,writable:!1},r_=()=>{if(!cr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ks.tested)return ks.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ks.tested=!0,ks.writable=!0}catch{ks.tested=!0,ks.writable=!1}return ks.writable};function AD(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const n_=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>fl(async()=>{const{default:n}=await Promise.resolve().then(()=>Oo);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},MD=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Si=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Ts=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Rn=async(r,e)=>{await r.removeItem(e)};class bh{constructor(){this.promise=new bh.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}bh.promiseConstructor=Promise;function Ed(r){const e=r.split(".");if(e.length!==3)throw new pp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!yD.test(e[n]))throw new pp("JWT not in base64url format");return{header:JSON.parse(Tv(e[0])),payload:JSON.parse(Tv(e[1])),signature:ED(e[2]),raw:{header:e[0],payload:e[1]}}}async function RD(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function LD(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function ID(r){return("0"+r.toString(16)).substr(-2)}function FD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,ID).join("")}async function $D(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function zD(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await $D(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fi(r,e,t=!1){const n=FD();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await Si(r,`${e}-code-verifier`,s);const i=await zD(n);return[i,n===i?"plain":"s256"]}const BD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UD(r){const e=r.headers.get(dp);if(!e||!e.match(BD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function WD(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function VD(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const HD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pi(r){if(!HD.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Od(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ev(r){return JSON.parse(JSON.stringify(r))}var YD=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const Ns=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),GD=[502,503,504];async function Ov(r){var e;if(!MD(r))throw new fp(Ns(r),0);if(GD.includes(r.status))throw new fp(Ns(r),r.status);let t;try{t=await r.json()}catch(i){throw new e_(Ns(i),i)}let n;const s=UD(r);if(s&&s.getTime()>=Zb["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Cv(Ns(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new $n}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Cv(Ns(t),r.status,t.weak_password.reasons);throw new wD(Ns(t),r.status||500,n)}const XD=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function ne(r,e,t,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[dp]||(i[dp]=Zb["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await qD(r,e,t+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function qD(r,e,t,n,s,i){const o=XD(e,n,s,i);let a;try{a=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new fp(Ns(l),0)}if(a.ok||await Ov(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Ov(l)}}function Zr(r){var e;let t=null;ZD(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=PD(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Nv(r){const e=Zr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Hn(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function KD(r){return{data:r,error:null}}function QD(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,o=YD(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function JD(r){return r}function ZD(r){return r.access_token&&r.refresh_token&&r.expires_in}const Nd=["global","local","others"];var eA=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class tA{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=n_(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Nd[0]){if(Nd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nd.join(", ")}`);try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Hn})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=eA(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QD,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(K(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hn})}catch(t){if(K(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:JD});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(m=>{const p=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=p}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(K(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){pi(e);try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hn})}catch(t){if(K(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){pi(e);try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Hn})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){pi(e);try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Hn})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){pi(e.userId);try{const{data:t,error:n}=await ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(K(t))return{data:null,error:t};throw t}}async _deleteFactor(e){pi(e.userId),pi(e.id);try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}}}function Pv(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function rA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const gi={debug:!!(globalThis&&r_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class s_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class nA extends s_{}async function sA(r,e,t){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),gi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new nA(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(gi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}rA();const iA={url:gD,storageKey:mD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dv(r,e,t){return await t()}const mi={};class Ha{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ha.nextInstanceID,Ha.nextInstanceID+=1,this.instanceID>0&&cr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},iA),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new tA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=n_(s.fetch),this.lock=s.lock||Dv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:cr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=sA:this.lock=Dv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:r_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Pv(this.memoryStorage)),cr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=mi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=mi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Jb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=AD(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),cr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),SD(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return K(t)?{error:t}:{error:new e_("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Zr}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:h,password:d,options:f}=e;let g=null,m=null;this.flowType==="pkce"&&([g,m]=await fi(this.storage,this.storageKey)),i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:m},xform:Zr})}else if("phone"in e){const{phone:h,password:d,options:f}=e;i=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Zr})}else throw new Gl("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Nv})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Nv})}else throw new Gl("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Yl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,s,i,o,a,l,c,h,d,f,g;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:y,wallet:v,statement:x,options:w}=e;let _;if(cr())if(typeof v=="object")_=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))_=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const S=new URL((t=w==null?void 0:w.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const C=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),x?{statement:x}:null));let T;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")T=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)T=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),p=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(h=w==null?void 0:w.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const C=await _.signMessage(new TextEncoder().encode(m),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=C}}try{const{data:y,error:v}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ND(p)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Zr});if(v)throw v;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Yl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:v})}catch(y){if(K(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await Ts(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:i,error:o}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Zr});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(K(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:o}=e,a=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Zr}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Yl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await fi(this.storage,this.storageKey));const{error:d}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new Gl("You must provide either an email or phone number.")}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Zr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await fi(this.storage,this.storageKey)),await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:KD})}catch(i){if(K(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new $n;const{error:s}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(K(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await ne(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await ne(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Gl("You must provide either an email or phone number and a type")}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<kd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Ts(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Od()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,h)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hn}):await this._useSession(async t=>{var n,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $n}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Hn})})}catch(t){if(K(t))return _D(t)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new $n;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await fi(this.storage,this.storageKey));const{data:c,error:h}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Hn});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $n;const t=Date.now()/1e3;let n=t,s=!0,i=null;const{payload:o}=Ed(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(K(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new $n;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!cr())throw new Xl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Sv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Sv("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Xl("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(a);let f=h+d;l&&(f=parseInt(l));const g=f-h;g*1e3<=_i&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const m=f-d;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,h);const{data:p,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(n){if(K(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ts(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(bD(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=DD(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await fi(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(K(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(K(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,h;const{data:d,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return cr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(K(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)throw o;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(K(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await LD(async s=>(s>0&&await RD(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Zr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Td(i)&&Date.now()+o-n<_i})}catch(n){if(this._debug(t,"error",n),K(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),cr()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ts(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Ts(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Si(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Od()}else if(s&&!s.user&&!s.user){const o=await Ts(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Rn(this.storage,this.storageKey+"-user"),await Si(this.storage,this.storageKey,s)):s.user=Od()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<kd;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${kd}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Td(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new $n;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new bh;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new $n;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),K(i)){const o={session:null,error:i};return Td(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Si(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=Ev(s);await Si(this.storage,this.storageKey,i)}else{const s=Ev(t);await Si(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Rn(this.storage,this.storageKey),await Rn(this.storage,this.storageKey+"-code-verifier"),await Rn(this.storage,this.storageKey+"-user"),this.userStorage&&await Rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&cr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_i);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/_i);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${_i}ms, refresh threshold is ${hp} ticks`),s<=hp&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof s_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await fi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(K(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(K(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(K(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?{data:null,error:i}:await ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(K(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ed(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+xD>s)return n;const{data:i,error:o}=await ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:g,error:m}=await this.getSession();if(m||!g.session)return{data:null,error:m};n=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Ed(n);t!=null&&t.allowExpired||WD(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!c){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const h=VD(s.alg),d=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,OD(`${a}.${l}`)))throw new pp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}}Ha.nextInstanceID=0;const oA=Ha;class aA extends oA{constructor(e){super(e)}}var lA=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(h){try{c(n.next(h))}catch(d){o(d)}}function l(h){try{c(n.throw(h))}catch(d){o(d)}}function c(h){h.done?i(h.value):s(h.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};class cA{constructor(e,t,n){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=fD(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:iD,realtime:aD,auth:Object.assign(Object.assign({},oD),{storageKey:c}),global:sD},d=pD(n??{},h);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=hD(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new TP(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new tD(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new nP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return lA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aA({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new UP(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uA=(r,e,t)=>new cA(r,e,t);function hA(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const r=process.version.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}hA()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const dA="https://pzjmikqadtrapidwzvkx.supabase.co",fA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB6am1pa3FhZHRyYXBpZHd6dmt4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5OTUxNDUsImV4cCI6MjA2OTU3MTE0NX0.tye56-IeqyzrQ47jDetHKorvII3JqnqrIROO7WeirF0",st=uA(dA,fA,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Xi=[{surname:"ЗАДОРОЖНИЙ",passport:"НС0001",firstName:"Назар",birthDate:"1994-10-18",citizenshipDate:"2014-08-19",passportDate:"2022-07-29",status:"Міністр юстиції",citStatus:"Дійсне",attendance:"2014, 2015, 2016, 2017, 2018, 2019, 2021, 2022, 2023, 2024, 2025",internship:"Непотрібне"},{surname:"ПАХАЛЮК",passport:"НС0002",firstName:"Яна",birthDate:"1994-07-07",citizenshipDate:"2014-08-19",passportDate:"2023-07-14",status:"Міністр культури",citStatus:"Дійсне",attendance:"2014, 2015, 2016, 2017, 2018, 2019, 2020, 2022, 2023, 2024",internship:"Непотрібне"},{surname:"ЗАХАРЯК",passport:"НС0005",firstName:"Андрій",birthDate:"1993-12-13",citizenshipDate:"2014-08-19",passportDate:"2022-07-29",status:"Міністр цифрової трансформації",citStatus:"Дійсне",attendance:"2014, 2015, 2016, 2018, 2019, 2020, 2021, 2022, 2023",internship:"Непотрібне"},{surname:"ПРИШЛЯК",passport:"НС0006",firstName:"Тетяна",birthDate:"1997-10-17",citizenshipDate:"2014-08-19",passportDate:"2022-07-29",status:"Міністр охорони здоров'я",citStatus:"Заморожене",attendance:"2014, 2019, 2021",internship:"Непотрібне"},{surname:"КРАВЦОВ",passport:"НС0007",firstName:"Юрій",birthDate:"1994-03-04",citizenshipDate:"2014-08-19",passportDate:"2022-07-29",status:"Міністр фінансів",citStatus:"Дійсне",attendance:"2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025",internship:"Непотрібне",maritalStatus:"МЙ0006; 2025-07-26"},{surname:"ВОВКІВ",passport:"ВС0004",firstName:"Назарій",birthDate:"1996-09-01",citizenshipDate:"2018-08-18",passportDate:"2022-07-29",status:"Міністр енергетики",citStatus:"Дійсне",attendance:"2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025",internship:"Непотрібне"},{surname:"АНДРУШКО",passport:"ВС0005",firstName:"Віра",birthDate:"1998-09-30",citizenshipDate:"2018-08-18",passportDate:"2022-07-29",status:"Бібліотекарка",citStatus:"Дійсне",attendance:"2016, 2018, 2019, 2020, 2021, 2022, 2023",internship:"Непотрібне"},{surname:"БОКАЛО",passport:"ЛБ0001",firstName:"Юрій",birthDate:"1994-05-05",citizenshipDate:"2019-08-16",passportDate:"2022-07-29",status:"Міністр господарства",citStatus:"Дійсне",attendance:"2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025",internship:"Непотрібне",maritalStatus:"ЛБ0002; 2021-07-23"},{surname:"БОКАЛО",passport:"ЛБ0002",firstName:"Іра",birthDate:"1994-04-08",citizenshipDate:"2019-08-16",passportDate:"2022-07-29",status:"Міністр брендингу",citStatus:"Дійсне",attendance:"2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025",internship:"Непотрібне",maritalStatus:"ЛБ0001; 2021-07-23"},{surname:"КОВАЛЬЧУК",passport:"МЙ0002",firstName:"Віталій",birthDate:"1992-10-12",citizenshipDate:"2022-07-29",passportDate:"2022-07-29",status:"Міністр закордонних справ",citStatus:"Заморожене",attendance:"2021, 2022",internship:"2021, Охорони здоров'я, НС0006"},{surname:"НИЖНИК",passport:"МЙ0003",firstName:"Наталія",birthDate:"1996-10-04",citizenshipDate:"2022-07-29",passportDate:"2022-07-29",status:"Заступниця міністра господарства",citStatus:"Дійсне",attendance:"2021, 2022, 2023, 2024, 2025",internship:"2021, Господарства, ЛБ0001"},{surname:"ГНАТКІВ",passport:"МЙ0004",firstName:"Богдан",birthDate:"1997-03-30",citizenshipDate:"2022-07-29",passportDate:"2022-07-29",status:"Міністр благоустрою та охорони довкілля",citStatus:"Дійсне",attendance:"2021, 2022, 2023, 2024, 2025",internship:"2021, Енергетики, ВС0004"},{surname:"ПАХАЛЮК",passport:"МЙ0005",firstName:"Вадим",birthDate:"1995-01-27",citizenshipDate:"2023-07-14",passportDate:"2023-07-14",status:"Заступник міністра культури",citStatus:"Дійсне",attendance:"2022, 2023",internship:"2022, Енергетики, ВС0004"},{surname:"ЛІЩУК",passport:"МЙ0006",firstName:"Аліна",birthDate:"2002-02-18",citizenshipDate:"2023-07-14",passportDate:"2023-07-14",status:"Заступниця міністра енергетики",citStatus:"Дійсне",attendance:"2022, 2023, 2024, 2025",internship:"2022, Брендингу, ЛБ0002",maritalStatus:"НС0007; 2025-07-26"},{surname:"ГУК",passport:"МЙ0007",firstName:"Олександр",birthDate:"1992-12-29",citizenshipDate:"2023-07-14",passportDate:"2023-07-14",status:"В.о. міністра охорони здоров’я",citStatus:"Дійсне",attendance:"2022, 2023",internship:"2022, Юстиції, НС0001"},{surname:"ЙОЖИК",passport:"МЙ0008",firstName:"Максим",birthDate:"1995-09-23",citizenshipDate:"2023-07-14",passportDate:"2023-07-14",status:"Міністр Татишо",citStatus:"Дійсне",attendance:"2022, 2023, 2024, 2025",internship:"2022, Культури, НС0002"},{surname:"ТЕРЛЕЦЬКА",passport:"МЙ0009",firstName:"Вікторія",birthDate:"1996-11-19",citizenshipDate:"2023-07-14",passportDate:"2023-07-14",status:"Заступниця міністра господарства",citStatus:"Дійсне",attendance:"2022, 2023, 2024",internship:"2022, Бібліотека, ВС0005"},{surname:"ГАРБОВСЬКА",passport:"МЙ0010",firstName:"Оксана",birthDate:"1999-02-06",citizenshipDate:"2023-07-14",passportDate:"2023-07-14",status:"Заступниця міністра брендингу",citStatus:"Дійсне",attendance:"2022, 2023, 2024, 2025",internship:"2022, Брендингу, ЛБ0002"},{surname:"КРИВАНЧИК",passport:"МЙ0012",firstName:"Наталія",birthDate:"2003-06-10",citizenshipDate:"2024-07-19",passportDate:"2024-07-19",status:"Заступниця міністра цифрової трансформації",citStatus:"Дійсне",attendance:"2023, 2024",internship:"2023, Культури, НС0002"},{surname:"МАТКІВСЬКА",passport:"МЙ0013",firstName:"Марічка",birthDate:"1998-01-18",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"Заступниця міністра юстиції",citStatus:"Дійсне",attendance:"2022, 2025",internship:"2022, Юстиції, НС0001"},{surname:"ПАГУТА",passport:"МЙ0014",firstName:"Богдан",birthDate:"1999-01-23",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"Заступник міністра юстиції",citStatus:"Дійсне",attendance:"2023, 2025",internship:"2023, Юстиції, НС0001"},{surname:"СОПОТНИЦЬКА",passport:"МЙ0016",firstName:"Ольга",birthDate:"2003-07-16",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"???",citStatus:"Дійсне",attendance:"2024, 2025",internship:"2024, Охорони довкілля, МЙ0004"},{surname:"ХОРОШУЛІНА",passport:"МЙ0017",firstName:"Світлана",birthDate:"1991-07-18",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"???",citStatus:"Дійсне",attendance:"2024, 2025",internship:"2024, Брендингу, ЛБ0002"},{surname:"ПЕТРУК",passport:"МЙ0018",firstName:"Світлана",birthDate:"1987-01-26",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"Заступниця міністра фінансів",citStatus:"Дійсне",attendance:"2024, 2025",internship:"2024, Фінансів, НС0007"},{surname:"ПАСТУШЕНКО",passport:"МЙ0019",firstName:"Андрій",birthDate:"1983-04-20",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"Заступник міністра енергетики",citStatus:"Дійсне",attendance:"2024, 2025",internship:"2024, Енергетики, ВС0004"},{surname:"ЛАЦИНА",passport:"МЙ0020",firstName:"Анна",birthDate:"1996-12-15",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"???",citStatus:"Дійсне",attendance:"2024, 2025",internship:"2024, Господарства, ЛБ0001"},{surname:"МИХАЙЛЮК",passport:"МЙ0021",firstName:"Христина",birthDate:"1990-05-20",citizenshipDate:"2025-07-25",passportDate:"2025-07-25",status:"Секретарка міністра юстиції",citStatus:"Дійсне",attendance:"2024, 2025",internship:"2024, Юстиції, НС0001"},{surname:"СЕРІКОВА",passport:"МЙ0004А",firstName:"Маргарита",birthDate:"1996-04-16",citizenshipDate:"2023-07-14",passportDate:"2023-07-14",status:"Заступниця міністра культури",citStatus:"Дійсне",attendance:"2022, 2023",internship:"2022, Охорони довкілля, МЙ0004"}],pA=[{surname:"ЗАТВАРСЬКИЙ",firstName:"Тарас",birthDate:"1994-11-23",status:"---",citStatus:"Недійсне",attendance:"2014"},{surname:"КІНДРАТІВ",firstName:"Наталія",birthDate:"1997-08-17",status:"Міністр ЗМІ",citStatus:"Заморожене",attendance:"2014, 2019, 2021"},{surname:"НЕВІДОМО",firstName:"Іванка",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2015, 2016"},{surname:"ЗАЛОКОЦЬКА",firstName:"Христина",birthDate:"1994-04-13",status:"---",citStatus:"Недійсне",attendance:"2015"},{surname:"ВОЙЦЕШИН",firstName:"Василь",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2016"},{surname:"НЕВІДОМО",firstName:"Марія",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2016"},{surname:"ЦУРА",firstName:"Соломія",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2017"},{surname:"ГНАТКІВ",firstName:"Дмитро",birthDate:"1900-01-13",status:"Керівник управління флоту",citStatus:"Заморожене",attendance:"2017, 2018, 2019, 2020, 2021"},{surname:"КОСТИК",firstName:"Галя",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2017, 2018"},{surname:"СМОРОДІН",firstName:"Валентин",birthDate:"1900-01-01",status:"Державний психолог",citStatus:"Довічне",attendance:"2019, 2021"},{surname:"САГАТЮК",firstName:"Олександр",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2021"},{surname:"ГОНЧАРОВ",firstName:"Олександр",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2021",internship:"2021, Управління флоту"},{surname:"ЯРЧУК",firstName:"Марія",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2023",internship:"2023, Охорони здоров'я, МЙ0007"},{surname:"КОВАЛЬЧУК",firstName:"Михайло",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2023",internship:"2023, Охорони здоров'я, МЙ0007"},{surname:"ПАХАЛЮК",firstName:"Олег",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2023",internship:"2023, Охорони довкілля, МЙ0004"},{surname:"ЛЮТИК",firstName:"Ігор",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2024",internship:"2024, Культури, НС0002"},{surname:"ПОХОДЖАЙ",firstName:"Марта",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2024",internship:"2024, Брендингу, ЛБ0002"},{surname:"ЯГОЦЬКИЙ",firstName:"Данило",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2024",internship:"2024, Юстиції, НС0001"},{surname:"ПЛЯЦКО",firstName:"Марта",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2024",internship:"2024, Господарства, ЛБ0001"},{surname:"ПЛЯЦКО",firstName:"Андрій",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2024",internship:"2024, Енергетики, ВС0004"},{surname:"КОНИК",firstName:"Захар",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2024",internship:"2024, Культури, НС0002"},{surname:"НЕДЯЛКІНА",firstName:"Дарина",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2024",internship:"2024, Культури, НС0002"},{surname:"БАНДРІВСЬКИЙ",firstName:"Павло",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2025",internship:"2025, Господарства, ЛБ0001"},{surname:"МИКИТИН",firstName:"Вероніка",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2025",internship:"2025, Юстиції, НС0001"},{surname:"РУДИК",firstName:"Вікторія",birthDate:"1900-01-01",status:"---",citStatus:"Недійсне",attendance:"2025",internship:"2025, Охорони довкілля, МЙ0004"}],i_=[...Xi,...pA],o_=(r,e)=>Xi.find(t=>t.surname.toLowerCase()===r.toLowerCase().trim()&&t.passport===e.trim()),gA=(r,e)=>Xi.some(t=>t.surname.toLowerCase()===r.toLowerCase().trim()&&t.passport===e.trim()),a_=b.createContext(void 0),Xr=()=>{const r=b.useContext(a_);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},mA=({children:r})=>{const[e,t]=b.useState(null),[n,s]=b.useState(null),[i,o]=b.useState(!0);b.useEffect(()=>{const{data:{subscription:d}}=st.auth.onAuthStateChange(async(f,g)=>{t((g==null?void 0:g.user)??null),g!=null&&g.user?setTimeout(()=>{a(g.user.id)},0):(s(null),o(!1))});return st.auth.getSession().then(({data:{session:f}})=>{t((f==null?void 0:f.user)??null),f!=null&&f.user&&a(f.user.id)}),()=>d.unsubscribe()},[]);const a=async d=>{try{const{data:f,error:g}=await st.from("user_profiles").select("*").eq("user_id",d).single();if(g&&g.code!=="PGRST116"){console.error("Error loading user profile:",g),o(!1);return}s(f),o(!1)}catch(f){console.error("Error in loadUserProfile:",f),o(!1)}},h={user:e,userProfile:n,loading:i,signIn:async(d,f)=>{try{if(!gA(d,f))return{success:!1,error:"Неправильні дані або паспорт недійсний."};const g={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"c",ч:"ch",ш:"sh",щ:"sch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya"},m=f.toLowerCase().split("").map(E=>g[E]||E).join("").replace(/[^a-z0-9]/g,"");let p="",y=0,v=`user${m}@gmail.com`;const x=new Set;for(;y<10;){const E=y===0?`user${m}@gmail.com`:`user${m}${y}@gmail.com`,{error:D}=await st.auth.signInWithPassword({email:E,password:"TestPassword123!"});if(D&&D.message.includes("Invalid login credentials")){y++;continue}else{v=E;break}}const w="Password123!";console.log("Auth attempt:",{originalSurname:d,originalPassport:f,generatedEmail:v,passportForEmail:m});const{data:_,error:S}=await st.auth.signInWithPassword({email:v,password:w});if(!S&&_)return console.log("Sign in successful:",_),{success:!0};console.log("Sign in failed, creating new account...");const{data:C,error:T}=await st.auth.signUp({email:v,password:w});if(console.log("Sign up result:",{signUpData:C,signUpError:T}),T)return console.error("Sign up error:",T),{success:!1,error:`Помилка створення акаунту: ${T.message}`};if(C.user){const{error:E}=await st.from("user_profiles").insert([{user_id:C.user.id,surname:d.toUpperCase(),passport:f.toUpperCase()}]);E&&console.error("Error creating profile:",E)}return{success:!0}}catch(g){return console.error("Sign in error:",g),{success:!1,error:"Помилка входу в систему"}}},signOut:async()=>{try{await st.auth.signOut()}catch(d){console.error("Sign out error:",d)}},isAuthenticated:!!e};return u.jsx(a_.Provider,{value:h,children:r})},Qo=({children:r})=>{const{isAuthenticated:e,loading:t}=Xr();return t?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx($k,{className:"mx-auto h-8 w-8 animate-spin text-primary"}),u.jsx("p",{className:"mt-2 text-muted-foreground",children:"Перевірка авторизації..."})]})}):e?u.jsx(u.Fragment,{children:r}):u.jsx(YN,{to:"/auth",replace:!0})},vA=cl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-festival-yellow text-festival-blue font-semibold hover:bg-festival-yellow-light transform hover:scale-105 shadow-lg hover:shadow-xl","hero-outline":"border-2 border-festival-yellow text-festival-yellow bg-transparent hover:bg-festival-yellow hover:text-festival-blue font-semibold transform hover:scale-105"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=b.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...s},i)=>{const o=n?mo:"button";return u.jsx(o,{className:ve(vA({variant:e,size:t,className:r})),ref:i,...s})});q.displayName="Button";var Pd="focusScope.autoFocusOnMount",Dd="focusScope.autoFocusOnUnmount",Av={bubbles:!1,cancelable:!0},yA="FocusScope",l_=b.forwardRef((r,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=r,[a,l]=b.useState(null),c=sr(s),h=sr(i),d=b.useRef(null),f=pt(e,p=>l(p)),g=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(n){let p=function(w){if(g.paused||!a)return;const _=w.target;a.contains(_)?d.current=_:zn(d.current,{select:!0})},y=function(w){if(g.paused||!a)return;const _=w.relatedTarget;_!==null&&(a.contains(_)||zn(d.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&zn(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),x.disconnect()}}},[n,a,g.paused]),b.useEffect(()=>{if(a){Rv.add(g);const p=document.activeElement;if(!a.contains(p)){const v=new CustomEvent(Pd,Av);a.addEventListener(Pd,c),a.dispatchEvent(v),v.defaultPrevented||(xA(CA(c_(a)),{select:!0}),document.activeElement===p&&zn(a))}return()=>{a.removeEventListener(Pd,c),setTimeout(()=>{const v=new CustomEvent(Dd,Av);a.addEventListener(Dd,h),a.dispatchEvent(v),v.defaultPrevented||zn(p??document.body,{select:!0}),a.removeEventListener(Dd,h),Rv.remove(g)},0)}}},[a,c,h,g]);const m=b.useCallback(p=>{if(!t&&!n||g.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,v=document.activeElement;if(y&&v){const x=p.currentTarget,[w,_]=wA(x);w&&_?!p.shiftKey&&v===_?(p.preventDefault(),t&&zn(w,{select:!0})):p.shiftKey&&v===w&&(p.preventDefault(),t&&zn(_,{select:!0})):v===x&&p.preventDefault()}},[t,n,g.paused]);return u.jsx(Me.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});l_.displayName=yA;function xA(r,{select:e=!1}={}){const t=document.activeElement;for(const n of r)if(zn(n,{select:e}),document.activeElement!==t)return}function wA(r){const e=c_(r),t=Mv(e,r),n=Mv(e.reverse(),r);return[t,n]}function c_(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Mv(r,e){for(const t of r)if(!bA(t,{upTo:e}))return t}function bA(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function _A(r){return r instanceof HTMLInputElement&&"select"in r}function zn(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&_A(r)&&e&&r.select()}}var Rv=SA();function SA(){let r=[];return{add(e){const t=r[0];e!==t&&(t==null||t.pause()),r=Lv(r,e),r.unshift(e)},remove(e){var t;r=Lv(r,e),(t=r[0])==null||t.resume()}}}function Lv(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function CA(r){return r.filter(e=>e.tagName!=="A")}var Ad=0;function jA(){b.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Iv()),document.body.insertAdjacentElement("beforeend",r[1]??Iv()),Ad++,()=>{Ad===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ad--}},[])}function Iv(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var $r=function(){return $r=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$r.apply(this,arguments)};function u_(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function kA(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}var zc="right-scroll-bar-position",Bc="width-before-scroll-bar",TA="with-scroll-bars-hidden",EA="--removed-body-scroll-bar-size";function Md(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function OA(r,e){var t=b.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var NA=typeof window<"u"?b.useLayoutEffect:b.useEffect,Fv=new WeakMap;function PA(r,e){var t=OA(null,function(n){return r.forEach(function(s){return Md(s,n)})});return NA(function(){var n=Fv.get(t);if(n){var s=new Set(n),i=new Set(r),o=t.current;s.forEach(function(a){i.has(a)||Md(a,null)}),i.forEach(function(a){s.has(a)||Md(a,o)})}Fv.set(t,r)},[r]),t}function DA(r){return r}function AA(r,e){e===void 0&&(e=DA);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(i){var o=e(i,n);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(a){return i(a)},filter:function(){return t}}},assignMedium:function(i){n=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(i),o=t}var l=function(){var h=o;o=[],h.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(h){o.push(h),c()},filter:function(h){return o=o.filter(h),t}}}};return s}function MA(r){r===void 0&&(r={});var e=AA(null);return e.options=$r({async:!0,ssr:!1},r),e}var h_=function(r){var e=r.sideCar,t=u_(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return b.createElement(n,$r({},t))};h_.isSideCarExport=!0;function RA(r,e){return r.useMedium(e),h_}var d_=MA(),Rd=function(){},_h=b.forwardRef(function(r,e){var t=b.useRef(null),n=b.useState({onScrollCapture:Rd,onWheelCapture:Rd,onTouchMoveCapture:Rd}),s=n[0],i=n[1],o=r.forwardProps,a=r.children,l=r.className,c=r.removeScrollBar,h=r.enabled,d=r.shards,f=r.sideCar,g=r.noIsolation,m=r.inert,p=r.allowPinchZoom,y=r.as,v=y===void 0?"div":y,x=r.gapMode,w=u_(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,S=PA([t,e]),C=$r($r({},w),s);return b.createElement(b.Fragment,null,h&&b.createElement(_,{sideCar:d_,removeScrollBar:c,shards:d,noIsolation:g,inert:m,setCallbacks:i,allowPinchZoom:!!p,lockRef:t,gapMode:x}),o?b.cloneElement(b.Children.only(a),$r($r({},C),{ref:S})):b.createElement(v,$r({},C,{className:l,ref:S}),a))});_h.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_h.classNames={fullWidth:Bc,zeroRight:zc};var LA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function IA(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=LA();return e&&r.setAttribute("nonce",e),r}function FA(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function $A(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var zA=function(){var r=0,e=null;return{add:function(t){r==0&&(e=IA())&&(FA(e,t),$A(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},BA=function(){var r=zA();return function(e,t){b.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},f_=function(){var r=BA(),e=function(t){var n=t.styles,s=t.dynamic;return r(n,s),null};return e},UA={left:0,top:0,right:0,gap:0},Ld=function(r){return parseInt(r||"",10)||0},WA=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],n=e[r==="padding"?"paddingTop":"marginTop"],s=e[r==="padding"?"paddingRight":"marginRight"];return[Ld(t),Ld(n),Ld(s)]},VA=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return UA;var e=WA(r),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},HA=f_(),qi="data-scroll-locked",YA=function(r,e,t,n){var s=r.left,i=r.top,o=r.right,a=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(TA,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(qi,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zc,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Bc,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(zc," .").concat(zc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Bc," .").concat(Bc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(qi,`] {
    `).concat(EA,": ").concat(a,`px;
  }
`)},$v=function(){var r=parseInt(document.body.getAttribute(qi)||"0",10);return isFinite(r)?r:0},GA=function(){b.useEffect(function(){return document.body.setAttribute(qi,($v()+1).toString()),function(){var r=$v()-1;r<=0?document.body.removeAttribute(qi):document.body.setAttribute(qi,r.toString())}},[])},XA=function(r){var e=r.noRelative,t=r.noImportant,n=r.gapMode,s=n===void 0?"margin":n;GA();var i=b.useMemo(function(){return VA(s)},[s]);return b.createElement(HA,{styles:YA(i,!e,s,t?"":"!important")})},gp=!1;if(typeof window<"u")try{var ql=Object.defineProperty({},"passive",{get:function(){return gp=!0,!0}});window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{gp=!1}var vi=gp?{passive:!1}:!1,qA=function(r){return r.tagName==="TEXTAREA"},p_=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!qA(r)&&t[e]==="visible")},KA=function(r){return p_(r,"overflowY")},QA=function(r){return p_(r,"overflowX")},zv=function(r,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=g_(r,n);if(s){var i=m_(r,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},JA=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},ZA=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},g_=function(r,e){return r==="v"?KA(e):QA(e)},m_=function(r,e){return r==="v"?JA(e):ZA(e)},eM=function(r,e){return r==="h"&&e==="rtl"?-1:1},tM=function(r,e,t,n,s){var i=eM(r,window.getComputedStyle(e).direction),o=i*n,a=t.target,l=e.contains(a),c=!1,h=o>0,d=0,f=0;do{var g=m_(r,a),m=g[0],p=g[1],y=g[2],v=p-y-i*m;(m||v)&&g_(r,a)&&(d+=v,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(h&&(Math.abs(d)<1||!s)||!h&&(Math.abs(f)<1||!s))&&(c=!0),c},Kl=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},Bv=function(r){return[r.deltaX,r.deltaY]},Uv=function(r){return r&&"current"in r?r.current:r},rM=function(r,e){return r[0]===e[0]&&r[1]===e[1]},nM=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},sM=0,yi=[];function iM(r){var e=b.useRef([]),t=b.useRef([0,0]),n=b.useRef(),s=b.useState(sM++)[0],i=b.useState(f_)[0],o=b.useRef(r);b.useEffect(function(){o.current=r},[r]),b.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(s));var p=kA([r.lockRef.current],(r.shards||[]).map(Uv),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[r.inert,r.lockRef.current,r.shards]);var a=b.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var v=Kl(p),x=t.current,w="deltaX"in p?p.deltaX:x[0]-v[0],_="deltaY"in p?p.deltaY:x[1]-v[1],S,C=p.target,T=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in p&&T==="h"&&C.type==="range")return!1;var E=zv(T,C);if(!E)return!0;if(E?S=T:(S=T==="v"?"h":"v",E=zv(T,C)),!E)return!1;if(!n.current&&"changedTouches"in p&&(w||_)&&(n.current=S),!S)return!0;var D=n.current||S;return tM(D,y,p,D==="h"?w:_,!0)},[]),l=b.useCallback(function(p){var y=p;if(!(!yi.length||yi[yi.length-1]!==i)){var v="deltaY"in y?Bv(y):Kl(y),x=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&rM(S.delta,v)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(Uv).filter(Boolean).filter(function(S){return S.contains(y.target)}),_=w.length>0?a(y,w[0]):!o.current.noIsolation;_&&y.cancelable&&y.preventDefault()}}},[]),c=b.useCallback(function(p,y,v,x){var w={name:p,delta:y,target:v,should:x,shadowParent:oM(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(_){return _!==w})},1)},[]),h=b.useCallback(function(p){t.current=Kl(p),n.current=void 0},[]),d=b.useCallback(function(p){c(p.type,Bv(p),p.target,a(p,r.lockRef.current))},[]),f=b.useCallback(function(p){c(p.type,Kl(p),p.target,a(p,r.lockRef.current))},[]);b.useEffect(function(){return yi.push(i),r.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,vi),document.addEventListener("touchmove",l,vi),document.addEventListener("touchstart",h,vi),function(){yi=yi.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,vi),document.removeEventListener("touchmove",l,vi),document.removeEventListener("touchstart",h,vi)}},[]);var g=r.removeScrollBar,m=r.inert;return b.createElement(b.Fragment,null,m?b.createElement(i,{styles:nM(s)}):null,g?b.createElement(XA,{gapMode:r.gapMode}):null)}function oM(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const aM=RA(d_,iM);var v_=b.forwardRef(function(r,e){return b.createElement(_h,$r({},r,{ref:e,sideCar:aM}))});v_.classNames=_h.classNames;var lM=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},xi=new WeakMap,Ql=new WeakMap,Jl={},Id=0,y_=function(r){return r&&(r.host||y_(r.parentNode))},cM=function(r,e){return e.map(function(t){if(r.contains(t))return t;var n=y_(t);return n&&r.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},uM=function(r,e,t,n){var s=cM(e,Array.isArray(r)?r:[r]);Jl[t]||(Jl[t]=new WeakMap);var i=Jl[t],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var h=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))h(f);else try{var g=f.getAttribute(n),m=g!==null&&g!=="false",p=(xi.get(f)||0)+1,y=(i.get(f)||0)+1;xi.set(f,p),i.set(f,y),o.push(f),p===1&&m&&Ql.set(f,!0),y===1&&f.setAttribute(t,"true"),m||f.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return h(e),a.clear(),Id++,function(){o.forEach(function(d){var f=xi.get(d)-1,g=i.get(d)-1;xi.set(d,f),i.set(d,g),f||(Ql.has(d)||d.removeAttribute(n),Ql.delete(d)),g||d.removeAttribute(t)}),Id--,Id||(xi=new WeakMap,xi=new WeakMap,Ql=new WeakMap,Jl={})}},hM=function(r,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(r)?r:[r]),s=lM(r);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),uM(n,s,t,"aria-hidden")):function(){return null}},Xg="Dialog",[x_,gI]=jg(Xg),[dM,Er]=x_(Xg),w_=r=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=r,a=b.useRef(null),l=b.useRef(null),[c=!1,h]=o1({prop:n,defaultProp:s,onChange:i});return u.jsx(dM,{scope:e,triggerRef:a,contentRef:l,contentId:xd(),titleId:xd(),descriptionId:xd(),open:c,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(d=>!d),[h]),modal:o,children:t})};w_.displayName=Xg;var b_="DialogTrigger",__=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Er(b_,t),i=pt(e,s.triggerRef);return u.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Qg(s.open),...n,ref:i,onClick:Se(r.onClick,s.onOpenToggle)})});__.displayName=b_;var qg="DialogPortal",[fM,S_]=x_(qg,{forceMount:void 0}),C_=r=>{const{__scopeDialog:e,forceMount:t,children:n,container:s}=r,i=Er(qg,e);return u.jsx(fM,{scope:e,forceMount:t,children:b.Children.map(n,o=>u.jsx(Co,{present:t||i.open,children:u.jsx(kg,{asChild:!0,container:s,children:o})}))})};C_.displayName=qg;var Tu="DialogOverlay",j_=b.forwardRef((r,e)=>{const t=S_(Tu,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,i=Er(Tu,r.__scopeDialog);return i.modal?u.jsx(Co,{present:n||i.open,children:u.jsx(pM,{...s,ref:e})}):null});j_.displayName=Tu;var pM=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Er(Tu,t);return u.jsx(v_,{as:mo,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(Me.div,{"data-state":Qg(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Zs="DialogContent",k_=b.forwardRef((r,e)=>{const t=S_(Zs,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,i=Er(Zs,r.__scopeDialog);return u.jsx(Co,{present:n||i.open,children:i.modal?u.jsx(gM,{...s,ref:e}):u.jsx(mM,{...s,ref:e})})});k_.displayName=Zs;var gM=b.forwardRef((r,e)=>{const t=Er(Zs,r.__scopeDialog),n=b.useRef(null),s=pt(e,t.contentRef,n);return b.useEffect(()=>{const i=n.current;if(i)return hM(i)},[]),u.jsx(T_,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(r.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Se(r.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Se(r.onFocusOutside,i=>i.preventDefault())})}),mM=b.forwardRef((r,e)=>{const t=Er(Zs,r.__scopeDialog),n=b.useRef(!1),s=b.useRef(!1);return u.jsx(T_,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=r.onCloseAutoFocus)==null||o.call(r,i),i.defaultPrevented||(n.current||(a=t.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=r.onInteractOutside)==null||l.call(r,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),T_=b.forwardRef((r,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=r,a=Er(Zs,t),l=b.useRef(null),c=pt(e,l);return jA(),u.jsxs(u.Fragment,{children:[u.jsx(l_,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(th,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Qg(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(vM,{titleId:a.titleId}),u.jsx(xM,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Kg="DialogTitle",E_=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Er(Kg,t);return u.jsx(Me.h2,{id:s.titleId,...n,ref:e})});E_.displayName=Kg;var O_="DialogDescription",N_=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Er(O_,t);return u.jsx(Me.p,{id:s.descriptionId,...n,ref:e})});N_.displayName=O_;var P_="DialogClose",D_=b.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Er(P_,t);return u.jsx(Me.button,{type:"button",...n,ref:e,onClick:Se(r.onClick,()=>s.onOpenChange(!1))})});D_.displayName=P_;function Qg(r){return r?"open":"closed"}var A_="DialogTitleWarning",[mI,M_]=Wj(A_,{contentName:Zs,titleName:Kg,docsSlug:"dialog"}),vM=({titleId:r})=>{const e=M_(A_),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{r&&(document.getElementById(r)||console.error(t))},[t,r]),null},yM="DialogDescriptionWarning",xM=({contentRef:r,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${M_(yM).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=r.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,r,e]),null},R_=w_,L_=__,I_=C_,Sh=j_,Ch=k_,jh=E_,kh=N_,F_=D_;const wM=R_,bM=L_,_M=I_,$_=b.forwardRef(({className:r,...e},t)=>u.jsx(Sh,{className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e,ref:t}));$_.displayName=Sh.displayName;const SM=cl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),z_=b.forwardRef(({side:r="right",className:e,children:t,...n},s)=>u.jsxs(_M,{children:[u.jsx($_,{}),u.jsxs(Ch,{ref:s,className:ve(SM({side:r}),e),...n,children:[t,u.jsxs(F_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[u.jsx(ih,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));z_.displayName=Ch.displayName;const CM=b.forwardRef(({className:r,...e},t)=>u.jsx(jh,{ref:t,className:ve("text-lg font-semibold text-foreground",r),...e}));CM.displayName=jh.displayName;const jM=b.forwardRef(({className:r,...e},t)=>u.jsx(kh,{ref:t,className:ve("text-sm text-muted-foreground",r),...e}));jM.displayName=kh.displayName;const kM="/assets/coat-of-arms-wyCvbYJx.png",TM=()=>{const[r,e]=b.useState(!1),[t,n]=b.useState(!1),s=[{label:"Про Республіку",id:"about"},{label:"Наступний Фестиваль",id:"next-festival"},{label:"Конституція",id:"constitution"},{label:"Міністерства",id:"ministries"},{label:"Державні символи",id:"symbols"},{label:"Галерея",id:"gallery"}];b.useEffect(()=>{const a=()=>{e(window.scrollY>100)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]);const i=a=>{const l=document.getElementById(a);l==null||l.scrollIntoView({behavior:"smooth"}),n(!1)},o=()=>{window.scrollTo({top:0,behavior:"smooth"})};return u.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${r?"bg-white/95 backdrop-blur-md shadow-lg":"bg-transparent"}`,children:u.jsx("div",{className:"container mx-auto px-4 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("button",{onClick:o,className:`flex items-center gap-3 text-2xl font-bold transition-colors duration-300 ${r?"text-festival-blue":"text-white"}`,children:[u.jsx("img",{src:kM,alt:"Республіка Вейву логотип",className:"w-10 h-10 object-contain"}),"Республіка Вейву"]}),u.jsx("div",{className:"hidden md:flex space-x-6",children:s.map(a=>u.jsx(q,{variant:"ghost",onClick:()=>i(a.id),className:`transition-colors duration-300 ${r?"text-festival-blue hover:text-festival-yellow":"text-white hover:text-festival-yellow"}`,children:a.label},a.id))}),u.jsx("div",{className:"md:hidden",children:u.jsxs(wM,{open:t,onOpenChange:n,children:[u.jsx(bM,{asChild:!0,children:u.jsx(q,{variant:"ghost",size:"icon",className:`transition-colors duration-300 ${r?"text-festival-blue":"text-white"}`,children:u.jsx(Bk,{className:"h-6 w-6"})})}),u.jsx(z_,{side:"right",className:"w-64 bg-white",children:u.jsx("div",{className:"flex flex-col space-y-4 mt-8",children:s.map(a=>u.jsx(q,{variant:"ghost",onClick:()=>i(a.id),className:"justify-start text-festival-blue hover:text-festival-yellow hover:bg-festival-blue/10",children:a.label},a.id))})})]})})]})})})},EM="/assets/hero-festival-BlpxlDzE.jpg",OM="/assets/hero-emblem-COj5053g.png",NM=()=>{const[r,e]=b.useState(!1),[t,n]=b.useState([]),s=o=>{const a=document.getElementById(o);a==null||a.scrollIntoView({behavior:"smooth"})},i=o=>{const a=o.currentTarget.getBoundingClientRect(),l=a.width/2,c=a.height/2,h=Array.from({length:16},(d,f)=>{const g=f/16*Math.PI*2,m=30+Math.random()*20;return{id:Date.now()+f,x:l+Math.cos(g)*m,y:c+Math.sin(g)*m,dirX:Math.cos(g),dirY:Math.sin(g)}});n(h),e(!0),setTimeout(()=>{e(!1),n([])},1500)};return u.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${EM})`}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-festival-blue/70 via-festival-blue/50 to-festival-blue/70"}),u.jsxs("div",{className:"relative z-10 text-center px-4 max-w-4xl mx-auto",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:`relative mx-auto mb-6 w-64 h-64 md:w-[420px] md:h-[420px] lg:w-[480px] lg:h-[480px] xl:w-[540px] xl:h-[540px] group cursor-pointer ${r?"animate-pulse":""}`,onClick:i,children:[r&&u.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[u.jsx("div",{className:"absolute inset-0 bg-festival-yellow/20 rounded-full animate-ping"}),u.jsx("div",{className:"absolute inset-4 bg-festival-yellow/10 rounded-full animate-ping",style:{animationDelay:"0.2s"}}),u.jsx("div",{className:"absolute inset-8 bg-white/20 rounded-full animate-ping",style:{animationDelay:"0.4s"}})]}),t.map(o=>u.jsx("div",{className:"absolute w-3 h-3 bg-festival-yellow rounded-full pointer-events-none",style:{left:`${o.x}px`,top:`${o.y}px`,animation:"particle-burst 1.5s ease-out forwards"}},o.id)),u.jsx("div",{className:`absolute inset-0 bg-gradient-radial from-white/15 via-white/5 to-transparent rounded-full blur-2xl scale-125 opacity-50 group-hover:opacity-70 group-hover:scale-140 transition-all duration-1000 ${r?"opacity-90 scale-150":""}`}),u.jsxs("div",{className:`relative w-full h-full transition-all duration-500 ${r?"scale-110 rotate-12":""}`,children:[u.jsx("img",{src:OM,alt:"Емблема Республіки Вейву",className:`w-full h-full mx-auto filter drop-shadow-lg group-hover:drop-shadow-2xl group-hover:scale-105 transition-all duration-700 ease-out rounded-full object-cover hue-rotate-15 saturate-150 ${r?"brightness-125 saturate-200":""}`,style:{maskImage:"radial-gradient(circle at center, black 40%, rgba(0,0,0,0.9) 60%, rgba(0,0,0,0.6) 75%, rgba(0,0,0,0.2) 85%, transparent 95%)",WebkitMaskImage:"radial-gradient(circle at center, black 40%, rgba(0,0,0,0.9) 60%, rgba(0,0,0,0.6) 75%, rgba(0,0,0,0.2) 85%, transparent 95%)"}}),u.jsxs("div",{className:"absolute inset-0 rounded-full",children:[u.jsx("div",{className:`absolute top-1/4 left-1/4 w-2 h-2 bg-white/30 rounded-full animate-pulse ${r?"bg-festival-yellow/70 scale-150":""}`,style:{animationDelay:"0s",animationDuration:"3s"}}),u.jsx("div",{className:`absolute top-1/3 right-1/4 w-1 h-1 bg-white/40 rounded-full animate-pulse ${r?"bg-festival-yellow/60 scale-200":""}`,style:{animationDelay:"1s",animationDuration:"4s"}}),u.jsx("div",{className:`absolute bottom-1/3 left-1/3 w-1.5 h-1.5 bg-white/20 rounded-full animate-pulse ${r?"bg-festival-yellow/50 scale-150":""}`,style:{animationDelay:"2s",animationDuration:"5s"}})]})]})]})}),u.jsx("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-8 drop-shadow-lg",children:"Республіка Вейву"}),u.jsx("p",{className:"text-xl md:text-2xl text-festival-yellow mb-12 drop-shadow-md font-medium",children:"Територія твоєї свободи"}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-center",children:[u.jsx(q,{variant:"hero",size:"lg",onClick:()=>s("about"),className:"text-lg px-8 py-4 min-w-[200px]",children:"Про Вейву"}),u.jsx(q,{variant:"hero-outline",size:"lg",onClick:()=>s("next-festival"),className:"text-lg px-8 py-4 min-w-[200px]",children:"Наступний фестиваль"})]})]}),u.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:u.jsx("div",{className:"w-6 h-10 border-2 border-festival-yellow rounded-full flex justify-center",children:u.jsx("div",{className:"w-1 h-3 bg-festival-yellow rounded-full mt-2 animate-pulse"})})})]})},Mr=({id:r,title:e,children:t,backgroundColor:n="white"})=>u.jsx("section",{id:r,className:`py-20 ${n==="muted"?"bg-muted":"bg-white"}`,children:u.jsxs("div",{className:"container mx-auto px-4",children:[u.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-center mb-16 text-festival-blue",children:e}),t]})}),ii=R_,Po=L_,PM=I_,B_=b.forwardRef(({className:r,...e},t)=>u.jsx(Sh,{ref:t,className:ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));B_.displayName=Sh.displayName;const bs=b.forwardRef(({className:r,children:e,...t},n)=>u.jsxs(PM,{children:[u.jsx(B_,{}),u.jsxs(Ch,{ref:n,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,u.jsxs(F_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(ih,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bs.displayName=Ch.displayName;const _s=({className:r,...e})=>u.jsx("div",{className:ve("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});_s.displayName="DialogHeader";const Ss=b.forwardRef(({className:r,...e},t)=>u.jsx(jh,{ref:t,className:ve("text-lg font-semibold leading-none tracking-tight",r),...e}));Ss.displayName=jh.displayName;const DM=b.forwardRef(({className:r,...e},t)=>u.jsx(kh,{ref:t,className:ve("text-sm text-muted-foreground",r),...e}));DM.displayName=kh.displayName;const AM=({title:r,description:e,icon:t,children:n,detailedContent:s,responsibilities:i})=>u.jsxs(ii,{children:[u.jsx(Po,{asChild:!0,children:n}),u.jsxs(bs,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_s,{children:u.jsxs(Ss,{className:"flex items-center gap-4 text-2xl text-festival-blue",children:[u.jsx("span",{className:"text-4xl",children:t}),r]})}),u.jsxs("div",{className:"mt-6",children:[u.jsx("p",{className:"text-muted-foreground mb-6 text-lg",children:e}),u.jsxs("div",{className:"bg-muted p-6 rounded-lg mb-6",children:[u.jsx("h4",{className:"text-xl font-bold text-festival-blue mb-4",children:"Детальний опис:"}),u.jsx("p",{className:"leading-relaxed mb-4",children:s})]}),u.jsxs("div",{className:"bg-white border-2 border-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h4",{className:"text-xl font-bold text-festival-blue mb-4",children:"Основні обов'язки:"}),u.jsx("ul",{className:"space-y-2",children:i.map((o,a)=>u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-festival-yellow",children:"•"}),u.jsx("span",{className:"text-muted-foreground",children:o})]},a))})]})]})]})]}),MM=({title:r,description:e,icon:t,children:n,detailedContent:s,image:i,audio:o,downloadFiles:a})=>u.jsxs(ii,{children:[u.jsx(Po,{asChild:!0,children:n}),u.jsxs(bs,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_s,{children:u.jsxs(Ss,{className:"flex items-center gap-4 text-2xl text-festival-blue",children:[u.jsx("span",{className:"text-4xl",children:t}),r]})}),u.jsxs("div",{className:"mt-6",children:[u.jsx("p",{className:"text-muted-foreground mb-4 text-lg",children:e}),i&&u.jsx("div",{className:"mb-6 text-center",children:u.jsx("img",{src:i,alt:r,className:"max-w-sm mx-auto rounded-lg shadow-lg"})}),o&&u.jsx("div",{className:"mb-6",children:u.jsxs("audio",{controls:!0,className:"w-full",children:[u.jsx("source",{src:o,type:"audio/mpeg"}),"Ваш браузер не підтримує відтворення аудіо."]})}),u.jsx("div",{className:"bg-muted p-6 rounded-lg",children:u.jsx("p",{className:"leading-relaxed whitespace-pre-line",children:s})}),a&&a.length>0&&u.jsx("div",{className:"mt-6 flex justify-center gap-3 flex-wrap",children:a.map((l,c)=>u.jsxs(q,{variant:"hero",onClick:()=>{const h=document.createElement("a");h.href=l.url,h.download=l.filename,document.body.appendChild(h),h.click(),document.body.removeChild(h)},className:"flex items-center gap-2",children:[u.jsx(F0,{className:"w-4 h-4"}),l.label]},c))}),!a&&(i||o)&&u.jsx("div",{className:"mt-6 flex justify-center",children:u.jsxs(q,{variant:"hero",onClick:()=>{const l=document.createElement("a");l.href=i||o||"",l.download=i?`${r.toLowerCase().replace(/\s+/g,"-")}.png`:`${r.toLowerCase().replace(/\s+/g,"-")}.mp3`,document.body.appendChild(l),l.click(),document.body.removeChild(l)},className:"flex items-center gap-2",children:[u.jsx(F0,{className:"w-4 h-4"}),"Завантажити файл"]})})]})]})]}),RM="/assets/1-B4sj9VmL.jpg",LM="/assets/2-Dwk3TSYt.jpg",IM="/assets/3-C8UjfW-b.jpg",FM="/assets/4-dxY_hZc-.jpg",$M="/assets/5-BhilGZ4g.jpg",zM="/assets/6-D208qorK.jpg",BM="/assets/7-9MHS8uik.jpg",UM="/assets/8-BPtPU4bu.jpg",WM="/assets/9-i8DqBRpH.jpg",VM="/assets/10-DkjPrSvb.jpg",HM="/assets/11-Bs9BC2U_.jpg",YM="/assets/12-CXh6KQ5b.jpg",GM="/assets/1-DZtacxjS.jpg",XM="/assets/2-Cxj2YUdT.jpg",qM="/assets/3-B_ApSPus.jpg",KM="/assets/4-xwtr9L0R.jpg",QM="/assets/5-aWD2s7bz.jpg",JM="/assets/6-ulh8JZ3A.jpg",ZM="/assets/7-D5_ZO2yr.jpg",e4="/assets/8-XOgCvUDj.jpg",t4="/assets/1-DDo7wk4w.jpg",r4="/assets/2-BHu7PjrZ.jpg",n4="/assets/3-Vv8agPbj.jpg",s4="/assets/4-B0nBETHo.jpg",i4="/assets/5-DwnZz6T9.jpg",o4="/assets/6-C9wyEhas.jpg",a4="/assets/7-ne6y7MDG.jpg",l4="/assets/8-BbnnuU9J.jpg",c4="/assets/9-ODQcKxwj.jpg",u4="/assets/10-D_v2DQx6.jpg",h4="/assets/1-DcPJCIOK.jpg",d4="/assets/2-CzXB4as-.jpg",f4="/assets/3-D_YSwkAR.jpg",p4="/assets/4-Ci1_LlWL.jpg",g4="/assets/1-CHMhLJOg.jpg",m4="/assets/2-LDN-CDkC.jpg",v4="/assets/1-D8dAltjb.jpg",y4="/assets/2-CLjQLeTn.jpg",x4="/assets/3-ChbI1KJK.jpg",w4="/assets/4-aYJt6Irm.jpg",b4="/assets/5-CAyaa_C4.jpg",_4="/assets/6-CR95MS7x.jpg",S4="/assets/1-DeIuuSfP.jpg",C4="/assets/2-DH6EOy9U.jpg",j4="/assets/3-Cv2CsXR7.jpg",k4="/assets/4-CZzDjcOE.jpg",T4="/assets/5-DFRZzPlp.jpg",E4="/assets/6-BTGoGOBj.jpg",O4="/assets/7-BrQh84v9.jpg",N4="/assets/8-DPGxe32A.jpg",P4="/assets/1-CgtEaHmf.jpg",D4="/assets/2-uME6JEOb.jpg",A4="/assets/3-BKsI4ijS.jpg",M4="/assets/4-BmshZuUx.jpg",R4="/assets/5-Dmw2Hvnl.jpg",L4="/assets/6-DukIDiOb.jpg",I4="/assets/7-BTnPGcCF.jpg",F4="/assets/8-CFmwTg1l.jpg",$4="/assets/9-Di5vJfC6.jpg",z4="/assets/10-BKrxpKBX.jpg",B4="/assets/11-BOBat-t8.jpg",U4="/assets/12-0urMzj6S.jpg",W4="/assets/1-DJlaoxs4.jpg",V4="/assets/2-CMWPnnvE.jpg",H4="/assets/3-BYODZ1yr.jpg",Y4="/assets/4-DvQuZM5s.jpg",G4="/assets/5-D9gG5YGT.jpeg",X4="/assets/6-Bbq1Hrmq.jpg",q4="/assets/7-B4hG9P5I.jpg",K4="/assets/8-CBdPvPno.jpg",Q4="/assets/9-CHkXj8IS.jpg",J4="/assets/10-9cBMFAyL.jpg",Z4="/assets/11-CKqYSy3-.jpg",eR="/assets/1-Cf-ArnuT.jpg",tR="/assets/2-CeFZGJ_F.jpg",rR="/assets/3-DNb8gOi6.jpg",nR="/assets/4-CN8NJPZS.jpg",sR="/assets/5-BYiAsz_H.jpg",iR="/assets/6-BH5xV-kO.jpg",oR="/assets/7-C1jSkQOK.jpg",aR="/assets/8-xRd8kPKS.jpg",lR="/assets/9-BOLJlyYg.jpg",cR="/assets/10-DLlPiDpC.jpg",uR="/assets/1-CUA36cHe.jpg",hR="/assets/2-jwXKropw.jpg",dR="/assets/3-Ckjbl2WD.jpg",fR="/assets/4-Dn1ZpSWn.jpg",pR="/assets/5-BZ7kh9Pf.jpg",gR="/assets/6-C8vz5oXy.jpg",mR="/assets/7-C7_iCuFJ.jpg",vR="/assets/1-BV9-cnVt.jpg",yR="/assets/2-CPoo7n03.jpg",xR="/assets/3-UiUfzmG8.jpg",wR="/assets/4-gWz7t1rs.jpg",bR="/assets/5-C4jcbaRF.jpg",_R="/assets/6-DX3lKZIR.jpg",SR="/assets/7-jkTII1np.jpg",CR="/assets/8-BNETNR5v.jpg",jR="/assets/9-CM1nES_l.jpg",kR="/assets/10-3EAfPDsO.jpg",TR="/assets/11-BgCfv5zc.jpg",ER="/assets/12-YQRudVZT.jpg",mp={2014:[{id:1,src:RM,alt:"Прапор республіки розвивається під час ритуальних купань"},{id:2,src:LM,alt:"Міністр культури відпочиває перед будівлею Верховної Ліги Джекесу"},{id:3,src:IM,alt:"Будівлі міністерств"},{id:4,src:FM,alt:"Будівлі міністерств"},{id:5,src:$M,alt:"Оригінальний прапор Республіки та місце приготування їжі"},{id:6,src:zM,alt:"Будівля Верховної Ліги Джекесу"},{id:7,src:BM,alt:"Прикордонний стовпчик Республіки"},{id:8,src:UM,alt:"Допомога при спуску до джерела води"},{id:9,src:WM,alt:"Перший прапор Республіки"},{id:10,src:VM,alt:"Збір та обговорення важливих державних питань"},{id:11,src:HM,alt:'Оригінальна арт-інсталяція "Меморіал загублених тапочків"'},{id:12,src:YM,alt:"Меморіал, торговий морський прапор Республіки та фізична маніфестація гербу Республіки"}],2015:[{id:1,src:GM,alt:"Збір ресурсів для вогню"},{id:2,src:XM,alt:"Збір ресурсів для вогню"},{id:3,src:qM,alt:'Арт-інсталяція "Камінь". Букви символізують перші букви імен жителів Республіки'},{id:4,src:KM,alt:"Продовольчі питання"},{id:5,src:QM,alt:"Насичене обговорення питань державотворення"},{id:6,src:JM,alt:"Підтримка вогню"},{id:7,src:ZM,alt:"Вечірні вайби"},{id:8,src:e4,alt:"Чілова частина фестивалю"}],2016:[{id:1,src:t4,alt:"Ритуальні купання"},{id:2,src:r4,alt:"Міністр фінансів благословляється після ритуальних купань"},{id:3,src:n4,alt:"Нова жителька Республіки з тодішнім міністром культури"},{id:4,src:s4,alt:"Вечірня атмосфера"},{id:5,src:i4,alt:"Прапор Республіки та тварина-власність Республіки"},{id:6,src:o4,alt:"Логістика після закінчення фестивалю"},{id:7,src:a4,alt:"Логістика речей"},{id:8,src:l4,alt:"Продовольче забезпечення та арт-інсталяція"},{id:9,src:c4,alt:"Демаркована територія"},{id:10,src:u4,alt:"Пропозиції розваг від міністра культури"}],2017:[{id:1,src:h4,alt:'Арт-інсталяція "Колір"'},{id:2,src:d4,alt:"Вечірня танцювальна програма"},{id:3,src:f4,alt:'Театралізована постановка "Випадковий ренесанс"'},{id:4,src:p4,alt:"Прапор Республіки"}],2018:[{id:1,src:g4,alt:"Загальна територія фестивалю. Можна помітити другий прапор Республіки"},{id:2,src:m4,alt:"Загальна територія фестивалю"}],2019:[{id:1,src:v4,alt:"Територія фестивалю та чілове часопроводження"},{id:2,src:y4,alt:"Початок забезпечення вогню"},{id:3,src:x4,alt:'Театралізована постановка "Лямбда"'},{id:4,src:w4,alt:"Чілова частина фестивалю"},{id:5,src:b4,alt:"Відкриття фестивалю та урочисте підняття прапору Республіки новим жителем Республіки"},{id:6,src:_4,alt:"Будівництво міністерств"}],2020:[{id:1,src:S4,alt:"Будівлі міністерств"},{id:2,src:C4,alt:"Чіл міністра енергетики після важкої роботи"},{id:3,src:j4,alt:"Святкування нульового дня народження після близькості смерті від пекельного водовороту"},{id:4,src:k4,alt:"Кризова ситуація з харчуванням через зменшення населення Республіки"},{id:5,src:T4,alt:"Другий прапор Республіки у вечірній обстановці"},{id:6,src:E4,alt:"Водяний об'єкт та будівлі міністерств"},{id:7,src:O4,alt:"Енергетичний прийом алкоголю в межах фестивалю"},{id:8,src:N4,alt:"Другий прапор Республіки у денній обстановці"}],2021:[{id:1,src:P4,alt:"Масові ритуальні купання"},{id:2,src:D4,alt:"Отримання першого зразка паспорта Республіки Вейву"},{id:3,src:A4,alt:"Нікотиновий допінг під час видачі паспортів"},{id:4,src:M4,alt:"Обговорення питань функціонування флоту Республіки"},{id:5,src:R4,alt:"Продовольче забезпечення"},{id:6,src:L4,alt:"Енергетичне забезпечення"},{id:7,src:I4,alt:"Повернення паспорту після проведення прикордонного та митного контролю"},{id:8,src:F4,alt:"Нові жителі Республіки та другий прапор Республіки"},{id:9,src:$4,alt:"Папа ТаТиШо"},{id:10,src:z4,alt:"Обговорення державницьких питань"},{id:11,src:B4,alt:"Знайомство з оновленим правовим форматом"},{id:12,src:U4,alt:"Адаптація нових жителів Республіки"}],2022:[{id:1,src:W4,alt:"Міністр культури курує проведення розважальних заходів"},{id:2,src:V4,alt:"Інтродукція гамаків до чіл-зони"},{id:3,src:H4,alt:"Забезпечення захисту від дощу"},{id:4,src:Y4,alt:"Прапори Республіки та автономної Республіки Крокодайл та жителі Республіки"},{id:5,src:G4,alt:"Ритуальні купання"},{id:6,src:X4,alt:"Колективний захист від дощу"},{id:7,src:q4,alt:'Театральна комедійна постановка "Морква"'},{id:8,src:K4,alt:"Жертви теракту у Республіці"},{id:9,src:Q4,alt:"Загальне фото жителів"},{id:10,src:J4,alt:"Пост-дощова атмосфера"},{id:11,src:Z4,alt:'Театралізована постановка "Відьми"'}],2023:[{id:1,src:eR,alt:"Жителі Республіки"},{id:2,src:tR,alt:'Театралізована постановка "Вогонь серця"'},{id:3,src:rR,alt:"Вечірня атмосфера Республіки"},{id:4,src:nR,alt:"Вечірня атмосфера Республіки"},{id:5,src:sR,alt:"Розважальна програма від міністерства культури"},{id:6,src:iR,alt:"Вечірня атмосфера Республіки"},{id:7,src:oR,alt:"Музична програма"},{id:8,src:aR,alt:'Арт-інсталяція "Міністерство Енергетики"'},{id:9,src:lR,alt:"Прапор Республіки та міністерства"},{id:10,src:cR,alt:"Продовольче забезпечення"}],2024:[{id:1,src:uR,alt:'Програма "Пошта Республіки Вейву"'},{id:2,src:hR,alt:"Жителі Республіки"},{id:3,src:dR,alt:"Вечірня музична програма"},{id:4,src:fR,alt:"Бограч від міністерства господарства"},{id:5,src:pR,alt:"Гамак-чіл-зона"},{id:6,src:gR,alt:"Брендовані представники міністерства енергетики"},{id:7,src:mR,alt:'Марки програми "Пошта Республіки Вейву"'}],2025:[{id:1,src:vR,alt:"Дорожній вказівник до Республіки"},{id:2,src:yR,alt:"Президент Республіки з третім прапором Республіки"},{id:3,src:xR,alt:"Жителі готуються до церемонії відкриття Фестивалю"},{id:4,src:wR,alt:"Продовольче забезпечення"},{id:5,src:bR,alt:"Місце проведення Фестивалю"},{id:6,src:_R,alt:"Міністр енергетики працює над забезпеченням Республіки"},{id:7,src:SR,alt:"Президентські дебати перед виборами"},{id:8,src:CR,alt:'Театральна постановка "Ранкова йога"'},{id:9,src:jR,alt:"Праця на благо Республіки"},{id:10,src:kR,alt:"Прикордонний контроль"},{id:11,src:TR,alt:"Вечірня атмосфера"},{id:12,src:ER,alt:"Жителі Республіки"}]},U_=r=>mp[r]||[],OR=r=>mp[r]&&mp[r].length>0,NR=({year:r,children:e})=>{const{isAuthenticated:t}=Xr(),n=Tn(),s=U_(r),i=OR(r),[o,a]=b.useState(null),[l,c]=b.useState(!1);b.useEffect(()=>{if(o!==null){const v=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${v}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.overflow="",window.scrollTo(0,v)}}},[o]);const h=v=>{a(v)},d=()=>{a(null)},f=()=>{if(o!==null&&o<s.length-1&&!l){console.log("Moving to next photo:",o+1),c(!0);const v=o+1;setTimeout(()=>{a(v),c(!1)},150)}},g=()=>{if(o!==null&&o>0&&!l){console.log("Moving to prev photo:",o-1),c(!0);const v=o-1;setTimeout(()=>{a(v),c(!1)},150)}},m=(v,x)=>{l||(v==="next"?f():g())},p=v=>{v.key==="Escape"&&d(),v.key==="ArrowRight"&&f(),v.key==="ArrowLeft"&&g()},y=()=>{t?window.open("https://drive.google.com/drive/folders/1ExoCiVnXA2f50CPw060moGFx7kC3sBJw?usp=drive_link","_blank","noopener,noreferrer"):n("/auth")};return u.jsxs(ii,{children:[u.jsx(Po,{asChild:!0,children:e}),u.jsxs(bs,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_s,{children:u.jsxs(Ss,{className:"text-2xl text-festival-blue",children:["Галерея ",r," року"]})}),u.jsxs("div",{className:"mt-6",children:[u.jsxs("p",{className:"text-muted-foreground mb-6",children:["Вибрані фото з Республіки ",r," року"]}),i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map((v,x)=>u.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300 shadow-lg",onClick:()=>h(x),children:u.jsx("img",{src:v.src,alt:v.alt,className:"w-full h-full object-cover"})},v.id))}),u.jsxs("div",{className:"mt-6 text-center space-y-4",children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Клікніть на фото для перегляду у повному розмірі"}),u.jsx(q,{variant:"outline",className:"w-full max-w-xs",onClick:y,children:"Перейти до всіх фотографій"})]})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"text-6xl mb-4",children:"📷"}),u.jsxs("p",{className:"text-lg text-muted-foreground mb-4",children:["Фотографії з ",r," року будуть додані незабаром"]})]})]})]}),o!==null&&u.jsxs("div",{className:"lightbox-overlay fixed inset-0 bg-black/95 z-[100] flex items-center justify-center",onKeyDown:p,tabIndex:0,style:{userSelect:"none",touchAction:"none"},children:[u.jsx("div",{className:"absolute inset-0",onClick:d,onTouchEnd:d}),u.jsxs("div",{className:"lightbox-content relative w-screen h-screen flex items-center justify-center pointer-events-none",children:[u.jsx("button",{onClick:v=>{v.stopPropagation(),v.preventDefault(),d()},className:"absolute top-4 right-4 md:top-14 md:right-14 z-[120] bg-black/50 text-white p-3 md:p-4 rounded-full hover:bg-black/70 transition-colors pointer-events-auto",style:{touchAction:"manipulation"},children:u.jsx(ih,{size:20,className:"md:w-6 md:h-6"})}),o>0&&u.jsx("button",{onClick:()=>m("prev"),className:"absolute left-2 md:left-4 top-1/2 -translate-y-1/2 z-[120] bg-black/50 text-white p-3 md:p-4 rounded-full hover:bg-black/70 transition-colors select-none pointer-events-auto",disabled:l,style:{touchAction:"manipulation"},children:u.jsx(Dk,{size:20,className:"md:w-6 md:h-6"})}),o<s.length-1&&u.jsx("button",{onClick:()=>m("next"),className:"absolute right-2 md:right-4 top-1/2 -translate-y-1/2 z-[120] bg-black/50 text-white p-3 md:p-4 rounded-full hover:bg-black/70 transition-colors select-none pointer-events-auto",disabled:l,style:{touchAction:"manipulation"},children:u.jsx(Ak,{size:20,className:"md:w-6 md:h-6"})}),u.jsx("img",{src:s[o].src,alt:s[o].alt,className:`max-w-[98vw] max-h-[98vh] object-contain transition-opacity duration-300 pointer-events-auto ${l?"opacity-0":"opacity-100"}`,onClick:v=>v.stopPropagation(),style:{touchAction:"none"}}),u.jsxs("div",{className:`absolute bottom-16 left-1/2 -translate-x-1/2 text-center text-white transition-opacity duration-300 pointer-events-none ${l?"opacity-0":"opacity-100"}`,children:[u.jsxs("p",{className:"text-base bg-black/50 px-3 py-1 rounded-full mb-2",children:[o+1," / ",s.length]}),u.jsx("p",{className:"text-base bg-black/50 px-3 py-1 rounded",children:s[o].alt})]})]})]})]})},PR=({children:r})=>u.jsxs(ii,{children:[u.jsx(Po,{asChild:!0,children:r}),u.jsxs(bs,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_s,{children:u.jsx(Ss,{className:"text-3xl text-festival-blue text-center",children:"Конституція Республіки Вейву"})}),u.jsxs("div",{className:"mt-6 space-y-6",children:[u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Зі змінами, внесеними 19.07.2024, 27.07.2025, версія 3"})}),u.jsxs("div",{className:"bg-festival-blue text-white p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"Преамбула"}),u.jsxs("p",{className:"leading-relaxed text-center",children:["Верховна Ліга Джекесу Республіки Вейву від імені народу Республіки Вейву,",u.jsx("br",{}),"підтверджуючи тисячолітню історію державотворення наших предків-тусовщиків,",u.jsx("br",{}),"прагнучи увіковічнити Велику Традицію часопроведення нашого мікросуспільства,",u.jsx("br",{}),"возвеличуючи грандіозну роль чілу та відпочинку,",u.jsx("br",{}),"приймає цю",u.jsx("br",{}),"КОНСТИТУЦІЮ."]})]}),u.jsxs("div",{className:"bg-festival-yellow/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"Розділ 1. ОСНОВНІ ПОЛОЖЕННЯ"}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Стаття 1",content:["1. Республіка Вейву є незалежною і суверенною державою. Суверенітет Республіки Вейву поширюється на всю її територію.","2. Республіка Вейву вправі захищати свою незалежність будь-якими методами. Будь-хто з жителів Республіки має священне право дати ляща кожному, хто засумнівається в легітимності Республіки."]},{title:"Стаття 2",content:["1. Республіка Вейву є ідеальною державою без будь-яких недоліків.","2. Враховуючи прагнення всіх людей у світі жити у Республіці і декілька мільярдів заяв на надання статусу біженця в Республіці Вейву, що надходять кожного року, Республіка Вейву є закритою державою з ретельним добором жителів."]},{title:"Стаття 3",content:["1. Територія Республіки Вейву є єдиною і неподільною. Будь-які сепаратистські рухи підлягають негайному напоюванню алкоголем задля втрати їх дієздатності."]},{title:"Стаття 4",content:["1. На території Республіки Вейву діють тільки Конституція та законодавство Республіки Вейву."]},{title:"Стаття 5",content:["1. Республіка Вейву має свої прапор, герб та гімн.","2. Прапор Республіки являє собою біле полотно із зображенням та написом «WAVEWOO» на ньому та символізує оригінальний древній прапор Республіки.","3. Прапор Республіки підіймається в обов’язковому порядку під час Фестивалю проголошення Республіки та залишається піднятим до його завершення.","4. Герб Республіки являє собою графічне зображення шести жовтих перевернутих пластикових стаканчиків, нанизаних один на одного.","5. Герб Республіки зображується на офіційних документах, виданих у Республіці і відтворюється при офіційних державних церемоніях."]},{title:"Стаття 6",content:["1. На території Республіки Вейву не заборонений алкоголь. На території Республіки Вейву дозволений алкоголь. На території Республіки Вейву заохочується алкоголь."]},{title:"Стаття 7",content:["1. Державною релігією Республіки Вейву є Артелізм. Всі жителі Республіки зобов’язуються поважати Артелісову Святу Сутність."]},{title:"Стаття 8",content:["1. Державною ідеологією Республіки Вейву є гедонізм. Будь-які внутрішньодержавні діяння і тлумачення цієї Конституції повинні брати до уваги гедоністичний характер Республіки."]}].map((e,t)=>u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-festival-blue/20",children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:e.title}),u.jsx("ul",{className:"space-y-1 text-muted-foreground text-sm",children:e.content.map((n,s)=>u.jsxs("li",{children:["• ",n]},s))})]},t))})]}),u.jsxs("div",{className:"bg-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"Розділ 2. ПРАВА ТА ОБОВ’ЯЗКИ ЖИТЕЛІВ РЕСПУБЛІКИ"}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Стаття 9. Статус громадян Республіки Вейву",content:["1. Громадяни Республіки Вейву є вищими і кращими за всіх інших людей на світі. У будь-яких спірних ситуаціях у міжнародних відносинах прави́ми є громадяни Республіки."]},{title:"Стаття 10. Право на чіл",content:["1. Громадяни Республіки Вейву мають право на чіл. Право на чіл є основоположним правом Республіки і не може бути забране ніким і нічим."]},{title:"Стаття 11. Право на танці та співи",content:["1. Громадяни Республіки Вейву мають право на танці і співи. Право на танці і співи може бути обмежене тільки у випадку гострих психотичних припадків когось із жителів Республіки."]},{title:"Стаття 12. Обов’язок праці і вірності",content:["1. Усе населення Республіки Вейву зобов’язане працювати на благо Республіки і вносити свій вклад у функціонування державного апарату.","2. Будь-хто з громадян та осіб, що перебувають на території Республіки, зобов’язуються не здійснювати державну зраду у будь-якому її прояві."]},{title:"Стаття 13. Заборона на смерть",content:["1. На території Республіки Вейву заборонено помирати (особливо топитися). Порушники підлягають вигнанню з Республіки і опублікуванню їх фотографій на дошці ганьби."]}].map((e,t)=>u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-festival-blue/20",children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:e.title}),u.jsx("ul",{className:"space-y-1 text-muted-foreground text-sm",children:e.content.map((n,s)=>u.jsxs("li",{children:["• ",n]},s))})]},t))})]}),u.jsxs("div",{className:"bg-festival-yellow/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"Розділ 3. ОРГАНІЗАЦІЯ РЕСПУБЛІКИ"}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Стаття 14. Форма існування Республіки Вейву",content:["1. Республіка Вейву існує на віки вічні у нематеріальній формі. У матеріальній формі Республіка проголошується кожного року шляхом проведення Фестивалю Проголошення Республіки (далі – Фестиваль)."]},{title:"Стаття 15. Верховна Ліга Джекесу",content:["1. Головним органом влади у Республіці є Верховна Ліга Джекесу (далі – ВЛД).","2. ВЛД збирається щорічно у обов’язковому порядку під час Фестивалю.","3. ВЛД складається з усіх жителів Республіки, які беруть участь у поточному Фестивалі.","4. У проміжку між завершенням минулого та початком наступного Фестивалю ВЛД не скликається, а аналогічну повноту влади здобуває Вейвівська Рада Старійшин (див. ст. 34)","5. До повноважень ВЛД входять будь-які питання, пов’язані з будь-чим на будь-якій території з урахуванням обмежень, встановлених у цій Конституції і у законодавстві Республіки."]},{title:"Стаття 16. Засідання Верховної Ліги Джекесу",content:["1. ВЛД може засідати у будь-який зручний час і у будь-якому місці.","2. Депутати ВЛД можуть і не сидіти під час засідання ВЛД.","3. Засідання ВЛД веде спікер ВЛД, ким по замовчуванню є міністр юстиції Республіки.","4. Депутати ВЛД мають право об’єднуватися у депутатські фракції задля кращого представлення їх інтересів. У таких випадках позицію фракції під час обговорення висловлює голова фракції."]},{title:"Стаття 17. Прийняття рішень Верховною Лігою Джекесу",content:["1. ВЛД приймає рішення шляхом голосування її депутатів.","2. Депутати ВЛД голосують шляхом висловлення однієї з трьох позицій: «ЗА», «ПРОТИ» або «УТРИМАВСЯ». Відмова від голосування, раптове зникнення депутата або перебування у надто алкогольному стані задля донесення свого голосу прирівнюються до голосу «УТРИМАВСЯ».","3. Рішення вважається прийнятим, якщо кількість голосів «ЗА» перевищує кількість голосів «ПРОТИ». Голоси «УТРИМАВСЯ» не враховуються.","4. Вартість голосу поточного Президента Республіки зростає на 1 за кожних 10 депутатів поточного складу ВЛД.","5. Положення ч. 4 цієї статті не поширюються на голосування на виборах Президента Республіки.","6. Рішення про прийняття змін до даної Конституції (не стосується додатків, які оновлюються синхронно зі зміною даних), а також основоположні рішення, до яких відносяться рішення про дострокове позбавлення громадянства Вейву та присвоєння довічного громадянства Вейву, приймаються конституційною більшістю голосів «ЗА» або «УТРИМАВСЯ»  (66% +1 голос).","7. Рішення про вживання алкоголю під час Фестивалю приймаються алкогольною більшістю голосів (1 голос «ЗА», «ПРОТИ» або «УТРИМАВСЯ»)."]},{title:"Стаття 18. Порядок голосування",content:["1. По замовчуванню голосування ВЛД відбуваються відкрито та публічно.","2. ВЛД має право прийняти рішення про таємність якогось із голосувань, якщо є підстави вважати, що депутати ВЛД можуть бути піддані переслідуванню за свою позицію. В такому разі голосування відбувається у письмовій формі з використанням завізованих бюлетенів, які перемішуються перед видачею і перед підрахунком голосів та складаються у запечатану урну, або, якщо голосування відбувається не під час Фестивалю, воно може бути здійснене шляхом анонімного онлайн-голосування.","3. Підрахунок голосів при таємному письмовому голосуванні здійснює лічильна комісія міністерства юстиції та до двох незалежних спостерігачів."]},{title:"Стаття 19. Президент Республіки Вейву",content:["1. Президент Республіки Вейву є гарантом Конституції Республіки Вейву та керівником проведення Фестивалю.","2. Президент Республіки відповідальний за імплементацію прав та обов’язків жителів Республіки.","3. Президент Республіки має право видавати виконавчі укази, що є обов’язковими для дотримання. Виконавчі укази не повинні суперечити цій Конституції.","4. Президент має право входити до або призначати представників до Вейвівської Ради Старійшин (див. ст. 34)","5. Президентом може бути тільки громадянин Республіки.","6. Один і той же громадянин не може обиратися Президентом два рази підряд.","7. У випадку, якщо Президент не прибув на черговий Фестиваль, він позбувається статусу Президента і до виборів нового Президента всю повноту влади здобуває ВЛД."]}].map((e,t)=>u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-festival-blue/20",children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:e.title}),u.jsx("ul",{className:"space-y-1 text-muted-foreground text-sm",children:e.content.map((n,s)=>u.jsxs("li",{children:["• ",n]},s))})]},t))})]}),u.jsxs("div",{className:"bg-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"Розділ 4. МІНІСТЕРСТВА ТА ІНШІ ОРГАНИ ВЛАДИ РЕСПУБЛІКИ"}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Стаття 20. Міністерства та управління Республіки",content:["1. Внутрішня та зовнішня політика Республіки здійснюється за принципом поділу влади на міністерства та управління.","2. Перелік міністерств та управлінь не вичерпний і може бути доповнений.","3. Міністерство очолює міністр. Міністрами можуть бути тільки громадяни Республіки.","4. Управління можуть бути очолені або не мати визначеного лідера. До управлінь можуть належати всі жителі Республіки.","5. Один житель може бути міністром або працювати тільки у одному міністерстві, однак може додатково мати посаду в управліннях.","6. Зміна міністерства або управління, до якого належить житель, може відбуватися не частіше ніж раз на рік.","7. Деякі міністерства мають статус критичних і мають право залучати жителів Республіки до обов’язкових робіт. Жителі, які відмовляються від участі в роботах, можуть бути обмежені в привілеях."]},{title:"Стаття 21. Міністерство фінансів",content:["1. Міністерство фінансів Республіки відповідальне за складання бюджету Республіки на кожен поточний звітний рік та збір податків.","2. Бюджетний період починається з чорновика бюджету на наступний Фестиваль та закінчується із сплатою всіх річних податків жителями Вейву.","3. Міністерство фінансів є критичним міністерством (див. ч.7 ст. 20)."]},{title:"Стаття 22. Міністерство культури",content:["1. Міністерство культури відповідальне за просвітництво жителів Республіки і проведення високоморальних культурних заходів."]},{title:"Стаття 23. Міністерство юстиції",content:["1. Міністерство юстиції відповідальне за церемоніальні функції та державне функціонування, ведення офіційних документів, складання чорновиків законодавчих актів та тлумачення законодавства.","2. Міністерство юстиції є критичним міністерством (див. ч.7 ст. 20)."]},{title:"Стаття 24. Міністерство охорони здоров’я",content:["1. Міністерство охорони здоров’я відповідальне за запобігання випадкам смерті жителів Республіки або відтермінування смерті до тих пір, поки житель не покине територію Республіки та за вакцинацію населення Республіки."]},{title:"Стаття 25. Міністерство енергетики",content:["1. Міністерство енергетики відповідальне за забезпечення енергією Республіки та її жителів у будь-яких її формах (включно з алкогольним постачанням).","2. Міністерство енергетики є критичним міністерством (див. ч.7 ст. 20)."]},{title:"Стаття 26. Міністерство господарства ",content:["1. Міністерство господарства відповідає за продовольче забезпечення Республіки до та під час проведення Фестивалю.","2. Міністерство господарства є критичним міністерством (див. ч.7 ст. 20)."]},{title:"Стаття 27. Міністерство благоустрою та охорони довкілля",content:["1. Міністерство благоустрою та охорони довкілля відповідальне за забезпечення екологічної сталості проведення Фестивалю та благоустрій території Республіки.","2. Міністерство благоустрою та охорони довкілля є критичним міністерством (див. ч.7 ст. 20)."]},{title:"Стаття 28. Міністерство освіти і науки",content:["1. Міністерство освіти і науки відповідальне за утримання населення Республіки в стані, достатньому для донесення своєї думки з базових питань та державне просвітництво."]},{title:"Стаття 29. Міністерство брендингу",content:["1. Міністерство мистецтва відповідальне за творчу гармонію у Республіці, дизайн державної продукції та промоцію Республіки."]},{title:"Стаття 30. Міністерство цифрової трансформації",content:["1. Міністерство цифрової трансформації відповідальне за впровадження високотехнологічних прогресивних змін у Республіці."]},{title:"Стаття 31. Управління логістики",content:["1. Управління логістики відповідальне за доставку і транспортування жителів Республіки та імпорт товарів у Республіку.","2. До складу управління входять всі жителі Республіки із наявним транспортним засобом."]},{title:"Стаття 32. Управління митниці",content:["1. Управління митниці відповідальне за перевірку товарів, що ввозяться у Республіку чи вивозяться з неї і за збір ввізного або виїзного мита, якщо таке передбачене законодавством."]},{title:"Стаття 33. Управління флоту Республіки",content:["1. Республіка Вейву має свій військовий і цивільний флот, що має бути здатним відбити повномасштабну атаку будь-якого ворога, за розвиток і керівництво яким відповідає Командир Флоту Республіки Вейву."]},{title:"Стаття 34. Вейвівська Рада Старійшин",content:["Вейвівська Рада Старійшин (далі - ВРС) є особливим органом влади, що діє виключно в проміжку поміж Фестивалями Проголошення Республіки замість ВЛД, коли депутати ВЛД перебувають у відрядженнях до інших країн.","2. Головною ціллю функціонування ВРС є підготовка до проведення наступного Фестивалю.","3. Участь у ВРС є добровільною.","4. До складу ВРС можуть входити до одинадцяти громадян Республіки, а саме:","а. Міністри критичних міністерств","б. Один додатковий представник від кожного з критичних міністерств, що (опціонально) призначається Міністром відповідного критичного міністерства.","в. Президент Республіки або громадянин, призначений Президентом.","5. В процесі своєї діяльності ВРС керується законодавством, аналогічним до того, що діє для ВЛД, якщо інше не випливає з суті закону. ","6. ВРС не має повноважень змінювати Конституцію Республіки Вейву."]}].map((e,t)=>u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-festival-blue/20",children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:e.title}),u.jsx("ul",{className:"space-y-1 text-muted-foreground text-sm",children:e.content.map((n,s)=>u.jsxs("li",{children:["• ",n]},s))})]},t))})]}),u.jsxs("div",{className:"bg-festival-yellow/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"Розділ 5. НАСЕЛЕННЯ РЕСПУБЛІКИ"}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Стаття 35. Населення Республіки Вейву",content:["1. Населення Республіки Вейву (жителі) ділиться на наступні категорії:","a.	Громадяни республіки – особи, які були присутні хоча б на двох Фестивалях, в тому числі хоча б на одному з останніх трьох проведених чи таких, що проводяться.","b.	Власники посвідки на тимчасове проживання – особи, які були присутні хоча б на одному Фестивалі з останніх трьох проведених чи таких, що проводяться.","c.	Заморожені жителі – особи, які були присутні на хоча б одному фестивалі з останніх п’яти проведених чи таких, що проводяться, але не підпадають під категорії a та b.","2. Решта осіб вважаються непосвяченими.","3. Черговий статус громадянина або посвідка на тимчасове проживання надаються чи втрачаються після офіційного початку Фестивалю.","4. Вимоги до набуття статусу громадян, власників посвідки на тимчасове проживання та заморожених жителів вичерпуються цією Конституцією.","5. Перепис поточних жителів Республіки ведеться міністром юстиції, публікується в додатку №1 і оновлюється кожного року після завершення чергового Фестивалю."]},{title:"Стаття 36. Паспорт громадянина",content:["1. Громадянство Республіки Вейву посвідчується паспортом Республіки Вейву. ","2. Паспорт є головним ідентифікаційним документом громадян. В’їзд громадян у Республіку можливий тільки після пред’явлення паспорта Республіки.","3. Втрата громадянства тягне за собою втрату сили паспорта.","4. Втрата паспорта призводить до санкцій, які визначаються Верховною Лігою Джекесу."]},{title:"Стаття 37. Порядок в’їзду у Республіку Вейву",content:["1. Громадяни Республіки мають право в’їзду у Республіку у будь-який час.","2. Власники посвідки на тимчасове проживання та заморожені жителі мають право в’їзду у Республіку у випадку відсутності заперечень будь-кого з громадян Республіки. Якщо заперечення присутні, для дозволу на в’їзд потрібне рішення ВЛД або ВРС.","3. Непосвячені мають право в’їзду у Республіку тільки за запрошенням когось із громадян Республіки, що підтвердили свою участь у актуальному Фестивалі, і за попереднім схваленням ВЛД або ВРС.","4. Один громадянин Республіки має право на запрошення одного непосвяченого на кожен поточний Фестиваль.","5. Непосвячені та власники посвідки на тимчасове проживання не мають права запрошувати осіб у Республіку.","6. Поточний Президент Республіки має право на запрошення до двох додаткових непосвячених на поточний Фестиваль."]},{title:"Стаття 38. Державне стажування",content:["1. Задля отримання громадянства власники посвідки на тимчасове проживання повинні пройти державне стажування.","2. Стажування проходиться у якомусь із міністерств чи управлінь Республіки за поручительством міністра або керівника управління.","3. Власники посвідки на тимчасове проживання на період проходження стажування вписуються в паспорт поручителя.","4. Успішне проходження стажування візується поручителем, після чого власники посвідки на тимчасове проживання можуть отримати громадянство за умов виконання інших вимог закону."]},{title:"Стаття 39. Обмеження на в’їзд у Республіку",content:["1. У зв’язку з ідеалістичним, порочним та гедоністичним характером життя в Республіці на територію Республіки заборонений в’їзд неокріплим умам, зокрема неповнолітнім."]},{title:"Стаття 40. Дострокове позбавлення громадянства Республіки",content:["1. ВЛД має право достроково позбавити громадянства когось із поточних громадян за конституційною процедурою, передбаченою ч. 6 ст. 17 у випадку:","a. Державної зради","b. Грубої злочинної діяльності, яка порушує основоположні принципи даної Конституції","2. Позбавлена громадянства особа виганяється з Республіки, її паспорт вилучається і спалюється на ритуальному вогні, навколо якого водять ритуальний танець всі жителі Вейву."]},{title:"Стаття 41. Довічне громадянство Республіки",content:["1. ВЛД має право надати довічне громадянство комусь із поточних громадян за конституційною процедурою, передбаченою ч. 6 ст. 17 за значні заслуги перед Республікою або як найвищу державну нагороду.","2. Позбавлення довічного громадянства відбувається за конституційною процедурою, аналогічною тій, що передбачена ч. 1 даної статті."]}].map((e,t)=>u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-festival-blue/20",children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:e.title}),u.jsx("ul",{className:"space-y-1 text-muted-foreground text-sm",children:e.content.map((n,s)=>u.jsxs("li",{children:["• ",n]},s))})]},t))})]}),u.jsxs("div",{className:"bg-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"Розділ 6. ФЕСТИВАЛЬ ПРОГОЛОШЕННЯ РЕСПУБЛІКИ"}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"Стаття 42. Фестиваль Проголошення Республіки",content:["1. Фестиваль Проголошення Республіки відбувається у вигляді зібрання як мінімум трьох громадян Республіки на спеціальний фестиваль алкогольних гулянь. ","2. Максимальна кількість учасників Фестивалю не обмежується.","3. Фестиваль відбувається щорічно в липні або у серпні.","4. Фестиваль триває як мінімум три дні і дві ночі. У окремих випадках та у випадку надзвичайних обставин, за попереднім рішенням ВЛД чи ВРС, Фестиваль може тривати два дні та одну ніч."]},{title:"Стаття 43. Місце проведення Фестивалю",content:["1. Фестиваль проводиться у гірській місцевості.","2. Фестиваль проводиться поряд з річкою чи іншим водяним об’єктом.","3. Фестиваль проводиться у місці, доступному для досягнення автомобілем.","4. Місце проведення Фестивалю змінюється кожного року."]},{title:"Стаття 44. Підняття прапору Республіки",content:["1. Фестиваль вважається офіційно початим після підняття прапору Республіки Вейву та офіційно закінченим після спуску прапору Республіки Вейву.","2. Прапор Республіки є уособленням Фестивалю та Республіки. Справжній Фестиваль обов’язково повинен проходити при піднятому прапорі. ","3. Прапор урочисто підіймає хтось із запрошених непосвячених, якщо такі є, складаючи перед цим присягу Республіці.","4. У випадку, коли непосвячених на Фестивалі нема, прапор підіймає міністр юстиції або Президент Республіки."]},{title:"Стаття 45. Демаркація кордону",content:["1. Після підняття прапора здійснюється демаркація державного кордону Республіки.","2. Незаконний перетин кордону Республіки людьми чи тваринами, які не є жителями Вейву, позбавляє їх будь-яких прав та робить їх матеріальною власністю Республіки Вейву."]},{title:"Стаття 46. Вибори Президента Республіки Вейву",content:["1. Чергові вибори Президента Республіки Вейву відбуваються на другий день проведення Фестивалю шляхом таємного голосування за процедурою, передбаченою ч. 2 ст. 18.","2. Будь-хто з громадян Республіки (окрім діючого Президента) мають право висунути свою кандидатуру до терміну, визначеного ВЛД.","3. Кандидати повинні висунути свою кандидатуру особисто.","4. У випадку відсутності висунутих кандидатур посада Президента лишається вакантною до наступного Фестивалю.","5. Перед голосуванням відбуваються дебати кандидатів у Президенти у вільній формі.","6. У випадку лише однієї висунутої кандидатури дебати та вибори не проводяться і єдиний кандидат автоматично перемагає.","7. У випадку рівної кількості голосів, відданих за декількох кандидатів-лідерів, право вирішального голосу має поточний Президент Республіки. У випадку відсутності поточного Президента відбувається ритуальна гра «чу-ва-чі» до п’яти перемог.","8. Після свого обрання Президент проголошує урочисту промову, після чого відбувається алкоголізація.","9. Новий Президент отримує, а старий складає повноваження в момент закінчення поточного Фестивалю."]},{title:"Стаття 47. Подальше проведення Фестивалю",content:["1. Подальше проведення Фестивалю відбувається згідно з біоритмами громадян і не може бути надміру обтяжене.","2. Президент Республіки може у будь-який момент оголосити збори громадян Республіки або Верховної Ліги Джекесу з нагальних питань і виступити з офіційною промовою."]},{title:"Стаття 48. Вільне місто Та Ти Шо",content:["1. Та Ти Шо – теократичне місто-держава у складі Республіки Вейву, керівництво якої складається з Папи або ПраДіда (чоловіка який проводить причастя) та його радників, які входять в основу Та Ти Шо.","2. Головною ціллю Та Ти Шо є причастя Артелісової пастви, якими є всі жителі Вейву. ","3. Папа, або ПраДід обирається кожного року з основи жителів Та Ти Шо, його завдання та завдання радників виконати причастя жителів Вейву. ","4. На території Міста-Держави Та Ти Шо діє конституція Вейву та внутрішні розпорядження Та Ти Шо. Та Ти Шо складає релігійне зібрання Артелісівців, яке має свій гімн-молитву (Латексфауна - Серфер) та свої релігійні традиції. ","5. Місто-держава Та Ти Шо знаходиться на території республіки Вейву у одній із споруд та відзначається релігійною регалією (роздрукований папірець з надписом Та Ти Шо). ","6. Причастя проводиться по черзі, після чого радники та сам Папа має право причаститися і включити гімн-молитву. ","7. Причастя проводиться у один із вечорів Фестивалю проголошення республіки Вейву. ",'8. Щоб прийняти причастя учасник Вейву має підійти до ритуального місця і сказати Папі "Бунґало-бунґало" на що Папа відповість йому "В ньому димно і сонячно".']},{title:"Стаття 49. Автономна Республіка Крокодайл",content:["1. Крокодайл – автономна сімейна республіка у складі Республіки Вейву, що підкоряється Конституції Республіки Вейву та внутрішньому статуту.","2. Автономна Республіка Крокодайл має свій прапор, що встановлюється біля будівлі адміністрації Автономної Республіки."]}].map((e,t)=>u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-festival-blue/20",children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:e.title}),u.jsx("ul",{className:"space-y-1 text-muted-foreground text-sm",children:e.content.map((n,s)=>u.jsxs("li",{children:["• ",n]},s))})]},t))})]}),u.jsxs("div",{className:"bg-festival-yellow/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"ПРИКІНЦЕВІ ПОЛОЖЕННЯ"}),u.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:[{title:"1",content:["Ця Конституція вступає в дію з моменту її затвердження Верховною Лігою Джекесу та не має обмежень у тривалості дії."]},{title:"2",content:["Усі депутати ВЛД скріплюють свою згоду на прийняття Конституції своїм підписом та випиванням як мінімум 50-ти грам алкоголю. Оригінал Конституції ретельно зберігається."]},{title:"3",content:["Майбутні зміни до цієї Конституції приймаються за процедурою, передбаченою Конституцією."]}].map((e,t)=>u.jsxs("div",{className:"bg-white p-4 rounded-lg border border-festival-blue/20",children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:e.title}),u.jsx("ul",{className:"space-y-1 text-muted-foreground text-sm",children:e.content.map((n,s)=>u.jsxs("li",{children:["• ",n]},s))})]},t))})]}),u.jsxs("div",{className:"bg-festival-yellow text-festival-blue p-6 rounded-lg text-center",children:[u.jsx("h4",{className:"text-xl font-bold mb-4",children:"Варто пам'ятати"}),u.jsx("p",{className:"text-2xl font-bold",children:"Конституція Республіки Вейву є першочерговим джерелом права. У випадку спорів, саме Конституція є головним документом."})]}),u.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[u.jsx("p",{children:"Прийнято Верховною Лігою Джекесу Республіки Вейву 23 липня 2021 року"}),u.jsx("p",{children:"Останні зміни внесено 27 липня 2025 року"})]})]})]})]}),DR=({children:r})=>u.jsxs(ii,{children:[u.jsx(Po,{asChild:!0,children:r}),u.jsxs(bs,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[u.jsx(_s,{children:u.jsx(Ss,{className:"text-3xl text-festival-blue text-center",children:"Отримання громадянства Республіки Вейву"})}),u.jsxs("div",{className:"mt-6 space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:"🎫"}),u.jsx("p",{className:"text-lg text-muted-foreground",children:"Ласкаво просимо до бажаючих отримати громадянство Республіки Вейву!"})]}),u.jsxs("div",{className:"bg-festival-blue text-white p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold mb-4 text-center",children:"Зверніть увагу!"}),u.jsx("p",{className:"leading-relaxed text-center",children:"Статус громадянина дає великі привілегії, але й великі зобов'язання. Якщо процес видається вам заскладним, значить воно вам і не потрібно."})]}),u.jsxs("div",{className:"bg-festival-yellow/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:"Порядок отримання громадянства"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-festival-blue text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:"1"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Отримання попереднього запрошення"}),u.jsxs("p",{className:"text-muted-foreground text-sm",children:["Республіка Вейву є закритою державною з ретельним добором жителів. Ви не можете просто так взяти і в'їхати у Республіку. Якщо ви ніколи раніше не були у Вейву, вам необхідно отримати попереднє запрошення від одного з громадян.",u.jsx("br",{}),"Громадянин, що вас запрошує, повинен підтвердити свою участь у фестивалі, на який запрошують вас. Зверніть увагу, що один громадянин може запросити лише одного нового жителя.",u.jsx("br",{}),"Станом на 2025-ий рік обов'язкове попереднє анкетування нових жителів Республіки НЕ проводиться.",u.jsx("br",{}),"До отримання громадянства Верховна Ліга Джекесу або Вейвівська Рада Старійшин мають право відмовити вам у в'їзді в будь-який момент без пояснення причин."]})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-festival-blue text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:"2"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Відвідування першого Фестивалю"}),u.jsxs("p",{className:"text-muted-foreground text-sm",children:["Після отримання запрошення і затвердження ВЛД або ВРС ви можете відвідати ваш перший фестиваль. Відвідування першого фестивалю НЕ надає вам громадянство, однак ви отримуєте посвідку на тимчасове проживання та можете брати участь у виборах.",u.jsx("br",{}),"Власники посвідки на тимчасове проживання НЕ можуть запрошувати інших осіб у Респібліку, бути міністрами чи Президентом Республіки."]})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-festival-blue text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:"3"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Проходження стажування"}),u.jsxs("p",{className:"text-muted-foreground text-sm",children:["Для отримання громадянства вам необхідно пройти стажування у одному з міністерств чи управлінь Республіки Вейву. Перелік міністерств можна знайти на сайті Республіки.",u.jsx("br",{}),"Оберіть те міністерство, яке вам найбільше до вподоби, і зверніться до відповідного міністра. На час проходження стажування ви будете вписані у паспорт вашого поручителя (відповідного міністра).",u.jsx("br",{}),"Проходження стажування передбачає працю на благо Республіки і виконання доручень поручителя. Для отримання громадянства поручитель повинен підтвердити ваше успішне проходження стажування."]})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-festival-blue text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:"4"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Відсутність заперечень"}),u.jsx("p",{className:"text-muted-foreground text-sm",children:"Для отримання громадянства важливим є відсутність заперечень з боку діючих громадян Республіки після відвідування вами першого фестивалю. У випадку наявності заперечень, процедура ускладнюється і для отримання громадянства потрібен спеціальний дозвіл ВЛД або ВРС."})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-festival-blue text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:"5"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Відвідування другого Фестивалю"}),u.jsx("p",{className:"text-muted-foreground text-sm",children:"У випадку успішного виконання попередніх умов, ви маєте право на відвідування другого фестивалю. Під час цього фестивалю ви можете отримати громадянство Республіки Вейву."})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-festival-blue text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:"6"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Отримання і валідація паспорта"}),u.jsxs("p",{className:"text-muted-foreground text-sm",children:["Перед відвідуванням вами другого фестивалю ви повинні надати інформацію про себе задля отримання паспорта, а також ваше фото. При в'їзді на другий фестиваль представник міністерства юстиції видасть вам ваш паспорт громадянина Республіки Вейву.",u.jsx("br",{}),"У вашому паспорті буде відмітка про проходження стажування, яку має завірити підписом ваш поручитель."]})]})]})]})]}),u.jsxs("div",{className:"bg-white border-2 border-festival-blue/20 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4 text-center",children:"Ваш паспорт"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-center",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-bold text-festival-blue mb-3",children:"Права громадян"}),u.jsxs("ul",{className:"space-y-2 text-muted-foreground text-sm",children:[u.jsx("li",{children:"✓ Вільний в'їзд у Республіку"}),u.jsx("li",{children:"✓ Право належати до міністерств"}),u.jsx("li",{children:"✓ Право стати міністром або обиратися на посаду Президента"}),u.jsx("li",{children:"✓ Право запрошувати інших осіб у Республіку"}),u.jsx("li",{children:"✓ Право укладати шлюб з іншими громадянами"})]})]}),u.jsx("div",{className:"text-center",children:u.jsxs("div",{className:"bg-festival-blue text-white p-4 rounded-lg transform rotate-3",children:[u.jsx("div",{className:"text-2xl mb-2",children:"🎫"}),u.jsx("div",{className:"text-sm font-bold",children:"ПАСПОРТ ГРОМАДЯНИНА"}),u.jsx("div",{className:"text-xs mt-2",children:"Республіка Вейву"}),u.jsx("div",{className:"text-xs",children:"№ 0001"})]})})]})]}),u.jsxs("div",{className:"bg-festival-yellow/20 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4 text-center",children:"Як бути хорошим жителем"}),u.jsx("div",{className:"bg-white p-6 rounded-lg border border-festival-blue/30",children:u.jsxs("p",{className:"text-center italic leading-relaxed text-muted-foreground",children:["• Підтримуйте атмосферу та вайб Республіки",u.jsx("br",{}),"• Поважайте всіх учасників фестивалю",u.jsx("br",{}),"• Працюйте на благо Республіки, коли у цьому буде потреба",u.jsx("br",{}),"• Вносьте креатив та нові ідеї у функціонування Республіки",u.jsx("br",{}),"• Дотримуйтеся Конституції та іншого законодавства Республіки",u.jsx("br",{}),u.jsx("br",{}),"Хай живе Республіка Вейву!"]})})]}),u.jsxs("div",{className:"bg-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4 text-center",children:"Короткий рекап"}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-3",children:"🎫"}),u.jsx("h4",{className:"font-bold text-festival-blue mb-2",children:"Крок 1"}),u.jsx("p",{className:"text-muted-foreground text-sm",children:"Отримайте запрошення та відвідайте перший фестиваль"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-3",children:"📝"}),u.jsx("h4",{className:"font-bold text-festival-blue mb-2",children:"Крок 2"}),u.jsx("p",{className:"text-muted-foreground text-sm",children:"Пройдіть державне стажування"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-3",children:"🎉"}),u.jsx("h4",{className:"font-bold text-festival-blue mb-2",children:"Крок 3"}),u.jsx("p",{className:"text-muted-foreground text-sm",children:"Відвідайте другий фестиваль"})]})]})]})]})]})]}),AR="/assets/festival-passport-BR-gBYZU.png",MR="/assets/coat-of-arms-wyCvbYJx.png",RR="/assets/flag-weywu-Dx5ia04i.png",LR=()=>{const r=Tn(),{isAuthenticated:e,userProfile:t,signOut:n}=Xr(),[s,i]=b.useState(!0),[o,a]=b.useState(!0),[l,c]=b.useState(0),h=t?o_(t==null?void 0:t.surname,t==null?void 0:t.passport):null;b.useEffect(()=>{const m=()=>{const p=window.scrollY;a(p<110),p<10||p<l?i(!0):i(!1),c(p)};return window.addEventListener("scroll",m,{passive:!0}),()=>window.removeEventListener("scroll",m)},[l]);const d=async()=>{await n(),rn.success("Ви вийшли з системи")},f=[{title:"Міністерство Фінансів",description:"Відповідає за складання бюджету Республіки на кожен поточний звітний рік та збір податків.",icon:"💵",detailedContent:"Міністерство Фінансів курує фінансові аспекти фестивалю, включаючи бюджетування, звітність та контроль витрат. Для забезпечення функціонування держави, необхідним є збір податків з населення Вейву.",responsibilities:["Складання чорновика бюджету Республіки","Розподіл фінансових потоків для державних закупівель","Збір податків з населення","Розподіл надлишку бюджетних надходжень","Добір податків у випадку кризових ситуацій"]},{title:"Міністерство Культури",description:"Координує культурні заходи та творчі майданчики для відвідувачів.",icon:"🎭",detailedContent:"Міністерство Культури розвиває освітню та просвітницьку складову фестивалю. Організовує інтерактивні заходи, що дозволяють відвідувачам не лише споглядати, а й брати активну участь у культурному житті.",responsibilities:["Організація розважальних та освітніх заходів","Координація музичних та театральних виступів","Створення інтерактивних культурних зон","Проведення лекцій та дискусій про мистецтво","Організація виставок та інсталяцій"]},{title:"Міністерство Юстиції",description:"Забезпечує правову ефективність функціонування держави.",icon:"⚖️",detailedContent:"Міністерство Юстиції відповідає за правову базу фестивалю, забезпечуючи тлумачення та дотримання законодавства, а також захист прав жителів.",responsibilities:["Складання чорновиків нормативно-правових актів","Тлумачення законодавства Республіки","Організація виборів Президента Республіки","Проведення соціологічних досліджень серед населення","Забезпечення правової допомоги та консультацій"]},{title:"Міністерство Охорони Здоров'я",description:"Забезпечує запобігання випадкам смерті у Республіці.",icon:"👨‍⚕️",detailedContent:"Міністерство Охорони Здоров'я відповідає за медичне обслуговування жителів Республіки, організовуючи роботу медичних пунктів та забезпечуючи доступ до вакцинації.",responsibilities:["Надання невідкладної медичної допомоги","Забезпечення вакцинації населення","Координація роботи пунктів першої допомоги","Організація профілактичних оглядів","Видалення кліщакуні"]},{title:"Міністерство Енергетики",description:"Забезпечує енергією жителів Республіки у будь-яких її формах .",icon:"⚡",detailedContent:"Міністерство Енергетики відповідає за енергетичну безпеку Республіки, забезпечуючи стабільні постачання дров та інших енергоресурсів, таких як алкоголь.",responsibilities:["Забезпечення дров для населення","Організація локальних зборів алкогольних напоїв","Розливання алкогольних напоїв у випадку нездатності населення зробити це самостійно","Вирішення кризових ситуацій з постачанням алкоголю","Контроль якості алкогольних напоїв"]},{title:"Міністерство Господарства",description:"Відповідає за продовольче забезпечення Республіки до та під час проведення Фестивалю.",icon:"🍲",detailedContent:"Міністерство Господарства забезпечує стабільне постачання продуктів харчування та напоїв для жителів Республіки під час фестивалю.",responsibilities:["Організація постачання продуктів харчування","Координація роботи місцевих виробників продовольства","Надання рецептів та кулінарних порад","Проведення гастрономічних майстер-класів","Приготування традиційних страв Республіки"]},{title:"Міністерство Благоустрою та Охорони Довкілля",description:"Відповідальне за забезпечення екологічної сталості проведення Фестивалю та благоустрій території Республіки",icon:"🏞️",detailedContent:"Міністерство Благоустрою та Охорони Довкілля забезпечує екологічну безпеку та чистоту території Республіки.",responsibilities:["Організація прибирання території Республіки","Забезпечення екологічної безпеки під час фестивалю","Збір унікального сміття з метою його подальшої утилізації","Організація туалетів","Проведення екологічних акцій та заходів"]},{title:"Міністерство Брендингу",description:"Відповідальне за творчу гармонію у Республіці, дизайн державної продукції та промоцію Республіки",icon:"📙",detailedContent:"Міністерство Брендингу формує імідж Республіки у медійному просторі, розробляє дизайн державної продукції.",responsibilities:["Дизайн державних символів та продукції","Надання державної символіки для особистого використання","Координація роботи з журналістами та блогерами","Створення промо-матеріалів та рекламних кампаній","Організація партнерських відносин та спонсорства"]}],g=[{title:"Герб Республіки",description:"Шість жовтих пластикових стаканчиків, нанизаних один на одного",icon:"🛡️",detailedContent:"Герб Республіки Вейву являє собою унікальну композицію, що поєднує в собі символізм вживання алкоголю у простій та чіловій атмосфері. Жовті стаканчики були наявні ще під час першого Фестивалю проголошення Республіки у 2014-му році, а їх число - шість - символізує шість перших громадян-засновників Республіки.",image:MR,downloadFiles:[{url:"/coat-of-arms.jpg",label:"Завантажити JPG",filename:"герб-республіки.jpg"},{url:"/coat-of-arms.pdf",label:"Завантажити PDF",filename:"герб-республіки.pdf"}]},{title:"Прапор Вейву",description:"Біле полотно із зображенням та двома горизонтальними смугами: жовтою та блакитною",icon:"🏴",detailedContent:'Державний прапор Республіки Вейву являє собою біле полотно із зображенням на ньому та написом "WAVEWOO". Зображення символізує древній втрачений прапор Республіки, вперше піднятий ще в 2014-му році. Жовта смуга символізує колір гербу, темно-синя - колір паспорта Республіки Вейву. За свою історію прапор Республіки був змінений двічі. Сучасний дизайн затверджений у 2025-му році.',image:RR,downloadFiles:[{url:"/flag-weywu.jpg",label:"Завантажити JPG",filename:"прапор-вейву.jpg"},{url:"/flag-weywu.pdf",label:"Завантажити PDF",filename:"прапор-вейву.pdf"}]},{title:"Гімн Республіки",description:"Офіційний гімн Республіки Вейву, що виконується на відкритті фестивалю та при офіційних церемоніях",icon:"🎶",detailedContent:`Текст гімну Республіки Вейву:

Куплет
Серед гір могутніх чиста тече ріка
Поміж дерев високих держава розцвіла!

Приспів
Вейву! Вейву! Край сонця й свободи!
Під прапором нашим єднаймось навік!
Усім наливайте, забудем незгоди,
Збиратися будем довік кожен рік!`,audio:"/anthem.mp3"}];return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("div",{className:`fixed top-4 right-4 z-[60] pointer-events-auto transition-all duration-500 ease-in-out ${s?"translate-y-0 opacity-100":"-translate-y-full opacity-0"}`,children:u.jsx("div",{className:`${o?"bg-white/10 border-white/20":"bg-white border-gray-200"} backdrop-blur-sm rounded-lg p-3 shadow-lg transition-colors duration-300`,children:e?u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:`${o?"text-white":"text-gray-800"} text-sm transition-colors duration-300`,children:["Вітаємо, ",u.jsx("span",{className:"font-semibold",children:(h==null?void 0:h.firstName)||(t==null?void 0:t.surname)}),"!"]}),u.jsx(q,{variant:"outline",size:"sm",onClick:()=>r("/cabinet"),className:`${o?"bg-white/10 border-white/30 text-white hover:bg-white/20":"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200"} transition-all duration-300 pointer-events-auto cursor-pointer`,children:"Кабінет"}),u.jsx(q,{variant:"outline",size:"sm",onClick:d,className:`${o?"bg-red-500/20 border-red-300/50 text-white hover:bg-red-500/30":"bg-red-100 border-red-300 text-red-700 hover:bg-red-200"} transition-all duration-300 pointer-events-auto cursor-pointer`,children:u.jsx(Ng,{className:"w-4 h-4"})})]}):u.jsx(q,{variant:"outline",size:"sm",onClick:()=>r("/auth"),className:`${o?"bg-white/10 border-white/30 text-white hover:bg-white/20":"bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200"} transition-all duration-300 pointer-events-auto cursor-pointer`,children:"Вхід для громадян"})})}),u.jsx(TM,{}),u.jsx(NM,{}),u.jsx(Mr,{id:"about",title:"Про Республіку Вейву",backgroundColor:"muted",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[u.jsxs("p",{className:"text-lg text-muted-foreground mb-8 leading-relaxed",children:[u.jsx("strong",{className:"text-festival-blue",children:"Республіка Вейву"})," — це не просто країна, це цілий світ, де чіл, атмосфера та гори об'єднуються в неймовірну симфонію. Тут кожен може знайти щось особливе для себе."]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mt-12",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-6xl text-festival-yellow mb-4",children:"🌲"}),u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-2",children:"Унікальна атмосфера"}),u.jsx("p",{className:"text-muted-foreground",children:"Гори, локальне державотворення та алкоголь надають відпочинку неповторного колориту"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-6xl text-festival-yellow mb-4",children:"🌟"}),u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-2",children:"Свобода самовираження"}),u.jsx("p",{className:"text-muted-foreground",children:"Будьте тими, ким хочете бути. На території Республіки Вейву немає обмежень"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-6xl text-festival-yellow mb-4",children:"🤝"}),u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-2",children:"Спільнота"}),u.jsx("p",{className:"text-muted-foreground",children:"Нові знайомства та дружні зв'язки з мінімумом токсичності"})]})]}),u.jsx("div",{className:"mt-12 text-center",children:u.jsx(q,{variant:"hero",size:"lg",onClick:()=>r("/festival-details"),children:"Більше інформації"})})]})}),u.jsx(Mr,{id:"next-festival",title:"Наступний фестиваль",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[u.jsx("p",{className:"text-lg text-muted-foreground mb-8 leading-relaxed",children:"Готуйтеся до наступного фестивалю! Детальна інформація для громадян Республіки доступна за посиланням нижче."}),u.jsxs("div",{className:"bg-white p-8 rounded-lg border-2 border-festival-blue/10 mb-8",children:[u.jsx("div",{className:"text-6xl text-festival-blue mb-6",children:"🌲🍖🍻"}),u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4",children:"Республіка Вейву 2026"}),u.jsx("p",{className:"text-muted-foreground mb-6",children:"Інформація про дати, локацію та інші важливі оголошення тут:"}),u.jsx(q,{variant:"hero",size:"lg",onClick:()=>r("/next-festival"),children:"Детальна інформація"})]})]})}),u.jsx(Mr,{id:"constitution",title:"Конституція",backgroundColor:"muted",children:u.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[u.jsx("p",{className:"text-lg text-muted-foreground mb-8 leading-relaxed",children:"Конституція Республіки Вейву - документ, що встановлює принципи та правила нашої держави. Тут закріплені права та обов'язки жителів Республіки."}),u.jsxs("div",{className:"bg-white p-8 rounded-lg border-2 border-festival-blue/10 mb-8",children:[u.jsx("div",{className:"text-6xl text-festival-blue mb-6",children:"📜"}),u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4",children:"Конституція Республіки Вейву"}),u.jsx("p",{className:"text-muted-foreground mb-6",children:"Прийнята 23 липня 2021 року Верховною Лігою Джекесу Республіки Вейву"}),u.jsx(PR,{children:u.jsx(q,{variant:"hero",size:"lg",children:"Читати Конституцію"})})]})]})}),u.jsx(Mr,{id:"passport",title:"Паспорт громадянина",children:u.jsx("div",{className:"max-w-5xl mx-auto",children:u.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[u.jsx("div",{children:u.jsx("img",{src:AR,alt:"Паспорт громадянина Республіки Вейву",className:"w-full max-w-md mx-auto rounded-lg shadow-lg border-4 border-festival-yellow"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-3xl font-bold text-festival-blue mb-6",children:"Громадянство Вейву"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-6 leading-relaxed",children:"Громадянство Республіки Вейву посвідчується паспортом Республіки Вейву. Це не просто символічний жест - це ваш пропуск до унікального досвіду."}),u.jsxs("div",{className:"space-y-4 mb-8",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:"🎫"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Право вільного в'їзду"}),u.jsx("p",{className:"text-muted-foreground",children:"Тільки громадяни мають право на в'їзд до Республіки Вейву у будь-який час"})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:"🏆"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Право обиратися та бути обраним"}),u.jsx("p",{className:"text-muted-foreground",children:"Тільки громадяни можуть стати міністрами чи Президентом"})]})]}),u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("span",{className:"text-2xl",children:"1️⃣"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue",children:"Вищість"}),u.jsx("p",{className:"text-muted-foreground",children:"Громадяни Вейву є кращими та вищими за будь-яких інших людей на світі"})]})]})]}),u.jsx(DR,{children:u.jsx(q,{variant:"hero",size:"lg",children:"Порядок отримання громадянства"})})]})]})})}),u.jsxs(Mr,{id:"ministries",title:"Міністерства",backgroundColor:"muted",children:[u.jsxs("p",{className:"text-lg text-muted-foreground text-center mb-6 leading-relaxed",children:["Життя у Республіці - це не тільки права, а й обов'язки. На щастя, тут кожен може знайти своє місце.",u.jsx("br",{}),"Зверніть увагу, що перелік міністерств не є вичерпним. Зверніться до органів влади у випадку наявності питань."]}),u.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map((m,p)=>u.jsx(AM,{title:m.title,description:m.description,icon:m.icon,detailedContent:m.detailedContent,responsibilities:m.responsibilities,children:u.jsx("div",{className:"bg-white border-2 border-festival-blue/10 hover:border-festival-yellow hover:shadow-lg transition-all duration-300 transform hover:scale-105 p-6 rounded-lg cursor-pointer",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl mb-4",children:m.icon}),u.jsx("h3",{className:"text-lg font-bold text-festival-blue mb-3",children:m.title}),u.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed mb-3",children:m.description}),u.jsx("div",{className:"text-festival-yellow font-medium text-sm",children:"Клікніть для деталей →"})]})})},p))})]}),u.jsx(Mr,{id:"symbols",title:"Державні символи",children:u.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:g.map((m,p)=>u.jsx(MM,{title:m.title,description:m.description,icon:m.icon,detailedContent:m.detailedContent,image:m.image,audio:m.audio,children:u.jsxs("div",{className:"text-center cursor-pointer hover:scale-105 transition-transform duration-300 p-6 bg-white rounded-lg border-2 border-transparent hover:border-festival-yellow",children:[u.jsx("div",{className:"text-6xl mb-6",children:m.icon}),u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-4",children:m.title}),u.jsx("p",{className:"text-muted-foreground",children:m.description}),u.jsx("div",{className:"mt-4 text-festival-yellow font-medium",children:"Клікніть для деталей →"})]})},p))})}),u.jsx(Mr,{id:"gallery",title:"Галерея",backgroundColor:"muted",children:u.jsxs("div",{className:"max-w-6xl mx-auto",children:[u.jsxs("p",{className:"text-center text-lg text-muted-foreground mb-12",children:["Перегляньте фотографії з різних років проведення фестивалю.",u.jsx("br",{}),"Увага! Повна галерея (що доступна за посиланням для громадян Республіки) все ще поповнюється і поки включає тільки фото (не відео), які були публічно поширені у організаційних групах. Якшо ви хочете поповнити галерею, зверніться до адміністрації"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-8",children:Array.from({length:12},(m,p)=>{const y=2014+p;return u.jsx(NR,{year:y,children:u.jsx(q,{variant:"outline",className:"h-20 text-lg font-bold border-2 border-festival-blue text-festival-blue hover:bg-festival-blue hover:text-white transition-all duration-300 transform hover:scale-105",children:y})},y)})}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-muted-foreground mb-6",children:"Клікніть на рік, щоб переглянути фотографії з того фестивалю"})})]})}),u.jsx(Mr,{id:"festival-stats",title:"Детальна статистика Фестивалів",backgroundColor:"muted",children:u.jsx("div",{className:"max-w-3xl mx-auto text-center",children:u.jsxs("div",{className:"bg-white p-8 rounded-lg border-2 border-festival-blue/10 mb-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4",children:"Населення, дати, місця, вибори"}),u.jsx(q,{variant:"hero",size:"lg",onClick:()=>r("/festival-stats"),children:"Переглянути статистику"})]})})}),u.jsx("footer",{className:"bg-festival-blue text-white py-12",children:u.jsxs("div",{className:"container mx-auto px-4 text-center",children:[u.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Республіка Вейву"}),u.jsx("p",{className:"text-festival-yellow mb-6",children:"Територія твоєї свободи"}),u.jsxs("div",{className:"flex justify-center space-x-6 text-2xl",children:[u.jsx("span",{className:"cursor-pointer hover:text-festival-yellow transition-colors",children:"📧"}),u.jsx("span",{className:"cursor-pointer hover:text-festival-yellow transition-colors",children:"📱"}),u.jsx("span",{className:"cursor-pointer hover:text-festival-yellow transition-colors",children:"🌐"})]})]})})]})},IR=()=>{const r=Tn();return b.useEffect(()=>{window.scrollTo(0,0)},[]),u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("header",{className:"bg-festival-blue text-white py-6",children:u.jsxs("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[u.jsx(q,{variant:"ghost",onClick:()=>r("/"),className:"text-white hover:text-festival-yellow",children:"← Назад"}),u.jsx("h1",{className:"text-2xl font-bold",children:"Детально про Вейву"})]})}),u.jsx(Mr,{id:"details",title:"Республіка Вейву - історія",children:u.jsx("div",{className:"max-w-4xl mx-auto space-y-8",children:u.jsxs("div",{className:"prose max-w-none",children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4",children:"Кульмінація підліткової креативності"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-6 leading-relaxed",children:"Республіка Вейву (або, як тоді вона називалась, Народна Республіка Вейву) була проголошена 19 серпня 2014 року як протест проти рутинності, типовості та одноманітності. Частково проголошення Республіки було іронічною відповіддю на ситуацію, яка тоді панувала в Україні. Державобудування розпочалося фактично одразу, дозволило надати рутинній поїздці в гори особливого значення та сатисфації, стало квінтенцією локальної креативної самореалізації."}),u.jsxs("div",{className:"bg-muted p-6 rounded-lg mb-8",children:[u.jsx("h4",{className:"text-xl font-bold text-festival-blue mb-4",children:"Ключові віхи розвитку:"}),u.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"2014-2016:"})," Становлення Республіки, початки державобудування"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"2017-2020:"})," Перше позалокальне розширення, становлення перших міністерств"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"2021:"})," Впровадження паспортів громадян, прийняття Конституції, перші вибори Президента Республіки"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"2022:"})," Теракт під час проведення Фестивалю знерухомив половину жителів Республіки"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"2024:"})," Зміни до Конституції, що зміцнили владу Президента. Перехід з парламентської до змішаної форми правління. Друге позалокальне розширення Республіки"]})]})]}),u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4",children:"Сутність Республіки Вейву"}),u.jsx("p",{className:"text-lg text-muted-foreground mb-6 leading-relaxed",children:"Головна мета Республіки Вейву - надати бажаючим можливість унікального ретриту, що поєднує елементи відпочинку, спільної праці та рольової гри. Головним елементом Республіки є Фестиваль Проголошення Республіки, який відбувається щороку влітку, у гірському регіоні поряд з джерелом води та триває три дні."}),u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-4",children:"Особливості Фестивалю"}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white border-2 border-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h4",{className:"text-xl font-bold text-festival-blue mb-3",children:"🔞 Обмежений доступ"}),u.jsx("p",{className:"text-muted-foreground",children:"У зв'язку з частково порочним характером Фестивалю, неповнолітнім особам заборонений в'їзд до Республіки."})]}),u.jsxs("div",{className:"bg-white border-2 border-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h4",{className:"text-xl font-bold text-festival-blue mb-3",children:"🎭 Культурна програма"}),u.jsx("p",{className:"text-muted-foreground",children:"В Республіці всіляко заохочуються музика, танці та театралізовані постанови."})]}),u.jsxs("div",{className:"bg-white border-2 border-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h4",{className:"text-xl font-bold text-festival-blue mb-3",children:"🏕️ Природа"}),u.jsx("p",{className:"text-muted-foreground",children:"Фестиваль покликаний стимулювати втечу від міської рутини, тому відбувається в гірській місцевості, часто де відсутній мобільний зв'язок та інтернет."})]}),u.jsxs("div",{className:"bg-white border-2 border-festival-blue/10 p-6 rounded-lg",children:[u.jsx("h4",{className:"text-xl font-bold text-festival-blue mb-3",children:"🥂 Чіл"}),u.jsx("p",{className:"text-muted-foreground",children:"Алкоголь завжди був важливою частиною Фестивалю і так продовжується до сьогодні. Противникам алкоголю пропонуються і інші засоби гарно провести час."})]})]}),u.jsx("div",{className:"mt-12 text-center",children:u.jsxs("div",{className:"bg-festival-blue text-white p-8 rounded-lg",children:[u.jsx("h3",{className:"text-3xl font-bold mb-4",children:"Впродовж Фестивалів"}),u.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-4xl font-bold text-festival-yellow",children:"50+"}),u.jsx("div",{className:"text-lg",children:"Унікальних відвідувачів"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-4xl font-bold text-festival-yellow",children:"12"}),u.jsx("div",{className:"text-lg",children:"Років"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-4xl font-bold text-festival-yellow",children:"20+"}),u.jsx("div",{className:"text-lg",children:"Активностей"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-4xl font-bold text-festival-yellow",children:"34"}),u.jsx("div",{className:"text-lg",children:"Дні чілу"})]})]})]})})]})})})]})},Rt=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:ve("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));Rt.displayName="Card";const Lt=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:ve("flex flex-col space-y-1.5 p-6",r),...e}));Lt.displayName="CardHeader";const It=b.forwardRef(({className:r,...e},t)=>u.jsx("h3",{ref:t,className:ve("text-2xl font-semibold leading-none tracking-tight",r),...e}));It.displayName="CardTitle";const FR=b.forwardRef(({className:r,...e},t)=>u.jsx("p",{ref:t,className:ve("text-sm text-muted-foreground",r),...e}));FR.displayName="CardDescription";const Ft=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:ve("p-6 pt-0",r),...e}));Ft.displayName="CardContent";const $R=b.forwardRef(({className:r,...e},t)=>u.jsx("div",{ref:t,className:ve("flex items-center p-6 pt-0",r),...e}));$R.displayName="CardFooter";const Ya=b.forwardRef(({className:r,type:e,...t},n)=>u.jsx("input",{type:e,className:ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...t}));Ya.displayName="Input";var zR="Label",W_=b.forwardRef((r,e)=>u.jsx(Me.label,{...r,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=r.onMouseDown)==null||s.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));W_.displayName=zR;var V_=W_;const BR=cl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ga=b.forwardRef(({className:r,...e},t)=>u.jsx(V_,{ref:t,className:ve(BR(),r),...e}));Ga.displayName=V_.displayName;const H_=({children:r,onSuccess:e})=>{const[t,n]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(!1),[l,c]=b.useState(""),[h,d]=b.useState(!1),{signIn:f}=Xr(),g=async p=>{p.preventDefault(),a(!0),c("");try{const y=await f(t,s);y.success?(a(!1),d(!1),n(""),i(""),e()):(a(!1),c(y.error||"Неправильні дані або паспорт недійсний."))}catch{a(!1),c("Помилка входу в систему")}},m=p=>{d(p),p||(n(""),i(""),c(""),a(!1))};return u.jsxs(ii,{open:h,onOpenChange:m,children:[u.jsx(Po,{asChild:!0,children:r}),u.jsxs(bs,{className:"max-w-md",children:[u.jsx(_s,{children:u.jsxs(Ss,{className:"flex items-center gap-3 text-xl text-festival-blue",children:[u.jsx(P1,{className:"w-6 h-6"}),"Доступ обмежено"]})}),u.jsxs("div",{className:"mt-6",children:[u.jsx("div",{className:"bg-festival-yellow/10 p-4 rounded-lg mb-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(yu,{className:"w-5 h-5 text-festival-blue mt-0.5 flex-shrink-0"}),u.jsx("div",{children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"Доступ до цієї сторінки відкритий лише громадянам Республіки. Введіть ваше прізвище, як у паспорті (всі великі букви) та серію і номер паспорту (без пробілу, всі великі букви)."})})]})}),u.jsxs("form",{onSubmit:g,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Ga,{htmlFor:"surname",className:"text-festival-blue font-medium",children:"Прізвище"}),u.jsx(Ya,{id:"surname",type:"text",value:t,onChange:p=>n(p.target.value),placeholder:"Введіть ваше прізвище",required:!0,className:"mt-1",disabled:o})]}),u.jsxs("div",{children:[u.jsx(Ga,{htmlFor:"passport",className:"text-festival-blue font-medium",children:"Серія та номер паспорту"}),u.jsx(Ya,{id:"passport",type:"text",value:s,onChange:p=>i(p.target.value),placeholder:"Введіть серію та номер паспорту",required:!0,className:"mt-1",disabled:o})]}),l&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(yu,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),u.jsx("p",{className:"text-sm text-red-700",children:l})]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx(q,{type:"submit",variant:"hero",disabled:o||!t.trim()||!s.trim(),className:"flex-1",children:o?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Перевірка..."]}):u.jsxs(u.Fragment,{children:[u.jsx(O1,{className:"w-4 h-4 mr-2"}),"Увійти"]})}),u.jsx(q,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:o,children:"Скасувати"})]})]}),u.jsx("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg",children:u.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Доступ надається лише громадянам Республіки з дійсним паспортом."})})]})]})]})},UR=()=>{const r=Tn(),{isAuthenticated:e,loading:t}=Xr(),n=()=>{};return t?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-festival-blue via-festival-blue/90 to-festival-yellow/20 flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin"})}):e?u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("nav",{className:"bg-white border-b border-festival-blue/10 sticky top-0 z-40",children:u.jsx("div",{className:"container mx-auto px-4 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(q,{variant:"ghost",onClick:()=>r("/"),className:"text-festival-blue hover:text-festival-blue/80",children:[u.jsx(vu,{className:"w-4 h-4 mr-2"}),"Назад до головної"]}),u.jsx("h1",{className:"text-xl font-bold text-festival-blue",children:"Наступний фестиваль"}),u.jsx("div",{className:"w-20"})," "]})})}),u.jsx("div",{className:"container mx-auto px-4 py-12",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("div",{className:"text-8xl mb-6",children:"🌲🍖🍻"}),u.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-festival-blue mb-4",children:"Республіка Вейву 2026"}),u.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Інформації про Фестиваль-2026 поки немає. Тільки ж Фестиваль-2025 закінчився."})]}),u.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[u.jsxs(Rt,{className:"border-festival-blue/20",children:[u.jsx(Lt,{children:u.jsxs(It,{className:"flex items-center gap-3 text-festival-blue",children:[u.jsx(Fc,{className:"w-6 h-6"}),"Дата проведення"]})}),u.jsxs(Ft,{children:[u.jsx("p",{className:"text-2xl font-bold text-festival-yellow mb-2",children:"Поки не узгоджено"}),u.jsx("p",{className:"text-muted-foreground",children:"Три дні незабутніх вражень у серці Карпат"})]})]}),u.jsxs(Rt,{className:"border-festival-blue/20",children:[u.jsx(Lt,{children:u.jsxs(It,{className:"flex items-center gap-3 text-festival-blue",children:[u.jsx(zk,{className:"w-6 h-6"}),"Локація"]})}),u.jsxs(Ft,{children:[u.jsx("p",{className:"text-2xl font-bold text-festival-yellow mb-2",children:"Поки не узгоджено"}),u.jsx("p",{className:"text-muted-foreground",children:"Місце проведення Республіки Вейву"}),u.jsx("div",{className:"aspect-w-16 aspect-h-9",children:u.jsx("iframe",{className:"w-full h-full rounded-md border",loading:"lazy",allowFullScreen:!0,src:"https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d20794.270709954388!2d23.51009730764161!3d49.34677610635129!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sua!4v1753967277887!5m2!1sen!2sua&q=Карпати,Україна"})})]})]})]}),u.jsxs(Rt,{className:"mb-8",children:[u.jsx(Lt,{children:u.jsxs(It,{className:"flex items-center gap-3 text-festival-blue",children:[u.jsx(Gk,{className:"w-6 h-6"}),"Важлива інформація для 2026 року"]})}),u.jsx(Ft,{children:u.jsxs("div",{className:"grid md:grid-cols-1 gap-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue mb-2",children:"🎵 1"}),u.jsx("p",{className:"text-muted-foreground mb-4",children:"Буде музика. Детальніше потім"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue mb-2",children:"🏛️ 2"}),u.jsx("p",{className:"text-muted-foreground mb-4",children:"Будуть міністерства. Детальніше потім"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue mb-2",children:"🎪 3"}),u.jsx("p",{className:"text-muted-foreground mb-4",children:"Будуть розваги. Детальніше потім"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-festival-blue mb-2",children:"🌱 4"}),u.jsx("p",{className:"text-muted-foreground mb-4",children:"Буде їжа. Детальніше потім"})]})]})})]}),u.jsxs(Rt,{className:"bg-festival-yellow/10 border-festival-yellow",children:[u.jsx(Lt,{children:u.jsxs(It,{className:"flex items-center gap-3 text-festival-blue",children:[u.jsx(D1,{className:"w-6 h-6"}),"Жителі Республіки"]})}),u.jsxs(Ft,{children:[u.jsx("p",{className:"text-lg mb-4",children:u.jsx("strong",{children:"Перелік майбутніх жителів буде поповнюватися тут"})}),u.jsx("p",{className:"text-muted-foreground mb-6",children:"Набір жителів ще не розпочався"})]})]})]})})]}):u.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:u.jsx("div",{className:"max-w-md w-full p-6",children:u.jsxs(Rt,{children:[u.jsxs(Lt,{className:"text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:"🌲🍖🍻"}),u.jsx(It,{className:"text-2xl text-festival-blue",children:"Наступний фестиваль"}),u.jsx("p",{className:"text-muted-foreground",children:"Доступ до інформації про наступний фестиваль надається лише громадянам Республіки"})]}),u.jsxs(Ft,{children:[u.jsx(H_,{onSuccess:n,children:u.jsx(q,{variant:"hero",className:"w-full",size:"lg",children:"Авторизуватися"})}),u.jsxs(q,{variant:"outline",className:"w-full mt-3",onClick:()=>r("/"),children:[u.jsx(vu,{className:"w-4 h-4 mr-2"}),"Повернутися до головної"]})]})]})})})},WR=()=>{const[r,e]=b.useState(!1),[t,n]=b.useState(null),s={total:[7,6,8,7,10,12,8,16,19,22,26,21],male:[4,3,4,4,6,7,5,11,10,12,11,9],female:[3,3,4,3,4,5,3,5,9,10,15,12]},i=Array.from({length:12},(m,p)=>2014+p),o=Math.max(...s.total);b.useEffect(()=>{const m=setTimeout(()=>e(!0),300);return()=>clearTimeout(m)},[]);const a=(m,p,y)=>y-m/p*y,l=(m,p,y,v)=>{const x=y/(m.length-1);let w="";return m.forEach((_,S)=>{const C=S*x,T=a(_,p,v);S===0?w+=`M ${C} ${T}`:w+=` L ${C} ${T}`}),w},c=800,h=300,d=60,f=c-d*2,g=h-d*2;return u.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-6 text-center",children:"Переписи населення Республіки Вейву"}),u.jsxs("div",{className:"relative",children:[u.jsxs("svg",{width:c,height:h,className:"w-full h-auto",viewBox:`0 0 ${c} ${h}`,children:[u.jsx("defs",{children:u.jsx("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:u.jsx("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"#f0f0f0",strokeWidth:"1"})})}),u.jsx("rect",{width:c,height:h,fill:"url(#grid)",opacity:"0.3"}),u.jsxs("g",{transform:`translate(${d}, ${d})`,children:[u.jsx("path",{d:l(s.total,o,f,g),fill:"none",stroke:"#3b82f6",strokeWidth:"3",strokeDasharray:"1000",strokeDashoffset:r?"0":"1000",style:{transition:"stroke-dashoffset 2s ease-in-out",transitionDelay:"0.2s"}}),u.jsx("path",{d:l(s.male,o,f,g),fill:"none",stroke:"#10b981",strokeWidth:"3",strokeDasharray:"1000",strokeDashoffset:r?"0":"1000",style:{transition:"stroke-dashoffset 2s ease-in-out",transitionDelay:"0.7s"}}),u.jsx("path",{d:l(s.female,o,f,g),fill:"none",stroke:"#f59e0b",strokeWidth:"3",strokeDasharray:"1000",strokeDashoffset:r?"0":"1000",style:{transition:"stroke-dashoffset 2s ease-in-out",transitionDelay:"1.2s"}}),s.total.map((m,p)=>{const y=p*f/(s.total.length-1),v=a(m,o,g),x=a(s.male[p],o,g),w=a(s.female[p],o,g);return u.jsxs("g",{children:[u.jsx("circle",{cx:y,cy:v,r:t===`t-${p}`?"15":"12",fill:"#3b82f6",stroke:"white",strokeWidth:"3",style:{opacity:r?1:0,transition:"r 0.5s ease, opacity 1s ease",transitionDelay:`${p*.1}s`,cursor:"pointer"},onMouseEnter:()=>n(`t-${p}`),onMouseLeave:()=>n(null)}),u.jsx("text",{x:y,y:v+4,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"white",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.1}s`,pointerEvents:"none"},children:m}),u.jsx("circle",{cx:y,cy:x,r:t===`m-${p}`?"15":"12",fill:"#10b981",stroke:"white",strokeWidth:"3",style:{opacity:r?1:0,transition:"r 0.5s ease, opacity 1s ease",transitionDelay:`${p*.1+.5}s`,cursor:"pointer"},onMouseEnter:()=>n(`m-${p}`),onMouseLeave:()=>n(null)}),u.jsx("text",{x:y,y:x+4,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"white",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.1+.5}s`,pointerEvents:"none"},children:s.male[p]}),u.jsx("circle",{cx:y,cy:w,r:t===`f-${p}`?"15":"12",fill:"#f59e0b",stroke:"white",strokeWidth:"3",style:{opacity:r?1:0,transition:"r 0.5s ease, opacity 1s ease",transitionDelay:`${p*.1+1}s`,cursor:"pointer"},onMouseEnter:()=>n(`f-${p}`),onMouseLeave:()=>n(null)}),u.jsx("text",{x:y,y:w+4,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"white",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.1+1}s`,pointerEvents:"none"},children:s.female[p]}),u.jsx("text",{x:y,y:g+20,textAnchor:"middle",fontSize:"12",fill:"#666",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.05+1.5}s`},children:i[p]})]},p)})]}),t&&u.jsxs("g",{children:[u.jsx("rect",{x:10,y:10,width:"200",height:"80",fill:"white",stroke:"#ccc",rx:"5",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}}),u.jsxs("text",{x:20,y:30,fontSize:"14",fontWeight:"bold",fill:"#333",children:[i[parseInt(t.split("-")[1])]," рік"]}),u.jsxs("text",{x:20,y:50,fontSize:"12",fill:"#3b82f6",children:[t.startsWith("t")&&`Загалом: ${s.total[parseInt(t.split("-")[1])]}`,t.startsWith("m")&&`Чоловіки: ${s.male[parseInt(t.split("-")[1])]}`,t.startsWith("f")&&`Жінки: ${s.female[parseInt(t.split("-")[1])]}`]})]})]}),u.jsxs("div",{className:"flex justify-center mt-4 space-x-6",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#3b82f6"}}),u.jsx("span",{className:"text-sm text-gray-600",children:"Загалом"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#10b981"}}),u.jsx("span",{className:"text-sm text-gray-600",children:"Чоловіки"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#f59e0b"}}),u.jsx("span",{className:"text-sm text-gray-600",children:"Жінки"})]})]})]})]})},VR=()=>{const[r,e]=b.useState(!1),[t,n]=b.useState(null),s={citizens:[7,7,8,5,9,12,12,12,14,21,19,26],ptp:[0,2,4,8,5,2,1,5,10,8,18,13],frozen:[0,0,0,3,4,4,4,2,1,0,5,6]},i=Array.from({length:12},(m,p)=>2014+p),o=Math.max(...s.citizens);b.useEffect(()=>{const m=setTimeout(()=>e(!0),300);return()=>clearTimeout(m)},[]);const a=(m,p,y)=>y-m/p*y,l=(m,p,y,v)=>{const x=y/(m.length-1);let w="";return m.forEach((_,S)=>{const C=S*x,T=a(_,p,v);S===0?w+=`M ${C} ${T}`:w+=` L ${C} ${T}`}),w},c=800,h=300,d=60,f=c-d*2,g=h-d*2;return u.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6",children:[u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-6 text-center",children:"Статус населення Республіки Вейву"}),u.jsxs("div",{className:"relative",children:[u.jsxs("svg",{width:c,height:h,className:"w-full h-auto",viewBox:`0 0 ${c} ${h}`,children:[u.jsx("defs",{children:u.jsx("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:u.jsx("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"#f0f0f0",strokeWidth:"1"})})}),u.jsx("rect",{width:c,height:h,fill:"url(#grid)",opacity:"0.3"}),u.jsxs("g",{transform:`translate(${d}, ${d})`,children:[u.jsx("path",{d:l(s.citizens,o,f,g),fill:"none",stroke:"#1e40af",strokeWidth:"3",strokeDasharray:"1000",strokeDashoffset:r?"0":"1000",style:{transition:"stroke-dashoffset 2s ease-in-out",transitionDelay:"0.2s"}}),u.jsx("path",{d:l(s.ptp,o,f,g),fill:"none",stroke:"#3b82f6",strokeWidth:"3",strokeDasharray:"1000",strokeDashoffset:r?"0":"1000",style:{transition:"stroke-dashoffset 2s ease-in-out",transitionDelay:"0.7s"}}),u.jsx("path",{d:l(s.frozen,o,f,g),fill:"none",stroke:"#60a5fa",strokeWidth:"3",strokeDasharray:"1000",strokeDashoffset:r?"0":"1000",style:{transition:"stroke-dashoffset 2s ease-in-out",transitionDelay:"1.2s"}}),s.citizens.map((m,p)=>{const y=p*f/(s.citizens.length-1),v=a(m,o,g),x=a(s.ptp[p],o,g),w=a(s.frozen[p],o,g);return u.jsxs("g",{children:[u.jsx("circle",{cx:y,cy:v,r:t===`c-${p}`?"15":"12",fill:"#1e40af",stroke:"white",strokeWidth:"3",style:{opacity:r?1:0,transition:"r 0.5s ease, opacity 1s ease",transitionDelay:`${p*.1}s`,cursor:"pointer"},onMouseEnter:()=>n(`c-${p}`),onMouseLeave:()=>n(null)}),u.jsx("text",{x:y,y:v+4,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"white",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.1}s`,pointerEvents:"none"},children:m}),u.jsx("circle",{cx:y,cy:x,r:t===`p-${p}`?"15":"12",fill:"#3b82f6",stroke:"white",strokeWidth:"3",style:{opacity:r?1:0,transition:"r 0.5s ease, opacity 1s ease",transitionDelay:`${p*.1+.5}s`,cursor:"pointer"},onMouseEnter:()=>n(`p-${p}`),onMouseLeave:()=>n(null)}),u.jsx("text",{x:y,y:x+4,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"white",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.1+.5}s`,pointerEvents:"none"},children:s.ptp[p]}),u.jsx("circle",{cx:y,cy:w,r:t===`f-${p}`?"15":"12",fill:"#60a5fa",stroke:"white",strokeWidth:"3",style:{opacity:r?1:0,transition:"r 0.5s ease, opacity 1s ease",transitionDelay:`${p*.1+1}s`,cursor:"pointer"},onMouseEnter:()=>n(`f-${p}`),onMouseLeave:()=>n(null)}),u.jsx("text",{x:y,y:w+4,textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"white",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.1+1}s`,pointerEvents:"none"},children:s.frozen[p]}),u.jsx("text",{x:y,y:g+20,textAnchor:"middle",fontSize:"12",fill:"#666",style:{opacity:r?1:0,transition:"opacity 1s ease",transitionDelay:`${p*.05+1.5}s`},children:i[p]})]},p)})]}),t&&u.jsxs("g",{children:[u.jsx("rect",{x:10,y:10,width:"200",height:"80",fill:"white",stroke:"#ccc",rx:"5",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))"}}),u.jsxs("text",{x:20,y:30,fontSize:"14",fontWeight:"bold",fill:"#333",children:[i[parseInt(t.split("-")[1])]," рік"]}),u.jsxs("text",{x:20,y:50,fontSize:"12",fill:"#1e40af",children:[t.startsWith("c")&&`Громадяни: ${s.citizens[parseInt(t.split("-")[1])]}`,t.startsWith("p")&&`ПТП: ${s.ptp[parseInt(t.split("-")[1])]}`,t.startsWith("f")&&`Заморожені: ${s.frozen[parseInt(t.split("-")[1])]}`]})]})]}),u.jsxs("div",{className:"flex justify-center mt-4 space-x-6",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#1e40af"}}),u.jsx("span",{className:"text-sm text-gray-600",children:"Громадяни"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#3b82f6"}}),u.jsx("span",{className:"text-sm text-gray-600",children:"ПТП"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#60a5fa"}}),u.jsx("span",{className:"text-sm text-gray-600",children:"Заморожені"})]})]})]})]})},HR=()=>{const[r,e]=b.useState(null),t=[{period:"2022",name:"Наталія Кіндратів",achievements:"Не прибула на фестиваль правління"},{period:"2023",name:"Юра Бокало",achievements:""},{period:"2024",name:"Назарій Вовків",achievements:""},{period:"2025",name:"Назар Задорожний",achievements:""},{period:"2026",name:"Аліна Ліщук",achievements:""}];return u.jsxs("div",{className:"w-full max-w-5xl mx-auto bg-white rounded-lg shadow-lg p-6 mt-8",children:[u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-6 text-center",children:"Президенти Республіки Вейву"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-festival-blue/10",children:[u.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-festival-blue",children:"Фестиваль правління"}),u.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-festival-blue",children:"Ім'я президента"}),u.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-festival-blue",children:"Примітки"})]})}),u.jsx("tbody",{children:t.map((n,s)=>u.jsxs("tr",{className:`transition-all duration-300 cursor-pointer ${r===s?"bg-festival-yellow/20 shadow-md":"hover:bg-gray-50"}`,onMouseEnter:()=>e(s),onMouseLeave:()=>e(null),style:{fontSize:r===s?"1.05em":"1em",transition:"all 0.3s ease"},children:[u.jsx("td",{className:`border border-gray-300 px-4 py-3 font-medium transition-all duration-300 ${r===s?"text-festival-blue font-bold":"text-gray-700"}`,children:n.period}),u.jsx("td",{className:`border border-gray-300 px-4 py-3 transition-all duration-300 ${r===s?"text-festival-blue font-bold":"text-gray-800"}`,children:n.name}),u.jsx("td",{className:`border border-gray-300 px-4 py-3 transition-all duration-300 ${r===s?"text-gray-800 font-medium":"text-gray-600"}`,children:n.achievements})]},s))})]})}),u.jsx("div",{className:"mt-6 p-4 bg-festival-yellow/10 rounded-lg",children:u.jsx("p",{className:"text-sm text-gray-600 text-center",children:"💡  Якщо ви помітили неточність або помилку, повідомте про неї."})}),r!==null&&u.jsxs("div",{className:"fixed top-1/2 left-2/3 transform -translate-x-1/2 -translate-y-1/2 bg-white border border-gray-300 rounded-lg shadow-lg p-3 z-50 max-w-xs",children:[u.jsx("div",{className:"text-sm font-bold text-festival-blue mb-1",children:t[r].name}),u.jsxs("div",{className:"text-xs text-gray-600",children:["Правив у ",t[r].period]})]})]})},YR=()=>{const[r,e]=b.useState(null),t=[{year:"2014",dates:"19-20 серпня",location:"N 49.096289, E 23.651792",attendees:"7"},{year:"2015",dates:"16-18 серпня",location:"N 49.115933, E 23.466972",attendees:"6"},{year:"2016",dates:"15-17 липня",location:"N 49.087778, E 23.602108",attendees:"8"},{year:"2017",dates:"19-21 серпня",location:"N 49.113008, E 23.574211",attendees:"7"},{year:"2018",dates:"18-19 серпня",location:"N 49.112156, E 23.566372",attendees:"10"},{year:"2019",dates:"16-18 серпня",location:"N 49.138664, E 23.702631",attendees:"12"},{year:"2020",dates:"21-23 серпня",location:"N 49.139411, E 23.702803",attendees:"8"},{year:"2021",dates:"23-25 липня",location:"N 49.128025, E 23.270175",attendees:"16"},{year:"2022",dates:"29-31 липня",location:"N 49.1138573, E 23.2799233",attendees:"19"},{year:"2023",dates:"14-16 липня",location:"N 49.1201488, E 23.2770571",attendees:"22"},{year:"2024",dates:"19-21 липня",location:"N 49.1138573, E 23.2799233",attendees:"26"},{year:"2025",dates:"25-27 липня",location:"N 49.125557, E 23.271227",attendees:"21"}];return u.jsxs("div",{className:"w-full max-w-5xl mx-auto bg-white rounded-lg shadow-lg p-6 mt-8",children:[u.jsx("h3",{className:"text-xl font-bold text-festival-blue mb-6 text-center",children:"Фестивалі Республіки Вейву"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-festival-blue/10",children:[u.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-festival-blue",children:"Рік"}),u.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-festival-blue",children:"Дати"}),u.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-festival-blue",children:"Місце"}),u.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-bold text-festival-blue",children:"Жителів"})]})}),u.jsx("tbody",{children:t.map((n,s)=>u.jsxs("tr",{className:`transition-all duration-300 cursor-pointer ${r===s?"bg-festival-yellow/20 shadow-md":"hover:bg-gray-50"}`,onMouseEnter:()=>e(s),onMouseLeave:()=>e(null),style:{fontSize:r===s?"1.05em":"1em",transition:"all 0.3s ease"},children:[u.jsx("td",{className:`border border-gray-300 px-4 py-3 font-medium transition-all duration-300 ${r===s?"text-festival-blue font-bold":"text-gray-700"}`,children:n.year}),u.jsx("td",{className:`border border-gray-300 px-4 py-3 transition-all duration-300 ${r===s?"text-festival-blue font-bold":"text-gray-800"}`,children:n.dates}),u.jsx("td",{className:`border border-gray-300 px-4 py-3 transition-all duration-300 ${r===s?"text-festival-blue font-bold":"text-gray-800"}`,children:n.location}),u.jsx("td",{className:`border border-gray-300 px-4 py-3 transition-all duration-300 ${r===s?"text-gray-800 font-medium":"text-gray-600"}`,children:n.attendees})]},s))})]})}),u.jsx("div",{className:"mt-6 p-4 bg-festival-yellow/10 rounded-lg",children:u.jsx("p",{className:"text-sm text-gray-600 text-center",children:"💡  Якщо ви помітили неточність або помилку, повідомте про неї."})}),r!==null&&u.jsxs("div",{className:"fixed top-1/2 left-2/3 transform -translate-x-1/2 -translate-y-1/2 bg-white border border-gray-300 rounded-lg shadow-lg p-3 z-50 max-w-xs",children:[u.jsxs("div",{className:"text-sm font-bold text-festival-blue mb-1",children:["Фестиваль ",t[r].year]}),u.jsxs("div",{className:"text-xs text-gray-600",children:[t[r].dates&&`Дати: ${t[r].dates}`,t[r].location&&` | Локація: ${t[r].location}`]})]})]})},GR=({users:r,year:e,title:t,showPassport:n=!0,showStatus:s=!0,showCitizenship:i=!1,className:o=""})=>{const a=b.useMemo(()=>r.filter(h=>h.attendance?h.attendance.split(", ").includes(e):!1).sort((h,d)=>h.surname.localeCompare(d.surname)),[r,e]),l=b.useMemo(()=>{const h=a.length,d=a.filter(m=>m.citStatus==="Дійсне").length,f=a.filter(m=>m.citStatus==="Заморожене").length,g=a.filter(m=>m.citStatus==="Недійсне").length;return{total:h,active:d,frozen:f,inactive:g}},[a]),c=(h,d)=>{if(!h.attendance)return 0;const g=h.attendance.split(", ").map(m=>m.trim()).filter(Boolean).indexOf(d);return g===-1?0:g+1};return a.length===0?u.jsxs("div",{className:`bg-gray-50 border border-gray-200 rounded-lg p-8 text-center ${o}`,children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:t||`Фестиваль ${e}`}),u.jsx("p",{className:"text-gray-500",children:"Немає даних про відвідувачів за цей рік"})]}):u.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm ${o}`,children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t||`Фестиваль ${e}`}),u.jsxs("div",{className:"mt-2 flex gap-6 text-sm text-gray-600",children:[u.jsxs("span",{children:["Всього: ",u.jsx("strong",{className:"text-gray-900",children:l.total})]}),u.jsxs("span",{children:["Дійсні: ",u.jsx("strong",{className:"text-green-600",children:l.active})]}),l.frozen>0&&u.jsxs("span",{children:["Заморожені: ",u.jsx("strong",{className:"text-orange-600",children:l.frozen})]}),l.inactive>0&&u.jsxs("span",{children:["Негромадяни: ",u.jsx("strong",{className:"text-red-600",children:l.inactive})]})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"№"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Прізвище"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ім'я"}),n&&u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Паспорт"}),s&&u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Посада"}),i&&u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ЗРАЗОК"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Громадянство"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Примітки"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((h,d)=>{const f=c(h,e);return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:d+1}),u.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:h.surname}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:h.firstName}),n&&u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:h.passport}),s&&u.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.status}),i&&u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:h.citizenshipDate}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${h.citStatus==="Дійсне"?"bg-green-100 text-green-800":(h==null?void 0:h.citStatus)==="Недійсне"?"bg-red-100 text-red-800":(h==null?void 0:h.citStatus)==="Довічне"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:h.citStatus})}),u.jsxs("td",{className:"px-6 py-4 text-center",children:[f===1&&u.jsx("span",{className:"text-lg",children:"1️⃣"}),f===2&&u.jsx("span",{className:"text-lg",children:"2️⃣"})]})]},h.passport)})})]})}),u.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:["Дані відсортовані за прізвищем • Оновлено: ",new Date().toLocaleDateString("uk-UA")]})]})},XR=({year:r,title:e,showPassport:t=!1,showStatus:n=!0,showCitizenship:s=!1})=>{const i=i_;return u.jsx("div",{className:"space-y-8 p-0 max-w-7xl mx-auto",children:u.jsx(GR,{users:i,year:r,title:e,showPassport:t,showStatus:n,showCitizenship:s})})},qR=({data:r,title:e="Результати виборів",showPercentages:t=!0,showVoteCount:n=!0,height:s="auto",animationDelay:i=100,year:o})=>{const[a,l]=b.useState(null),h=o&&{2014:7,2015:6,2016:8,2017:7,2018:10,2019:12,2020:8,2021:16,2022:19,2023:22,2024:26,2025:21}[o]||0,d=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#F97316"],f=[...r].sort((x,w)=>w.votes-x.votes).map((x,w)=>({...x,color:x.color||d[w%d.length]})),g=f.reduce((x,w)=>x+w.votes,0),m=Math.max(...f.map(x=>x.votes)),p=h>0?(g/h*100).toFixed(1):"0.0",y=x=>g>0?(x/g*100).toFixed(1):"0.0",v=x=>m>0?x/m*100:0;return u.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6",style:{height:s},children:[u.jsx("h3",{className:"text-2xl font-bold text-festival-blue mb-6 text-center",children:e}),u.jsx("div",{className:"mb-6 p-3 bg-festival-blue/5 rounded-lg",children:u.jsx("div",{className:"text-center text-festival-blue font-medium",children:u.jsxs("p",{children:["Загальна кількість голосів: ",u.jsx("span",{className:"font-bold",children:g.toLocaleString()}),h>0&&u.jsxs(u.Fragment,{children:[" з ",u.jsx("span",{className:"font-bold",children:h})," жителів ",u.jsxs("span",{className:"text-lg font-bold",children:["(Явка ",p,"%)"]})]})]})})}),u.jsx("div",{className:"space-y-4",children:f.map((x,w)=>u.jsxs("div",{className:"relative group",onMouseEnter:()=>l(w),onMouseLeave:()=>l(null),style:{animationDelay:`${w*i}ms`,animation:"slideIn 0.6s ease-out forwards"},children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:x.color}}),u.jsx("span",{className:"font-medium text-gray-800",children:x.candidate})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[n&&u.jsx("span",{className:"text-sm font-medium text-gray-600",children:x.votes.toLocaleString()}),t&&u.jsxs("span",{className:"text-lg font-bold text-festival-blue",children:[y(x.votes),"%"]})]})]}),u.jsxs("div",{className:"relative bg-gray-200 rounded-full h-8 overflow-hidden",children:[u.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${a===w?"shadow-lg":""}`,style:{backgroundColor:x.color,width:`${v(x.votes)}%`,transform:a===w?"scaleY(1.1)":"scaleY(1)",filter:a===w?"brightness(1.1)":"brightness(1)"}}),a===w&&u.jsx("div",{className:"absolute inset-0 bg-white/10 rounded-full"})]}),u.jsx("div",{className:`absolute -left-2 top-1/2 transform -translate-y-1/2 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg ${w===0?"bg-yellow-500":w===1?"bg-gray-400":w===2?"bg-amber-600":"bg-gray-500"}`,children:w+1})]},`${x.candidate}-${w}`))}),u.jsx("div",{className:"mt-6 p-4 bg-festival-yellow/10 rounded-lg",children:u.jsx("p",{className:"text-sm text-gray-600 text-center",children:"📊 Кандидати відсортовані за кількістю отриманих голосів"})}),a!==null&&u.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white border border-gray-300 rounded-lg shadow-xl p-4 z-50 max-w-xs pointer-events-none",children:[u.jsx("div",{className:"text-lg font-bold text-festival-blue mb-2",children:f[a].candidate}),f[a].party&&u.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Міністерство: ",f[a].party]}),u.jsxs("div",{className:"text-sm text-gray-800",children:[u.jsxs("div",{children:["Голосів: ",u.jsx("span",{className:"font-bold",children:f[a].votes.toLocaleString()})]}),u.jsxs("div",{children:["Відсоток: ",u.jsxs("span",{className:"font-bold",children:[y(f[a].votes),"%"]})]}),u.jsxs("div",{children:["Позиція: ",u.jsxs("span",{className:"font-bold",children:["#",a+1]})]}),h>0&&u.jsx("div",{className:"mt-1 pt-1 border-t border-gray-200",children:u.jsxs("div",{className:"text-xs text-gray-600",children:["Явка: ",p,"% (",g,"/",h,")"]})})]})]}),u.jsx("style",{children:`
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateX(-20px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
      `})]})},KR=()=>{var f;const r=Tn(),{isAuthenticated:e,loading:t}=Xr(),[n,s]=b.useState(null),[i,o]=b.useState(!1),a=g=>{const m=U_(g);return!m||m.length===0?"":m[Math.floor(Math.random()*m.length)].src},l={2021:[{candidate:"Наталія Кіндратів",votes:5,party:"ЗМІ",color:"#3B82F6"},{candidate:"Дмитро Гнатків",votes:4,party:"Управління флоту",color:"#EF4444"},{candidate:"Назарій Вовків",votes:3,party:"Енергетики",color:"#10B981"},{candidate:"Назар Задорожний",votes:1,party:"Юстиції",color:"#F59E0B"}],2022:[{candidate:"Юра Бокало",votes:9,party:"Господарства",color:"#EF4444"},{candidate:"Назар Задорожний",votes:7,party:"Юстиції",color:"#10B981"},{candidate:"Віталій Ковальчук",votes:2,party:"Закордонних справ",color:"#F59E0B"}],2023:[{candidate:"Назарій Вовків",votes:12,party:"Енергетики",color:"#10B981"},{candidate:"Наталя Нижник",votes:9,party:"Господарства",color:"#8B5CF6"}],2024:[{candidate:"Назар Задорожний",votes:19,party:"Юстиції",color:"#F97316"},{candidate:"Аліна Ліщук",votes:4,party:"Енергетики",color:"#6B7280"}],2025:[{candidate:"Аліна Ліщук",votes:9,party:"Енергетики",color:"#EC4899"},{candidate:"Світлана Петрук",votes:8,party:"Фінансів",color:"#8B5CF6"},{candidate:"НЕДІЙСНІ ГОЛОСИ",votes:1,party:"НЕДІЙСНІ ГОЛОСИ",color:"#10B981"}]},c={2014:{image:a(2014),title:"Детальна інформація про фестиваль: 2014",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>19-20 СЕРПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Перший фестиваль в історії. Проголошення Республіки Вейву відбулося саме на цьому Фестивалі.</li>
          <li>Вже на першому Фестивалі були визначені такі ознаки Республіки як прапор, герб, міністерства, міністри та Верховна Ліга Джекесу.</li>
          <li>Вже на першому Фестивалі була здійснена спроба державного перевороту та викрадення державної скарбниці, що була подавлена правоохоронними органами.</li>
        </ul>
      `},2015:{image:a(2015),title:"Детальна інформація про фестиваль: 2015",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>16-18 СЕРПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Наразі це Фестиваль з найменшою кількістю учасників, що є наслідком локального розколу у Республіці 2015-го року.</li>
          <li>Задля добирання до місця проведення Фестивалю необхідно було переїхати через річку.
        </ul>
      `},2016:{image:a(2016),title:"Детальна інформація про фестиваль: 2016",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>15-17 ЛИПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>На цьому Фестивалі відбувся відомий інцидент з викраденням автомобіля міністра юстиції, що спричинив політичне напруження у Республіці.</li>
        </ul>
      `},2017:{image:a(2017),title:"Детальна інформація про фестиваль: 2017",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>19-21 СЕРПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Новозапрошені жителі планували здійснити державний переворот у Республіці,
          що мало стати вже другою спробою такого перевороту за чотири роки, однак передумали через захоплення тим, як добре функціонувала держава.</li>
        </ul>
      `},2018:{image:a(2018),title:"Детальна інформація про фестиваль: 2018",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>18-19 СЕРПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>З певних причин з цього Фестивалю фактично відсутні медіаматеріали.</li>
          <li>Цей Фестиваль став одним з небагатьох і останнім станом на сьогодні, що тривав два дні, а не три.</li>
          <li>На цьому Фестивалі відбувся відомий "Голий нічний забіг", внаслідок якого було загублено пляшку горілки та тапочок.</li>
        </ul>
      `},2019:{image:a(2019),title:"Детальна інформація про фестиваль: 2019",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>16-18 СЕРПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>На цьому Фестивалі була запроваджена традиція відкриття Фестивалю та підняття прапору новими жителями Республіки.</li>
          <li>На цьому Фестивалі майже була порушена стаття 13 Конституції Республіки Вейву.</li>
        </ul>
      `},2020:{image:a(2020),title:"Детальна інформація про фестиваль: 2020",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>21-23 СЕРПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Цей Фестиваль - один з небагатьох, на якому відбулося зменшення кількості жителів.</li>
          <li>На цьому Фестивалі ЗНОВУ майже була порушена стаття 13 Конституції Республіки Вейву.</li>
        </ul>
      `},2021:{image:a(2021),title:"Детальна інформація про фестиваль: 2021",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>23-25 ЛИПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>На цьому Фестивалі вперше були впроваджені паспорти Республіки Вейву.</li>
          <li>На цьому Фестивалі була попередньо затверджена Конституція Республіки Вейву.</li>
          <li>На цьому Фестивалі була впроваджена посада Президента Республіки Вейву та вперше були проведені вибори Президента Республіки Вейву.</li>
          <li>Це єдиний Фестиваль, на якому під час виборів голоси отримав кандидат, що зняв свою кандидатуру. Частково це пояснюється тодішньою версією
          Конституції, згідно з якою ім'я кандидата залишалося в бюлетені навіть після його зняття з виборів.</li>
        </ul>
      `},2022:{image:a(2022),title:"Детальна інформація про фестиваль: 2022",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><br /><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>29-31 ЛИПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Саме на цьому Фестивалі відбувся відомий терористичний акт, який знерухомив близько половини населення Республіки. Експерти часто зазначають,
          що програш у виборах міністра юстиції міг бути пов'язаним з чутками про його причетність до цього акту.</li>
        </ul>
      `},2023:{image:a(2023),title:"Детальна інформація про фестиваль: 2023",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>14-16 ЛИПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Фестиваль 2023-го року ознаменувався дуже активним політичним сезоном. Звинувачення (як багато хто зазначає, безпідставні) кампанії заступниці
          міністра господарства у спробах державного перевороту могли повпливати на кінцевий результат виборів.</li>
        </ul>
      `},2024:{image:a(2024),title:"Детальна інформація про фестиваль: 2024",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>19-21 ЛИПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Політичний сезон 2024-го року виявився ще активнішим, ніж попереднього. Ключовими проблемами, що турбували населення Республіки, були 
          побоювання щодо неконтрольованої імміграції. Саме жорстка позиція міністра юстиції та його віце-президента з цього питання, як зазначають
          експерти, допомогла йому здобути рішучу перемогу. Тим не менше, вже після виборів деякі журналісти вказували на можливість неформальних 
          контактів між кандидатами перед виборами, що спричинило скандал.</li>
        </ul>
      `},2025:{image:a(2025),title:"Детальна інформація про фестиваль: 2025",content:"<span style='font-size: 1.5em; font-weight: bold;'>Дати фестивалю: </span><span style='font-size: 1.5em; font-weight: bold; color: red; text-decoration: underline;'>25-27 ЛИПНЯ</span>",details:`
        <span style='font-size: 1.5em; font-weight: bold;'>Особливості фестивалю: </span> <br /><br />
        <ul style="padding-left: 1.5em; list-style-type: disc;">
          <li>Політичний сезон 2025-го року видався спокійнішим. Тим не менше, популістична політика поточної адміністрації щодо впровадження 
          дискурсу стосовно ролі міністерства Господарства підігріла градус напруги. Результат виборів був найближчим з 2021-го року. Один бюлетень
          було визнано недійсним комісією з підрахунку голосів.</li>
        </ul>
      `}};b.useEffect(()=>{window.scrollTo(0,0)},[]);const h=()=>{},d=g=>{s(g),o(!0)};return t?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-festival-blue via-festival-blue/90 to-festival-yellow/20 flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 border-4 border-white/30 border-t-white rounded-full animate-spin"})}):e?u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("header",{className:"bg-festival-blue text-white py-6",children:u.jsxs("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[u.jsx(q,{variant:"ghost",onClick:()=>r("/"),className:"text-white hover:text-festival-yellow",children:"← Назад"}),u.jsx("h1",{className:"text-2xl font-bold",children:"Детальна статистика фестивалів"})]})}),u.jsx(Mr,{id:"stats",title:"Статистика всіх фестивалів",children:u.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx(WR,{}),u.jsx("br",{}),u.jsx("br",{}),u.jsx(VR,{}),u.jsx("br",{}),u.jsx(YR,{}),u.jsx("br",{}),u.jsx(HR,{}),u.jsx("br",{}),u.jsx("br",{}),u.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"Нижче зібрана детальна інформація про всі проведені фестивалі проголошення Республіки Вейву. Натисніть на відповідну кнопку, щоб переглянути статистику конкретного року."})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 max-w-3xl mx-auto",children:Array.from({length:12},(g,m)=>{const p=2014+m;return u.jsx(q,{variant:"outline",size:"lg",onClick:()=>d(p),className:"h-16 text-lg font-bold border-2 border-festival-blue text-festival-blue hover:bg-festival-blue hover:text-white transition-all duration-300",children:p},m)})}),u.jsx("div",{className:"mt-8 p-6 bg-festival-yellow/10 rounded-lg",children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"💡 Кожна кнопка відкриває нове вікно з детальною статистикою відповідного року. Дані оновлюються регулярно відповідними міністерствами."})})]})}),u.jsx(ii,{open:i,onOpenChange:o,children:u.jsxs(bs,{className:"max-w-4xl",children:[u.jsx(_s,{children:u.jsx(Ss,{className:"text-2xl text-festival-blue",children:n&&((f=c[n])==null?void 0:f.title)})}),n&&c[n]&&u.jsx("div",{className:"max-h-[70vh] overflow-y-auto p-4 sm:p-4",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("img",{src:c[n].image,alt:`Статистика ${n}`,className:"w-full h-96 object-cover rounded-lg"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"text-muted-foreground leading-relaxed w-full overflow-x-auto",children:n&&c[n]&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-4 text-muted-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:c[n].content}}),u.jsx(XR,{year:n.toString(),title:`${n} - відвідувачі. Усі дані поточні, а не станом на фестиваль.`}),n>=2021&&l[n]&&u.jsx("div",{className:"mt-6",children:u.jsx(qR,{data:l[n],title:`Результати виборів президента ${n}`,showPercentages:!0,showVoteCount:!0,year:n.toString()})})]})}),u.jsx("div",{className:"text-muted-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:c[n].details}}),u.jsx("div",{className:"bg-festival-yellow/10 p-4 rounded-lg",children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"💡  Якщо ви помітили неточність або помилку, повідомте про неї."})})]})]})})]})})]}):u.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:u.jsx("div",{className:"max-w-md w-full p-6",children:u.jsxs(Rt,{children:[u.jsxs(Lt,{className:"text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:"📊"}),u.jsx(It,{className:"text-2xl text-festival-blue",children:"Детальна статистика"}),u.jsx("p",{className:"text-muted-foreground",children:"Доступ до детальної статистики надається лише громадянам Республіки"})]}),u.jsxs(Ft,{children:[u.jsx(H_,{onSuccess:h,children:u.jsx(q,{variant:"hero",className:"w-full",size:"lg",children:"Авторизуватися"})}),u.jsxs(q,{variant:"outline",className:"w-full mt-3",onClick:()=>r("/"),children:[u.jsx(vu,{className:"w-4 h-4 mr-2"}),"Повернутися до головної"]})]})]})})})},QR=cl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function vp({className:r,variant:e,...t}){return u.jsx("div",{className:ve(QR({variant:e}),r),...t})}const JR=[{passport:"НС0001",photoUrl:"/passportphotos/НС0001.png",altText:"Паспортне фото"},{passport:"НС0002",photoUrl:"/passportphotos/НС0002.png",altText:"Паспортне фото"},{passport:"НС0005",photoUrl:"/passportphotos/НС0005.png",altText:"Паспортне фото"},{passport:"НС0006",photoUrl:"/passportphotos/НС0006.png",altText:"Паспортне фото"},{passport:"НС0007",photoUrl:"/passportphotos/НС0007.png",altText:"Паспортне фото"},{passport:"ВС0004",photoUrl:"/passportphotos/ВС0004.png",altText:"Паспортне фото"},{passport:"ВС0005",photoUrl:"/passportphotos/ВС0005.png",altText:"Паспортне фото"},{passport:"ЛБ0001",photoUrl:"/passportphotos/ЛБ0001.png",altText:"Паспортне фото"},{passport:"ЛБ0002",photoUrl:"/passportphotos/ЛБ0002.png",altText:"Паспортне фото"},{passport:"МЙ0002",photoUrl:"/passportphotos/МЙ0002.png",altText:"Паспортне фото"},{passport:"МЙ0003",photoUrl:"/passportphotos/МЙ0003.png",altText:"Паспортне фото"},{passport:"МЙ0004",photoUrl:"/passportphotos/МЙ0004.png",altText:"Паспортне фото"},{passport:"МЙ0005",photoUrl:"/passportphotos/МЙ0005.png",altText:"Паспортне фото"},{passport:"МЙ0006",photoUrl:"/passportphotos/МЙ0006.png",altText:"Паспортне фото"},{passport:"МЙ0007",photoUrl:"/passportphotos/МЙ0007.png",altText:"Паспортне фото"},{passport:"МЙ0008",photoUrl:"/passportphotos/МЙ0008.png",altText:"Паспортне фото"},{passport:"МЙ0009",photoUrl:"/passportphotos/МЙ0009.png",altText:"Паспортне фото"},{passport:"МЙ0010",photoUrl:"/passportphotos/МЙ0010.png",altText:"Паспортне фото"},{passport:"МЙ0012",photoUrl:"/passportphotos/МЙ0012.png",altText:"Паспортне фото"},{passport:"МЙ0013",photoUrl:"/passportphotos/МЙ0013.png",altText:"Паспортне фото"},{passport:"МЙ0014",photoUrl:"/passportphotos/МЙ0014.png",altText:"Паспортне фото"},{passport:"МЙ0016",photoUrl:"/passportphotos/МЙ0016.png",altText:"Паспортне фото"},{passport:"МЙ0017",photoUrl:"/passportphotos/МЙ0017.png",altText:"Паспортне фото"},{passport:"МЙ0018",photoUrl:"/passportphotos/МЙ0018.png",altText:"Паспортне фото"},{passport:"МЙ0019",photoUrl:"/passportphotos/МЙ0019.png",altText:"Паспортне фото"},{passport:"МЙ0020",photoUrl:"/passportphotos/МЙ0020.png",altText:"Паспортне фото"},{passport:"МЙ0021",photoUrl:"/passportphotos/МЙ0021.png",altText:"Паспортне фото"},{passport:"МЙ0004А",photoUrl:"/passportphotos/МЙ0004А.png",altText:"Паспортне фото"}],ZR=r=>{const e=JR.find(t=>t.passport===r);return e?e.photoUrl:null},e5=()=>{const{user:r,userProfile:e,signOut:t,loading:n}=Xr(),s=Tn(),[i,o]=b.useState(!1);if(n||!e)return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-festival-blue via-festival-blue/90 to-festival-yellow/20 flex items-center justify-center",children:u.jsx("div",{className:"text-white text-xl",children:"Завантаження... Якщо довго нічого не відбувається, оновіть сторінку"})});const a=e?o_(e==null?void 0:e.surname,e==null?void 0:e.passport):null,l=g=>Xi==null?void 0:Xi.find(m=>m.passport===g.trim()),c=e?ZR(e.passport):null,d=e!=null&&e.passport?i_.filter(g=>{if(!g.internship)return!1;const m=g.internship.split(", ");return m.length>=3&&m[2]===e.passport}).sort((g,m)=>{var v,x;const p=parseInt(((v=g.internship)==null?void 0:v.split(", ")[0])||"0"),y=parseInt(((x=m.internship)==null?void 0:x.split(", ")[0])||"0");return p-y}):[],f=async()=>{await t(),s("/")};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-festival-blue via-festival-blue/90 to-festival-yellow/20",children:[u.jsx("nav",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:u.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Особистий кабінет"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs(q,{variant:"outline",onClick:()=>s("/"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:[u.jsx(N1,{className:"w-4 h-4 mr-2"}),"Головна"]}),u.jsx(q,{variant:"outline",onClick:f,className:"bg-red-500/20 border-red-300/50 text-white hover:bg-red-500/30",children:u.jsx(Ng,{className:"w-4 h-4"})})]})]})}),u.jsx("div",{className:"container mx-auto px-4 py-8",children:u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsxs(Rt,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[u.jsx(Lt,{children:u.jsxs(It,{className:"flex items-center gap-3 text-white text-2xl",children:[u.jsx($0,{className:"w-8 h-8"}),"Республіка вітає вас, ",(a==null?void 0:a.firstName)||(e==null?void 0:e.surname),"!"]})}),u.jsxs(Ft,{className:"text-white/90",children:[u.jsx("p",{className:"text-lg mb-4",children:"Ви увійшли та можете користуватися всіма можливостями сайту."}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs(vp,{variant:"secondary",className:"bg-festival-yellow text-festival-blue font-semibold",children:[u.jsx(Hk,{className:"w-4 h-5 mr-2"}),"Громадянин Республіки Вейву"]}),u.jsx("br",{}),u.jsx("br",{})]}),(a==null?void 0:a.citStatus)==="Заморожене"&&u.jsxs("div",{className:"bg-red-500/30 border border-red-500/50 text-white text-md font-semibold p-4 rounded-lg text-center",children:["УВАГА! ВАШЕ ГРОМАДЯНСТВО ЗАМОРОЖЕНЕ!",u.jsx("br",{}),"Швидше за все, так сталося, бо ви не були присутніми принаймні на трьох останніх фестивалях. Зверніть увагу, що якщо ви будете відсутні на п'яти останніх фестивалях, ваше громадянство та ваш паспорт втратять силу."]})]})]}),u.jsxs(Rt,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[u.jsx(Lt,{children:u.jsx(It,{className:"text-white text-xl",children:"Ваш електронний паспорт:"})}),u.jsxs(Ft,{className:"space-y-6",children:[u.jsx("div",{className:"flex justify-left mb-6",children:u.jsx("div",{className:"relative",children:u.jsx("div",{className:"w-32 h-42 bg-white/10 border-2 border-white/30 rounded-lg overflow-hidden shadow-lg",children:c?u.jsx("img",{src:c,alt:"Паспортне фото",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(Nk,{className:"w-8 h-8 text-white/50"})})})})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-medium",children:"Прізвище"}),u.jsx("p",{className:"text-white text-lg font-semibold mt-1",children:e==null?void 0:e.surname})]}),(a==null?void 0:a.firstName)&&u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-medium",children:"Ім'я"}),u.jsx("p",{className:"text-white text-lg font-semibold mt-1",children:a.firstName})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-medium",children:"Серія та номер паспорту"}),u.jsx("p",{className:"text-white text-lg font-semibold mt-1",children:e==null?void 0:e.passport})]}),(a==null?void 0:a.status)&&u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx(Ok,{className:"w-4 h-4"}),"Статус у республіці"]}),u.jsx("p",{className:"text-festival-yellow text-lg font-semibold mt-1",children:a.status})]}),(a==null?void 0:a.birthDate)&&u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx(Fc,{className:"w-4 h-4"}),"Дата народження"]}),u.jsx("p",{className:"text-white text-lg mt-1",children:new Date(a.birthDate).toLocaleDateString("uk-UA")})]}),(a==null?void 0:a.citizenshipDate)&&u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx(Fc,{className:"w-4 h-4"}),"Дата отримання громадянства"]}),u.jsx("p",{className:"text-white text-lg mt-1",children:new Date(a.citizenshipDate).toLocaleDateString("uk-UA")})]}),(a==null?void 0:a.passportDate)&&u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx(Lk,{className:"w-4 h-4"}),"Дата видачі паспорту"]}),u.jsx("p",{className:"text-white text-lg mt-1",children:new Date(a.passportDate).toLocaleDateString("uk-UA")})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx(Fk,{className:"w-4 h-4"}),"Сімейний стан"]}),u.jsx("p",{className:"text-white text-lg mt-1",children:a!=null&&a.maritalStatus?(()=>{const[g,m]=a.maritalStatus.split("; "),p=l(g);return`Шлюб з ${(p==null?void 0:p.firstName)||""} ${(p==null?void 0:p.surname)||""} (паспорт ${g}), зареєстровано ${new Date(m).toLocaleDateString("uk-UA")}`})():"Вільний"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-white/70 text-sm font-medium",children:"Статус громадянства"}),u.jsx("p",{className:`text-lg font-semibold mt-1 ${(a==null?void 0:a.citStatus)==="Заморожене"?"text-red-400":"text-green-300"}`,children:(a==null?void 0:a.citStatus)||"Дійсне"})]})]})]})]}),u.jsxs(Rt,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[u.jsx(Lt,{children:u.jsx(It,{className:"text-white text-xl",children:"Стажування"})}),u.jsxs(Ft,{children:[a!=null&&a.internship?(()=>{if(a.internship==="Непотрібне")return u.jsx("div",{className:"bg-green-500/20 border border-green-500/40 text-white text-lg font-semibold p-4 rounded-lg text-center mb-6",children:"🎉 Ви отримали громадянство до впровадження інституту стажування, тому вам не довелося його проходити. Пишайтесь цим!"});const g=a.internship.split(", "),m=g[0],p=g[1],y=g[2],v=y?l(y):null;return u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx(Fc,{className:"w-4 h-4"}),"Рік стажування"]}),u.jsx("p",{className:"text-white text-lg font-semibold mt-1",children:m})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx(Vk,{className:"w-4 h-4"}),"Міністерство"]}),u.jsx("p",{className:"text-white text-lg font-semibold mt-1",children:p})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-white/70 text-sm font-medium flex items-center gap-2",children:[u.jsx($0,{className:"w-4 h-4"}),"Поручитель"]}),u.jsx("p",{className:`text-lg font-semibold mt-1 ${y?"text-white":"text-red-400"}`,children:y?`${(v==null?void 0:v.firstName)||""} ${v==null?void 0:v.surname}`:"Поручитель не має дійсного паспорта нового зразка"})]})]})})():u.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/40 text-white text-lg p-4 rounded-lg text-center mb-6",children:"Інформація про ваше стажування відсутня у державних реєстрах. Повідомте державні органи, якщо це помилка"}),u.jsx("div",{className:"w-full",children:u.jsxs(q,{variant:"outline",onClick:()=>o(!i),className:"w-full bg-white/10 border-white/30 text-white hover:bg-white/20 h-auto py-4 flex items-center justify-center gap-2",children:[u.jsx(D1,{className:"w-5 h-5"}),u.jsx("span",{className:"font-semibold",children:"Мої стажери"}),i?u.jsx(Mk,{className:"w-4 h-4"}):u.jsx(Pk,{className:"w-4 h-4"})]})}),i&&u.jsx("div",{className:"mt-6 space-y-4",children:d.length>0?u.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4",children:[u.jsx("h4",{className:"text-white text-lg font-semibold mb-4",children:"Ваші минулі стажери:"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-white",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/20",children:[u.jsx("th",{className:"text-left py-2 px-3 text-white/70 font-medium",children:"Ім'я та прізвище"}),u.jsx("th",{className:"text-left py-2 px-3 text-white/70 font-medium",children:"Рік стажування"}),u.jsx("th",{className:"text-left py-2 px-3 text-white/70 font-medium",children:"Статус громадянства"})]})}),u.jsx("tbody",{children:d.map((g,m)=>{var v;const y=(((v=g.internship)==null?void 0:v.split(", "))||[])[0]||"Невідомо";return u.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[u.jsxs("td",{className:"py-3 px-3 font-medium",children:[g.firstName," ",g.surname]}),u.jsx("td",{className:"py-3 px-3",children:y}),u.jsx("td",{className:"py-3 px-3",children:u.jsx("span",{className:`font-semibold ${g.citStatus==="Дійсне"?"text-green-300":g.citStatus==="Заморожене"?"text-yellow-300":"text-red-300"}`,children:g.citStatus||"Невідомо"})})]},m)})})]})})]}):u.jsx("div",{className:"bg-blue-500/20 border border-blue-500/40 text-white text-lg p-4 rounded-lg text-center",children:"У вас поки що не було стажерів. Не бійтеся брати на стажування осіб, у яких бачите потенціал!"})})]})]}),u.jsxs(Rt,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[u.jsx(Lt,{children:u.jsx(It,{className:"text-white text-xl",children:"Відвідування фестивалів"})}),u.jsx(Ft,{children:u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-4",children:Array.from({length:new Date().getFullYear()-2014+1},(g,m)=>{var x;const p=2014+m,v=(((x=a==null?void 0:a.attendance)==null?void 0:x.split(",").map(w=>w.trim()))||[]).includes(p.toString());return u.jsxs("div",{onClick:()=>s("/festival-stats"),className:`
                        relative group
                        text-white text-center py-2 rounded-lg transition-all duration-200 ease-in-out cursor-pointer
                        ${v?"bg-green-500/30 hover:bg-green-500/50":"bg-red-500/30 hover:bg-red-500/50"}
                        transform hover:scale-105
                      `,children:[p,u.jsx("div",{className:`
                        absolute -bottom-10 left-1/2 -translate-x-1/2 w-max px-3 py-1 rounded-md text-sm
                        ${v?"bg-green-500/30 text-white":"bg-red-500/30 text-white"}
                        opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-200
                        backdrop-blur-sm border border-white/20 z-10
                      `,children:v?"Відвідав\\ла":"Не відвідав\\ла"})]},p)})})})]}),u.jsxs(Rt,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[u.jsx(Lt,{children:u.jsx(It,{className:"text-white text-xl",children:"Швидкі дії"})}),u.jsxs(Ft,{children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[u.jsxs(q,{variant:"outline",onClick:()=>window.open("https://drive.google.com/drive/folders/1ExoCiVnXA2f50CPw060moGFx7kC3sBJw?usp=drive_link"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20 h-auto py-4 flex-col gap-2",children:[u.jsx("span",{className:"font-semibold",children:"Повна галерея"}),u.jsx("span",{className:"text-sm opacity-80",children:"Переглянути фото"})]}),u.jsxs(q,{variant:"outline",onClick:()=>s("/next-festival"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20 h-auto py-4 flex-col gap-2",children:[u.jsx("span",{className:"font-semibold",children:"Наступний фестиваль"}),u.jsx("span",{className:"text-sm opacity-80",children:"Інформація про подію"})]}),u.jsxs(q,{variant:"outline",onClick:()=>s("/festival-stats"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20 h-auto py-4 flex-col gap-2",children:[u.jsx("span",{className:"font-semibold",children:"Статистика"}),u.jsx("span",{className:"text-sm opacity-80",children:"Детальні дані"})]})]}),u.jsx("div",{className:"w-full",children:u.jsxs(q,{variant:"outline",onClick:()=>s("/whiteboard"),className:"w-full bg-white/10 border-white/30 text-white hover:bg-white/20 h-auto py-4 flex-col gap-2",children:[u.jsx("span",{className:"font-semibold",children:"Спільна дошка"}),u.jsx("span",{className:"text-sm opacity-80",children:"Діліться ідеями і малюнками"})]})})]})]})]})})]})};function j(r,e,t){return(e=function(n){var s=function(i,o){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var l=a.call(i,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(n,"string");return typeof s=="symbol"?s:s+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Wv(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function k(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wv(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wv(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ce(r,e){if(r==null)return{};var t,n,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(r,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)t=i[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(s[t]=r[t])}return s}function qr(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}class Vv{constructor(){j(this,"browserShadowBlurConstant",1),j(this,"DPI",96),j(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),j(this,"perfLimitSizeTotal",2097152),j(this,"maxCacheSideLimit",4096),j(this,"minCacheSideLimit",256),j(this,"disableStyleCopyPaste",!1),j(this,"enableGLFiltering",!0),j(this,"textureSize",4096),j(this,"forceGLPutImageData",!1),j(this,"cachesBoundsOfCurve",!1),j(this,"fontPaths",{}),j(this,"NUM_FRACTION_DIGITS",4)}}const oe=new class extends Vv{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=k(k({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>{delete this.fontPaths[r]})}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new Vv,t=(r==null?void 0:r.reduce((n,s)=>(n[s]=e[s],n),{}))||e;this.configure(t)}},gs=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[r]("fabric",...t)};class Br extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class t5 extends Br{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class r5{}class n5 extends r5{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,n),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),gs("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const s5={};let Hv;const Yr=()=>Hv||(Hv={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new n5,dispose(){},copyPasteData:s5}),Do=()=>Yr().document,Th=()=>Yr().window,Y_=()=>{var r;return Math.max((r=oe.devicePixelRatio)!==null&&r!==void 0?r:Th().devicePixelRatio,1)},ya=new class{constructor(){j(this,"charWidthsCache",{}),j(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:n}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=oe,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},yp="6.7.1";function Uc(){}const ml=Math.PI/2,Eu=2*Math.PI,Jg=Math.PI/180,gt=Object.freeze([1,0,0,1,0,0]),Zg=16,Ln=.4477152502,te="center",he="left",kt="top",xp="bottom",Pe="right",Tt="none",em=/\r?\n/,G_="moving",Eh="scaling",X_="rotating",tm="rotate",q_="skewing",Xa="resizing",i5="modifyPoly",o5="modifyPath",Ou="changed",Oh="scale",Ot="scaleX",ir="scaleY",Ao="skewX",Mo="skewY",ze="fill",Et="stroke",Nu="modified",wi="json",Fd="svg",W=new class{constructor(){this[wi]=new Map,this[Fd]=new Map}has(r){return this[wi].has(r)}getClass(r){const e=this[wi].get(r);if(!e)throw new Br("No class registered for ".concat(r));return e}setClass(r,e){e?this[wi].set(e,r):(this[wi].set(r.type,r),this[wi].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[Fd].get(r)}setSVGClass(r,e){this[Fd].set(e??r.type.toLowerCase(),r)}},Pu=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach(e=>e.abort()),r}cancelByCanvas(r){if(!r)return[];const e=this.filter(t=>{var n;return t.target===r||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===r});return e.forEach(t=>t.abort()),e}cancelByTarget(r){if(!r)return[];const e=this.filter(t=>t.target===r);return e.forEach(t=>t.abort()),e}};class a5{constructor(){j(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[s,i]=n;this.on(s,i)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(s=>{let[i,o]=s;n.push(this.once(i,o))}),()=>n.forEach(s=>s())}if(t){const n=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],s=n.indexOf(t);s>-1&&n.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[s,i]=n;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}}const Ci=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},_n=r=>{if(r===0)return 1;switch(Math.abs(r)/ml){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},Sn=r=>{if(r===0)return 0;const e=r/ml,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class P{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new P(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new P(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new P(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new P(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new P(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new P(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new P(this.x/e.x,this.y/e.y)}scalarDivide(e){return new P(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new P(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new P(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new P(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new P(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rm;const n=Sn(e),s=_n(e),i=this.subtract(t);return new P(i.x*s-i.y*n,i.x*n+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new P(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const rm=new P(0,0),Wc=r=>!!r&&Array.isArray(r._objects);function K_(r){class e extends r{constructor(){super(...arguments),j(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(n,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const n=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=n.indexOf(l);c!==-1&&(n.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(n){this.getObjects().forEach((s,i,o)=>n(s,i,o))}getObjects(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(n,!0))}complexity(){return this._objects.reduce((n,s)=>n+=s.complexity?s.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(Ci(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(Ci(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==0){const o=this.findNewLowerIndex(n,i,s);return Ci(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(n,i,s);return Ci(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(Ci(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(n,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(n){let{left:s,top:i,width:o,height:a}=n,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],h=new P(s,i),d=h.add(new P(o,a));for(let f=this._objects.length-1;f>=0;f--){const g=this._objects[f];g.selectable&&g.visible&&(l&&g.intersectsWithRect(h,d)||g.isContainedWithinRect(h,d)||l&&g.containsPoint(h)||l&&g.containsPoint(d))&&c.push(g)}return c}}return e}class Q_ extends a5{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Vc(r){return Th().requestAnimationFrame(r)}function l5(r){return Th().cancelAnimationFrame(r)}let c5=0;const ms=()=>c5++,Cn=()=>{const r=Do().createElement("canvas");if(!r||r.getContext===void 0)throw new Br("Failed to create `canvas` element");return r},u5=()=>Do().createElement("img"),or=r=>{const e=Cn();return e.width=r.width,e.height=r.height,e},J_=(r,e,t)=>r.toDataURL("image/".concat(e),t),Z_=(r,e,t)=>new Promise((n,s)=>{r.toBlob(n,"image/".concat(e),t)}),Ae=r=>r*Jg,jn=r=>r/Jg,h5=r=>r.every((e,t)=>e===gt[t]),xt=(r,e,t)=>new P(r).transform(e,t),wr=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:n,y:s}=new P(r[4],r[5]).transform(t,!0);return t[4]=-n,t[5]=-s,t},Ke=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],nm=(r,e)=>r.reduceRight((t,n)=>n&&t?Ke(n,t,e):n||t,void 0)||gt.concat(),e2=r=>{let[e,t]=r;return Math.atan2(t,e)},Du=r=>{const e=e2(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(t),s=(r[0]*r[3]-r[2]*r[1])/n,i=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:jn(e),scaleX:n,scaleY:s,skewX:jn(i),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},vl=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ro(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Ae(r),s=_n(n),i=Sn(n);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const sm=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},t2=r=>Math.tan(Ae(r)),r2=r=>[1,0,t2(r),1,0,0],n2=r=>[1,t2(r),0,1,0,0],Nh=r=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=r,a=sm(n?-e:e,s?-t:t);return i&&(a=Ke(a,r2(i),!0)),o&&(a=Ke(a,n2(o),!0)),a},d5=r=>{const{translateX:e=0,translateY:t=0,angle:n=0}=r;let s=vl(e,t);n&&(s=Ke(s,Ro({angle:n})));const i=Nh(r);return h5(i)||(s=Ke(s,i)),s},Hc=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,s){if(e&&e.aborted)return s(new t5("loadImage"));const i=u5();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),n(i)};r?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new Br("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=r):a()})},qa=function(r){let{signal:e,reviver:t=Uc}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(r.map(o=>W.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),i.push(a),a)))).then(n).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Ph=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const s=[];e&&e.addEventListener("abort",n,{once:!0});const i=Object.values(r).map(a=>a&&a.type&&W.has(a.type)?qa([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(r);Promise.all(i).then(a=>a.reduce((l,c,h)=>(l[o[h]]=c,l),{})).then(t).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),n(a)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},Lo=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in r&&(e[t]=r[t]),e),{})},im=(r,e)=>Object.keys(r).reduce((t,n)=>(e(r[n],n,r)&&(t[n]=r[n]),t),{}),ge=(r,e)=>parseFloat(Number(r).toFixed(e)),Ka=r=>"matrix("+r.map(e=>ge(e,oe.NUM_FRACTION_DIGITS)).join(" ")+")",Jt=r=>!!r&&r.toLive!==void 0,Yv=r=>!!r&&typeof r.toObject=="function",Gv=r=>!!r&&r.offsetX!==void 0&&"source"in r,Ds=r=>!!r&&"multiSelectionStacking"in r;function s2(r){const e=r&&xr(r);let t=0,n=0;if(!r||!e)return{left:t,top:n};let s=r;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:n}}const xr=r=>r.ownerDocument||null,i2=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},o2=function(r,e,t){let{width:n,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=s,i>1&&(r.setAttribute("width",(n*i).toString()),r.setAttribute("height",(s*i).toString()),e.scale(i,i))},wp=(r,e)=>{let{width:t,height:n}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function Xv(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=Tt,r}class a2{constructor(e){j(this,"_originalCanvasStyle",void 0),j(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&Do().getElementById(e)||Cn();var n;if(t.hasAttribute("data-fabric"))throw new Br("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:s}=this.lower;o2(n,s,e,t)}setCSSDimensions(e){wp(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&xr(e),s={left:0,top:0};if(!n)return s;const i=((t=i2(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=n.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=s2(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){Yr().dispose(this.lower.el),delete this.lower}}const f5={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...gt]};class yl extends K_(Q_){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return yl.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new a2(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const i=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(gs("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Y_():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=k({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,s=[...this.viewportTransform],i=xt(e,wr(s));s[0]=t,s[3]=t;const o=xt(i,s);s[4]+=n.x-o.x,s[5]+=n.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new P(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new P(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Vc(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=wr(this.viewportTransform),s=xt({x:0,y:0},n),i=xt({x:e,y:t},n),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new P(a.x,o.y),bl:new P(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(l5(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,s=t.length;n<s;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!n&&!s)return;const a=Jt(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?n.toLive(e):n,o&&e.transform(...i),a){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const l=n.gradientTransform||n.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new P(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new P(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new P(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new P(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new P(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return xt(this.getCenterPoint(),wr(this.viewportTransform))}_centerObject(e,t){e.setXY(t,te,te),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return k(k(k({version:yp},Lo(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,n){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const n={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Jt(o)?o.excludeFromExport||(n.background=o.toObject(t)):o&&(n.background=o),Jt(a)?a.excludeFromExport||(n.overlay=a.toObject(t)):a&&(n.overlay=a),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=oe.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(ge(-l[4]/l[0],i)," ").concat(ge(-l[5]/l[3],i)," ").concat(ge(this.width/l[0],i)," ").concat(ge(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",yp,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(ms()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Jt(t)){const n=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return t.toSVG(i,{additionalTransform:n?Ka(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=oe.fontPaths;this._objects.forEach(function i(o){e.push(o),Wc(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=i;!t[l]&&n[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(h=>{let{fontFamily:d=""}=h;!t[d]&&n[d]&&(t[d]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(n[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Jt(n)){const s=n.repeat||"",i=this.width,o=this.height,a=this["".concat(t,"Vpt")]?Ka(wr(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(n.offsetX-i/2,'" y="').concat(n.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Gv(n)?i:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Gv(n)?o:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Br("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:h}=s,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([qa(i,{reviver:t,signal:n}),Ph({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:h},{signal:n})]).then(f=>{let[g,m]=f;return this.clear(),this.add(...g),this.set(s),this.set(m),this.renderOnAddRemove=d,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=or(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return J_(this.toCanvasElement(o,e),t,n)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return Z_(this.toCanvasElement(o,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(n||this.height)*e,c=this.getZoom(),h=this.width,d=this.height,f=this.skipControlsDrawing,g=c*e,m=this.viewportTransform,p=[g,0,0,g,(m[4]-(s||0))*e,(m[5]-(i||0))*e],y=this.enableRetinaScaling,v=or({width:a,height:l}),x=o?this._objects.filter(w=>o(w)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(v.getContext("2d"),x),this.viewportTransform=m,this.width=h,this.height=d,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=f,v}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Pu.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}j(yl,"ownDefaults",f5);const p5=["touchstart","touchmove","touchend"],g5=r=>{const e=s2(r.target),t=function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n}(r);return new P(t.clientX+e.left,t.clientY+e.top)},bp=r=>p5.includes(r.type)||r.pointerType==="touch",qv=r=>{r.preventDefault(),r.stopPropagation()},gn=r=>{let e=0,t=0,n=0,s=0;for(let i=0,o=r.length;i<o;i++){const{x:a,y:l}=r[i];(a>n||!i)&&(n=a),(a<e||!i)&&(e=a),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:n-e,height:s-t}},m5=["translateX","translateY","scaleX","scaleY"],v5=(r,e)=>Au(r,Ke(e,r.calcOwnMatrix())),Au=(r,e)=>{const t=Du(e),{translateX:n,translateY:s,scaleX:i,scaleY:o}=t,a=Ce(t,m5),l=new P(n,s);r.flipX=!1,r.flipY=!1,Object.assign(r,a),r.set({scaleX:i,scaleY:o}),r.setPositionByOrigin(l,te,te)},y5=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},l2=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),om=(r,e,t)=>{const n=r/2,s=e/2,i=[new P(-n,-s),new P(n,-s),new P(-n,s),new P(n,s)].map(a=>a.transform(t)),o=gn(i);return new P(o.width,o.height)},Dh=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gt;return Ke(wr(arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt),r)},Ki=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gt;return r.transform(Dh(e,t))},x5=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gt;return r.transform(Dh(e,t),!0)},w5=(r,e,t)=>{const n=Dh(e,t);return Au(r,Ke(n,r.calcOwnMatrix())),n},c2=(r,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(r),k(k({},e),{},{target:n})),n.fire(r,e)},b5={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Re=r=>typeof r=="string"?b5[r]:r-.5,Mu="not-allowed";function u2(r){return Re(r.originX)===Re(te)&&Re(r.originY)===Re(te)}function Kv(r){return .5-Re(r)}const Cr=(r,e)=>r[e],h2=(r,e,t,n)=>({e:r,transform:e,pointer:new P(t,n)});function d2(r,e){const t=r.getTotalAngle()+jn(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function am(r,e,t,n,s){var i;let{target:o,corner:a}=r;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,h=o.padding/c,d=function(f,g,m,p){const y=f.getRelativeCenterPoint(),v=m!==void 0&&p!==void 0?f.translateToGivenOrigin(y,te,te,m,p):new P(f.left,f.top);return(f.angle?g.rotate(-Ae(f.angle),y):g).subtract(v)}(o,new P(n,s),e,t);return d.x>=h&&(d.x-=h),d.x<=-h&&(d.x+=h),d.y>=h&&(d.y-=h),d.y<=h&&(d.y+=h),d.x-=l.offsetX,d.y-=l.offsetY,d}const _5=(r,e,t,n)=>{const{target:s,offsetX:i,offsetY:o}=e,a=t-i,l=n-o,c=!Cr(s,"lockMovementX")&&s.left!==a,h=!Cr(s,"lockMovementY")&&s.top!==l;return c&&s.set(he,a),h&&s.set(kt,l),(c||h)&&c2(G_,h2(r,e,t,n)),c||h},Qv={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},$d=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),Jv=(r,e,t,n)=>{r/=255,e/=255,t/=255;const s=Math.max(r,e,t),i=Math.min(r,e,t);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case r:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-r)/c+2;break;case t:o=(r-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),n]},Zv=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},Zl=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),ey=r=>{let[e,t,n,s=1]=r;const i=Math.round(.3*e+.59*t+.11*n);return[i,i,i,s]};class ue{constructor(e){if(j(this,"isUnrecognised",!1),e)if(e instanceof ue)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,s,i=1]=e;this.setSource([t,n,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Qv&&(e=Qv[e]),e==="transparent"?[255,255,255,0]:ue.sourceFromHex(e)||ue.sourceFromRgb(e)||ue.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Jv(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,s]=Jv(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,s]=this.getSource();return"".concat(Zl(e)).concat(Zl(t)).concat(Zl(n)).concat(Zl(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(ey(this.getSource())),this}toBlackWhite(e){const[t,,,n]=ey(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(e){e instanceof ue||(e=new ue(e));const t=this.getSource(),n=e.getSource(),[s,i,o]=t.map((a,l)=>Math.round(.5*a+.5*n[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return ue.fromRgba(e)}static fromRgba(e){return new ue(ue.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,s,i]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[n,s,i,Zv(t[4])]}}static fromHsl(e){return ue.fromHsla(e)}static fromHsla(e){return new ue(ue.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(ue.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,h=2*i-c;o=$d(h,c,n+1/3),a=$d(h,c,n),l=$d(h,c,n-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),Zv(t[4])]}static fromHex(e){return new ue(ue.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,a=255]=n.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?jn(n):t.includes("turn")?360*n:n}}const Qi=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zg;const t=/\D{0,2}$/.exec(r),n=parseFloat(r),s=oe.DPI;switch(t==null?void 0:t[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*e;default:return n}},S5=r=>{const[e,t]=r.trim().split(" "),[n,s]=(i=e)&&i!==Tt?[i.slice(1,4),i.slice(5,8)]:i===Tt?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:n,alignY:s}},Qa=function(r,e){let t,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new ue(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(n=o.toString())}else t="none";return s?"".concat(r,": ").concat(t,"; ").concat(n?"".concat(r,"-opacity: ").concat(n,"; "):""):"".concat(r,'="').concat(t,'" ').concat(n?"".concat(r,'-opacity="').concat(n,'" '):"")};class f2{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Tt,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",h=this.visible?"":" visibility: hidden;",d=e?"":this.getSvgFilter(),f=Qa(ze,this.fill);return[Qa(Et,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",t,"; ","opacity: ",c,";",d,h].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Ka(n));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,d=this.stroke,f=this.fill,g=this.shadow,m=[],p=e.indexOf("COMMON_PARTS");let y;l&&(l.clipPathId="CLIPPATH_".concat(ms()),y='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(n),`</clipPath>
`)),h&&m.push("<g ",a,this.getSvgCommons(),` >
`),m.push("<g ",this.getSvgTransform(!1),h?"":a+this.getSvgCommons(),` >
`);const v=[o,c,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[p]=v,Jt(f)&&m.push(f.toSVG(this)),Jt(d)&&m.push(d.toSVG(this)),g&&m.push(g.toSVG(this)),l&&m.push(y),m.push(e.join("")),m.push(`</g>
`),h&&m.push(`</g>
`),n?n(m.join("")):m.join("")}addPaintOrder(){return this.paintFirst!==ze?' paint-order="'.concat(this.paintFirst,'" '):""}}function Ah(r){return new RegExp("^("+r.join("|")+")\\b","i")}const ei="textDecorationThickness",p2=["fontSize","fontWeight","fontFamily","fontStyle"],g2=["underline","overline","linethrough"],m2=[...p2,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],v2=[...m2,...g2,"textBackgroundColor","direction",ei],C5=[...p2,...g2,Et,"strokeWidth",ze,"deltaY","textBackgroundColor",ei],j5={_reNewline:em,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:he,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:he,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[ei]:66.667},zr="justify",Ru="justify-left",xa="justify-right",wa="justify-center";var ty,ry,ny;const br=String.raw(ty||(ty=qr(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),zd=String.raw(ry||(ry=qr(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),k5=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+br+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+br+"))?\\s+(.*)"),T5={cx:he,x:he,r:"radius",cy:kt,y:kt,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":ei},Bd="font-size",Ud="clip-path";Ah(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Ah(["symbol","image","marker","pattern","view","svg"]);const sy=Ah(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(ny||(ny=qr(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),br,zd,br,zd,br,zd,br));const E5=new P(1,0),y2=new P,x2=(r,e)=>r.rotate(e),_p=(r,e)=>new P(e).subtract(r),Sp=r=>r.distanceFrom(y2),Cp=(r,e)=>Math.atan2(ba(r,e),N5(r,e)),O5=r=>Cp(E5,r),lm=r=>r.eq(y2)?r:r.scalarDivide(Sp(r)),w2=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return lm(new P(-r.y,r.x).scalarMultiply(e?1:-1))},ba=(r,e)=>r.x*e.y-r.y*e.x,N5=(r,e)=>r.x*e.x+r.y*e.y,iy=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const n=ba(e,t),s=ba(e,r),i=ba(t,r);return n>=0?s>=0&&i<=0:!(s<=0&&i>=0)},oy="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",ay=new RegExp("(?:\\s|^)"+oy+oy+"("+br+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Vr{constructor(e){const t=typeof e=="string"?Vr.parseShadow(e):e;Object.assign(this,Vr.ownDefaults,t),this.id=ms()}static parseShadow(e){const t=e.trim(),[,n=0,s=0,i=0]=(ay.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(ay,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=x2(new P(this.offsetX,this.offsetY),Ae(-e.angle)),n=new ue(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*ge((Math.abs(t.x)+this.blur)/e.width,oe.NUM_FRACTION_DIGITS)+20,i=100*ge((Math.abs(t.y)+this.blur)/e.height,oe.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(ge(this.blur?this.blur/2:0,oe.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(ge(t.x,oe.NUM_FRACTION_DIGITS),'" dy="').concat(ge(t.y,oe.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Vr.ownDefaults;return this.includeDefaultValues?e:im(e,(n,s)=>n!==t[s])}static async fromObject(e){return new this(e)}}j(Vr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),j(Vr,"type","shadow"),W.setClass(Vr,"shadow");const wo=(r,e,t)=>Math.max(r,Math.min(e,t)),P5=[kt,he,Ot,ir,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Ao,Mo],En=[ze,Et,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],D5={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:he,originY:kt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:ze,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},A5=(r,e,t,n)=>-t*Math.cos(r/n*ml)+t+e,M5=()=>!1;class cm{constructor(e){let{startValue:t,byValue:n,duration:s=500,delay:i=0,easing:o=A5,onStart:a=Uc,onChange:l=Uc,onComplete:c=Uc,abort:h=M5,target:d}=e;j(this,"_state","pending"),j(this,"durationProgress",0),j(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=h,this.target=d,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Vc(e),this.delay):Vc(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:i}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Vc(this.tick)))}register(){Pu.push(this)}unregister(){Pu.remove(this)}abort(){this._state="aborted",this.unregister()}}const R5=["startValue","endValue"];class L5 extends cm{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(k(k({},Ce(e,R5)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const I5=["startValue","endValue"];class F5 extends cm{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(k(k({},Ce(e,I5)),{},{startValue:t,byValue:n.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((n,s)=>this.easing(e,n,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const $5=["startValue","endValue","easing","onChange","onComplete","abort"],z5=(r,e,t,n)=>e+t*(1-Math.cos(r/n*ml)),Wd=r=>r&&((e,t,n)=>r(new ue(e).toRgba(),t,n));class B5 extends cm{constructor(e){let{startValue:t,endValue:n,easing:s=z5,onChange:i,onComplete:o,abort:a}=e,l=Ce(e,$5);const c=new ue(t).getSource(),h=new ue(n).getSource();super(k(k({},l),{},{startValue:c,byValue:h.map((d,f)=>d-c[f]),easing:s,onChange:Wd(i),onComplete:Wd(o),abort:Wd(a)}))}calculate(e){const[t,n,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,n,s].map(Math.round),wo(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function b2(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new F5(r):new L5(r);return e.start(),e}function U5(r){const e=new B5(r);return e.start(),e}class je{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const i=_p(t,n),o=_p(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const n=new P(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,n);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,n,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=s.x-n.x,h=s.y-n.y,d=e.x-n.x,f=e.y-n.y,g=c*f-h*d,m=a*f-l*d,p=h*a-c*l;if(p!==0){const y=g/p,v=m/p;return(i||0<=y&&y<=1)&&(o||0<=v&&v<=1)?new je("Intersection").append(new P(e.x+y*a,e.y+y*l)):new je}if(g===0||m===0){const y=i||o||je.isPointContained(e,n,s)||je.isPointContained(t,n,s)||je.isPointContained(n,e,t)||je.isPointContained(s,e,t);return new je(y?"Coincident":void 0)}return new je("Parallel")}static intersectSegmentLine(e,t,n,s){return je.intersectLineLine(e,t,n,s,!1,!0)}static intersectSegmentSegment(e,t,n,s){return je.intersectLineLine(e,t,n,s,!1,!1)}static intersectLinePolygon(e,t,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new je,o=n.length;for(let a,l,c,h=0;h<o;h++){if(a=n[h],l=n[(h+1)%o],c=je.intersectLineLine(e,t,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,n){return je.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new je,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=je.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(i.push(c),n.append(a,l)):n.append(...c.points)}return i.length>0&&i.length===e.length?new je("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const s=t.min(n),i=t.max(n),o=new P(i.x,s.y),a=new P(s.x,i.y);return je.intersectPolygonPolygon(e,[s,o,i,a])}}class W5 extends Q_{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?xt(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=xt(e,wr(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new P(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,n,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>xt(a,o))}return i}intersectsWithRect(e,t){return je.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=je.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:s,width:i,height:o}=this.getBoundingRect();return n>=e.x&&n+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return je.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return gn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Ot,e),this._set(ir,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?jn(e2(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||gt.concat()}calcACoords(){const e=Ro({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),s=vl(t,n),i=Ke(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:xt({x:-a,y:-l},i),tr:xt({x:a,y:-l},i),bl:xt({x:-a,y:l},i),br:xt({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Re(this.originX),Re(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===n[o])?s.value:(this.group&&(t=Ke(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=d5(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new P(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let s=n,i=0;this.strokeUniform&&(s=0,i=n);const o=t.width+s,a=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new P(o*t.scaleX,a*t.scaleY):om(o,a,Nh(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,n,s,i){let o=e.x,a=e.y;const l=Re(s)-Re(t),c=Re(i)-Re(n);if(l||c){const h=this._getTransformedDimensions();o+=l*h.x,a+=c*h.y}return new P(o,a)}translateToCenterPoint(e,t,n){if(t===te&&n===te)return e;const s=this.translateToGivenOrigin(e,t,n,te,te);return this.angle?s.rotate(Ae(this.angle),e):s}translateToOriginPoint(e,t,n){const s=this.translateToGivenOrigin(e,te,te,t,n);return this.angle?s.rotate(Ae(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?xt(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new P(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const s=this.translateToCenterPoint(e,t,n),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),he,kt)}}const V5=["type"],H5=["extraParam"];let en=class Yc extends W5{static getDefaults(){return Yc.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){gs("warn","Setting type has no effect",e)}constructor(e){super(),j(this,"_cacheContext",null),Object.assign(this,Yc.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=Cn(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,s=oe.maxCacheSideLimit,i=oe.minCacheSideLimit;if(t<=s&&n<=s&&t*n<=oe.perfLimitSizeTotal)return t<i&&(e.width=i),n<i&&(e.height=i),e;const o=t/n,[a,l]=ya.limitDimsByArea(o),c=wo(i,a,s),h=wo(i,l,s);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),n>h&&(e.zoomY/=n/h,e.height=h,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:n,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:s,zoomX:i,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=n!==e.width||s!==e.height,h=this.zoomX!==i||this.zoomY!==o;if(!e||!t)return!1;if(c||h){n!==e.width||s!==e.height?(e.width=n,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const d=a/2,f=l/2;return this.cacheTranslationX=Math.round(e.width/2-d)+d,this.cacheTranslationY=Math.round(e.height/2-f)+f,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new P(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Du(this.calcTransformMatrix());return new P(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Ot&&e!==ir||(t=this._constrainScale(t)),e===Ot&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Vr||(t=new Vr(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:i,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Et&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const n=or(t),s=n.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=wr(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Jt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Jt(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(n==null?void 0:n.viewportTransform)||gt,a=i*s,l=o*s,c=t.nonScaling?new P(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*oe.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Jt(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===Et?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,a=s.y/this.scaleY/i,l=or({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(n=c.createPattern(l,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new P(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(W.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=l2(this),n=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?Y_():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(x=>new yl(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&y5(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&w5(this,this.getViewportTransform()),this.setCoords();const c=Cn(),h=this.getBoundingRect(),d=this.shadow,f=new P;if(d){const x=d.blur,w=d.nonScaling?new P(1,1):this.getObjectScaling();f.x=2*Math.round(i(d.offsetX)+x)*i(w.x),f.y=2*Math.round(i(d.offsetY)+x)*i(w.y)}const g=h.width+f.x,m=h.height+f.y;c.width=Math.ceil(g),c.height=Math.ceil(m);const p=l(c);e.format==="jpeg"&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new P(p.width/2,p.height/2),te,te);const y=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const v=p.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=s,n&&(this.group=n),this.set(t),this.setCoords(),p._objects=[],p.destroy(),v}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return J_(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z_(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=te,this.originY=te,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=i,this.top=o,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Pu.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Yr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,s)=>{let[i,o]=s;return n[i]=this._animate(i,o,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=n,h=k(k({},n),{},{target:this,startValue:a??s.reduce((d,f)=>d[f],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(d,f,g)=>{s.reduce((m,p,y)=>(y===s.length-1&&(m[p]=d),m[p]),this),l&&l(d,f,g)},onComplete:(d,f,g)=>{this.setCoords(),c&&c(d,f,g)}});return i?U5(h):b2(h)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<n.length;o++){if(this===n[o])return{fork:[],otherFork:[e,...n.slice(0,o)],common:[this,...t]};if(s===n[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...n.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=n._objects.indexOf(s),a=n._objects.indexOf(i);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Yc.customProperties,this.constructor.customProperties||[]);let t;const n=oe.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:h,originX:d,originY:f,width:g,height:m,strokeWidth:p,strokeLineCap:y,strokeDashOffset:v,strokeLineJoin:x,strokeUniform:w,strokeMiterLimit:_,scaleX:S,scaleY:C,angle:T,flipX:E,flipY:D,opacity:N,visible:F,backgroundColor:R,fillRule:z,paintFirst:M,globalCompositeOperation:Y,skewX:V,skewY:G}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const O=U=>ge(U,n),I=k(k({},Lo(this,e)),{},{type:this.constructor.type,version:yp,originX:d,originY:f,left:O(c),top:O(h),width:O(g),height:O(m),fill:Yv(i)?i.toObject():i,stroke:Yv(o)?o.toObject():o,strokeWidth:O(p),strokeDashArray:l&&l.concat(),strokeLineCap:y,strokeDashOffset:v,strokeLineJoin:x,strokeUniform:w,strokeMiterLimit:O(_),scaleX:O(S),scaleY:O(C),angle:O(T),flipX:E,flipY:D,opacity:O(N),shadow:a&&a.toObject(),visible:F,backgroundColor:R,fillRule:z,paintFirst:M,globalCompositeOperation:Y,skewX:O(V),skewY:O(G)},t?{clipPath:t}:null);return this.includeDefaultValues?I:this._removeDefaultValues(I)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return im(e,(s,i)=>{if(i===he||i===kt||i==="type")return!0;const o=n[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Ce(e,V5),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,i=Ce(n,H5);return Ph(t,i).then(o=>s?(delete o[s],new this(t[s],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};j(en,"stateProperties",P5),j(en,"cacheProperties",En),j(en,"ownDefaults",D5),j(en,"type","FabricObject"),j(en,"colorProperties",[ze,Et,"backgroundColor"]),j(en,"customProperties",[]),W.setClass(en),W.setClass(en,"object");const Io=(r,e,t)=>(n,s,i,o)=>{const a=e(n,s,i,o);return a&&c2(r,k(k({},h2(n,s,i,o)),t)),a};function Fo(r){return(e,t,n,s)=>{const{target:i,originX:o,originY:a}=t,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),h=r(e,t,n,s);return i.setPositionByOrigin(c,t.originX,t.originY),h}}const ly=Io(Xa,Fo((r,e,t,n)=>{const s=am(e,e.originX,e.originY,t,n);if(Re(e.originX)===Re(te)||Re(e.originX)===Re(Pe)&&s.x<0||Re(e.originX)===Re(he)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=u2(e)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,1)),l!==i.width}return!1}));function Y5(r,e,t,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?Et:ze,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor);let h,d=e,f=t;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(h=i,r.scale(1,o/i),f=t*i/o):o>i?(h=o,r.scale(i/o,1),d=e*o/i):h=i,r.beginPath(),r.arc(d,f,h/2,0,Eu,!1),r[l](),c&&r.stroke(),r.restore()}function G5(r,e,t,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?Et:ze,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor),h=i/2,d=o/2;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",r.translate(e,t);const f=s.getTotalAngle();r.rotate(Ae(f)),r["".concat(l,"Rect")](-h,-d,i,o),c&&r.strokeRect(-h,-d,i,o),r.restore()}class ur{constructor(e){j(this,"visible",!0),j(this,"actionName",Oh),j(this,"angle",0),j(this,"x",0),j(this,"y",0),j(this,"offsetX",0),j(this,"offsetY",0),j(this,"sizeX",0),j(this,"sizeY",0),j(this,"touchSizeX",0),j(this,"touchSizeY",0),j(this,"cursorStyle","crosshair"),j(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&je.isPointInPolygon(n,[o,a,l,c])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,s;return(n=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,s){return new P(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,s,i,o){const a=nm([vl(n,s),Ro({angle:e}),sm((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new P(-.5,-.5).transform(a),tr:new P(.5,-.5).transform(a),br:new P(.5,.5).transform(a),bl:new P(-.5,.5).transform(a)}}render(e,t,n,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?Y5.call(this,e,t,n,s,i):G5.call(this,e,t,n,s,i)}}const X5=(r,e,t)=>t.lockRotation?Mu:e.cursorStyle,q5=Io(X_,Fo((r,e,t,n)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const h=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(Cr(s,"lockRotation"))return!1;const d=Math.atan2(o-h.y,i-h.x),f=Math.atan2(n-h.y,t-h.x);let g=jn(f-d+a);if(s.snapAngle&&s.snapAngle>0){const p=s.snapAngle,y=s.snapThreshold||p,v=Math.ceil(g/p)*p,x=Math.floor(g/p)*p;Math.abs(g-x)<y?g=x:Math.abs(g-v)<y&&(g=v)}g<0&&(g=360+g),g%=360;const m=s.angle!==g;return s.angle=g,m}));function _2(r,e){const t=e.canvas,n=r[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function S2(r,e,t){const n=Cr(r,"lockScalingX"),s=Cr(r,"lockScalingY");if(n&&s||!e&&(n||s)&&t||n&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=r;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const K5=["e","se","s","sw","w","nw","n","ne","e"],ia=(r,e,t)=>{const n=_2(r,t);if(S2(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return Mu;const s=d2(t,e);return"".concat(K5[s],"-resize")};function um(r,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=_2(r,i);let l,c,h,d,f,g;if(S2(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,h=e.scaleY*e.gestureScale;else{if(l=am(e,e.originX,e.originY,t,n),f=o!=="y"?Math.sign(l.x||e.signX||1):1,g=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=f),e.signY||(e.signY=g),Cr(i,"lockScalingFlip")&&(e.signX!==f||e.signY!==g))return!1;if(d=i._getTransformedDimensions(),a&&!o){const y=Math.abs(l.x)+Math.abs(l.y),{original:v}=e,x=y/(Math.abs(d.x*v.scaleX/i.scaleX)+Math.abs(d.y*v.scaleY/i.scaleY));c=v.scaleX*x,h=v.scaleY*x}else c=Math.abs(l.x*i.scaleX/d.x),h=Math.abs(l.y*i.scaleY/d.y);u2(e)&&(c*=2,h*=2),e.signX!==f&&o!=="y"&&(e.originX=Kv(e.originX),c*=-1,e.signX=f),e.signY!==g&&o!=="x"&&(e.originY=Kv(e.originY),h*=-1,e.signY=g)}const m=i.scaleX,p=i.scaleY;return o?(o==="x"&&i.set(Ot,c),o==="y"&&i.set(ir,h)):(!Cr(i,"lockScalingX")&&i.set(Ot,c),!Cr(i,"lockScalingY")&&i.set(ir,h)),m!==i.scaleX||p!==i.scaleY}const ec=Io(Eh,Fo((r,e,t,n)=>um(r,e,t,n))),Q5=Io(Eh,Fo((r,e,t,n)=>um(r,e,t,n,{by:"x"}))),J5=Io(Eh,Fo((r,e,t,n)=>um(r,e,t,n,{by:"y"}))),Z5=["target","ex","ey","skewingSide"],Vd={x:{counterAxis:"y",scale:Ot,skew:Ao,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:ir,skew:Mo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},e3=["ns","nesw","ew","nwse"],t3=(r,e,t)=>{if(e.x!==0&&Cr(t,"lockSkewingY")||e.y!==0&&Cr(t,"lockSkewingX"))return Mu;const n=d2(t,e)%4;return"".concat(e3[n],"-resize")};function C2(r,e,t,n,s){const{target:i}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:h}=Vd[r];if(Cr(i,l))return!1;const{origin:d,flip:f}=Vd[o],g=Re(t[d])*(i[f]?-1:1),m=-Math.sign(g)*(i[h]?-1:1),p=.5*-((i[c]===0&&am(t,te,te,n,s)[r]>0||i[c]>0?1:-1)*m)+.5;return Io(q_,Fo((v,x,w,_)=>function(S,C,T){let{target:E,ex:D,ey:N,skewingSide:F}=C,R=Ce(C,Z5);const{skew:z}=Vd[S],M=T.subtract(new P(D,N)).divide(new P(E.scaleX,E.scaleY))[S],Y=E[z],V=R[z],G=Math.tan(Ae(V)),O=S==="y"?E._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:E._getTransformedDimensions({scaleX:1,scaleY:1}).y,I=2*M*F/Math.max(O,1)+G,U=jn(Math.atan(I));E.set(z,U);const B=Y!==E[z];if(B&&S==="y"){const{skewX:X,scaleX:Q}=E,ae=E._getTransformedDimensions({skewY:Y}),Ue=E._getTransformedDimensions(),re=X!==0?ae.x/Ue.x:1;re!==1&&E.set(Ot,re*Q)}return B}(r,x,new P(w,_))))(e,k(k({},t),{},{[a]:p,skewingSide:m}),n,s)}const r3=(r,e,t,n)=>C2("x",r,e,t,n),n3=(r,e,t,n)=>C2("y",r,e,t,n);function Mh(r,e){return r[e.canvas.altActionKey]}const tc=(r,e,t)=>{const n=Mh(r,t);return e.x===0?n?Ao:ir:e.y===0?n?Mo:Ot:""},Ii=(r,e,t)=>Mh(r,t)?t3(0,e,t):ia(r,e,t),cy=(r,e,t,n)=>Mh(r,e.target)?n3(r,e,t,n):Q5(r,e,t,n),uy=(r,e,t,n)=>Mh(r,e.target)?r3(r,e,t,n):J5(r,e,t,n),j2=()=>({ml:new ur({x:-.5,y:0,cursorStyleHandler:Ii,actionHandler:cy,getActionName:tc}),mr:new ur({x:.5,y:0,cursorStyleHandler:Ii,actionHandler:cy,getActionName:tc}),mb:new ur({x:0,y:.5,cursorStyleHandler:Ii,actionHandler:uy,getActionName:tc}),mt:new ur({x:0,y:-.5,cursorStyleHandler:Ii,actionHandler:uy,getActionName:tc}),tl:new ur({x:-.5,y:-.5,cursorStyleHandler:ia,actionHandler:ec}),tr:new ur({x:.5,y:-.5,cursorStyleHandler:ia,actionHandler:ec}),bl:new ur({x:-.5,y:.5,cursorStyleHandler:ia,actionHandler:ec}),br:new ur({x:.5,y:.5,cursorStyleHandler:ia,actionHandler:ec}),mtr:new ur({x:0,y:-.5,actionHandler:q5,cursorStyleHandler:X5,offsetY:-40,withConnection:!0,actionName:tm})}),s3=()=>({mr:new ur({x:.5,y:0,actionHandler:ly,cursorStyleHandler:Ii,actionName:Xa}),ml:new ur({x:-.5,y:0,actionHandler:ly,cursorStyleHandler:Ii,actionName:Xa})}),i3=()=>k(k({},j2()),s3());class Ja extends en{static getDefaults(){return k(k({},super.getDefaults()),Ja.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ja.ownDefaults),this.setOptions(e)}static createControls(){return{controls:j2()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,s=t.action;if(this===n&&s&&s.startsWith(Oh))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[i,o]=n[s],a=this.controls[i];if(a.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=vl(t.x,t.y),s=Ro({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=Ke(n,s),o=Ke(e,i),a=Ke(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Du(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),h={};return this.forEachControl((d,f)=>{const g=d.positionHandler(c,a,this,d);h[f]=Object.assign(g,this._calcCornerCoords(d,g))}),h}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Ae(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=k({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,i=k({hasBorders:n,hasControls:s},t),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=Ke(o,this.calcTransformMatrix()),h=Du(c);e.save(),e.translate(h.translateX,h.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(h.angle-=180),e.rotate(Ae(this.group?h.angle:this.angle)),a&&this.drawBorders(e,h,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let s;if(n&&n.forActiveSelection||this.group){const i=om(this.width,this.height,Nh(t)),o=this.isStrokeAccountedForInDimensions()?rm:(this.strokeUniform?new P().scalarAdd(this.canvas?this.canvas.getZoom():1):new P(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(n=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=k({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const h=this.oCoords[c];l.render(e,h.x,h.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,s]=t;return this.setControlVisible(n,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function k2(r,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),r}j(Ja,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ot extends Ja{}k2(ot,[f2]),W.setClass(ot),W.setClass(ot,"object");const o3=(r,e,t,n)=>{const s=2*(n=Math.round(n))+1,{data:i}=r.getImageData(e-n,t-n,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class T2{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new P(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new P(1/this.options.scaleX,1/this.options.scaleY):new P(1,1)}createSideVector(e,t){const n=_p(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new P(e);return t.y+=t.x*Math.tan(Ae(this.options.skewY)),t.x+=t.y*Math.tan(Ae(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const a3=new P;class Ji extends T2{static getOrthogonalRotationFactor(e,t){const n=t?Cp(e,t):O5(e);return Math.abs(n)<ml?-1:1}constructor(e,t,n,s){super(s),j(this,"AB",void 0),j(this,"AC",void 0),j(this,"alpha",void 0),j(this,"bisector",void 0),this.A=new P(e),this.B=new P(t),this.C=new P(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Cp(this.AB,this.AC),this.bisector=lm(x2(this.AB.eq(a3)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=w2(s),o=Ji.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,n*o)}projectBevel(){const e=[];return(this.alpha%Eu==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),i=this.options.strokeUniform?Sp(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Sp(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],s=new P(Ji.getOrthogonalRotationFactor(this.bisector),Ji.getOrthogonalRotationFactor(new P(this.bisector.y,this.bisector.x)));return[new P(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new P(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{iy(i,e,t)&&n.push(this.A.add(i))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new P(Math.tan(Ae(s)),Math.tan(Ae(i))),h=this.strokeProjectionMagnitude,d=l?h/a/Math.sqrt(1/a**2+1/o**2*c.y**2):h/Math.sqrt(1+c.y**2),f=new P(Math.sqrt(Math.max(h**2-d**2,0)),d),g=l?h/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):h/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),m=new P(g,Math.sqrt(Math.max(h**2-g**2,0)));return[m,m.scalarMultiply(-1),f,f.scalarMultiply(-1)].map(p=>this.applySkew(l?p.multiply(this.strokeUniformScalar):p)).forEach(p=>{iy(p,e,t)&&n.push(this.applySkew(this.A).add(p))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Eu==0,n=this.applySkew(this.A),s=e[t?0:2].subtract(n),i=e[t?1:0].subtract(n),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=ba(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class hy extends T2{constructor(e,t,n){super(n),this.A=new P(e),this.T=new P(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(w2(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new P(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Ji(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new P(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(lm(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const l3=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(r.length===0)return n;const s=r.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new P(o)),i),[new P(r[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=t?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?i:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?n.push(...new hy(i,i,e).project()):!t||o!==0&&o!==a.length-1?n.push(...new Ji(i,l,c,e).project()):n.push(...new hy(i,o===0?c:l,e).project())}),n},hm=r=>{const e={};return Object.keys(r).forEach(t=>{e[t]={},Object.keys(r[t]).forEach(n=>{e[t][n]=k({},r[t][n])})}),e},c3=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let Jo;const dm=r=>{if(Jo||Jo||(Jo="Intl"in Th()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),Jo){const e=Jo.segment(r);return Array.from(e).map(t=>{let{segment:n}=t;return n})}return u3(r)},u3=r=>{const e=[];for(let t,n=0;n<r.length;n++)(t=h3(r,n))!==!1&&e.push(t);return e},h3=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const s=r.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1},fm=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textDecorationThickness!==e.textDecorationThickness||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},d3=(r,e)=>{const t=e.split(`
`),n=[];let s=-1,i={};r=hm(r);for(let o=0;o<t.length;o++){const a=dm(t[o]);if(r[o])for(let l=0;l<a.length;l++){s++;const c=r[o][l];c&&Object.keys(c).length>0&&(fm(i,c,!0)?n.push({start:s,end:s+1,style:c}):n[n.length-1].end++),i=c||{}}else s+=a.length,i={}}return n},f3=(r,e)=>{if(!Array.isArray(r))return hm(r);const t=e.split(em),n={};let s=-1,i=0;for(let o=0;o<t.length;o++){const a=dm(t[o]);for(let l=0;l<a.length;l++)s++,r[i]&&r[i].start<=s&&s<r[i].end&&(n[o]=n[o]||{},n[o][l]=k({},r[i].style),s===r[i].end-1&&i++)}return n},Cs=["display","transform",ze,"fill-opacity","fill-rule","opacity",Et,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function dy(r,e){const t=r.nodeName,n=r.getAttribute("class"),s=r.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),n&&e.length){const a=n.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function p3(r,e){let t=!0;const n=dy(r,e.pop());return n&&e.length&&(t=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=dy(s=s.parentElement,o);return i.length===0}(r,e)),n&&t&&e.length===0}const g3=r=>{var e;return(e=T5[r])!==null&&e!==void 0?e:r},m3=new RegExp("(".concat(br,")"),"gi"),v3=r=>r.replace(m3," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var fy,py,gy,my,vy,yy,xy;const dt="(".concat(br,")"),y3=String.raw(fy||(fy=qr(["(skewX)(",")"],["(skewX)\\(","\\)"])),dt),x3=String.raw(py||(py=qr(["(skewY)(",")"],["(skewY)\\(","\\)"])),dt),w3=String.raw(gy||(gy=qr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),dt,dt,dt),b3=String.raw(my||(my=qr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),dt,dt),_3=String.raw(vy||(vy=qr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),dt,dt),S3=String.raw(yy||(yy=qr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),dt,dt,dt,dt,dt,dt),pm="(?:".concat(S3,"|").concat(_3,"|").concat(w3,"|").concat(b3,"|").concat(y3,"|").concat(x3,")"),C3="(?:".concat(pm,"*)"),j3=String.raw(xy||(xy=qr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),C3),k3=new RegExp(j3),T3=new RegExp(pm),E3=new RegExp(pm,"g");function jp(r){const e=[];if(!(r=v3(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!k3.test(r))return[...gt];for(const t of r.matchAll(E3)){const n=T3.exec(t[0]);if(!n)continue;let s=gt;const i=n.filter(m=>!!m),[,o,...a]=i,[l,c,h,d,f,g]=a.map(m=>parseFloat(m));switch(o){case"translate":s=vl(l,c);break;case tm:s=Ro({angle:l},{x:c,y:h});break;case Oh:s=sm(l,c);break;case Ao:s=r2(l);break;case Mo:s=n2(l);break;case"matrix":s=[l,c,h,d,f,g]}e.push(s)}return nm(e)}function O3(r,e,t,n){const s=Array.isArray(e);let i,o=e;if(r!==ze&&r!==Et||e!==Tt){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")o=e===Tt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")o=t&&t.transformMatrix?Ke(t.transformMatrix,jp(e)):jp(e);else if(r==="visible")o=e!==Tt&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(r==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(r==="textAnchor")o=e==="start"?he:e==="end"?Pe:te;else if(r==="charSpacing"||r===ei)i=Qi(e,n)/n*1e3;else if(r==="paintFirst"){const a=e.indexOf(ze),l=e.indexOf(Et);o=ze,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Et)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return e;if(r==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(Qi):Qi(e,n)}}else o="";return!s&&isNaN(i)?o:i}function N3(r,e){const t=r.match(k5);if(!t)return;const n=t[1],s=t[3],i=t[4],o=t[5],a=t[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=Qi(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function P3(r,e){r.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,s]=t.split(":");e[n.trim().toLowerCase()]=s.trim()})}function D3(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?P3(t,e):function(n,s){Object.entries(n).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(t,e)),e}const A3={stroke:"strokeOpacity",fill:"fillOpacity"};function On(r,e,t){if(!r)return{};let n,s={},i=Zg;r.parentNode&&sy.test(r.parentNode.nodeName)&&(s=On(r.parentElement,e,t),s.fontSize&&(n=i=Qi(s.fontSize)));const o=k(k(k({},e.reduce((c,h)=>{const d=r.getAttribute(h);return d&&(c[h]=d),c},{})),function(c){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d={};for(const f in h)p3(c,f.split(" "))&&(d=k(k({},d),h[f]));return d}(r,t)),D3(r));o[Ud]&&r.setAttribute(Ud,o[Ud]),o[Bd]&&(n=Qi(o[Bd],i),o[Bd]="".concat(n));const a={};for(const c in o){const h=g3(c),d=O3(h,o[c],s,n);a[h]=d}a&&a.font&&N3(a.font,a);const l=k(k({},s),a);return sy.test(r.nodeName)?l:function(c){const h=ot.getDefaults();return Object.entries(A3).forEach(d=>{let[f,g]=d;if(c[g]===void 0||c[f]==="")return;if(c[f]===void 0){if(!h[f])return;c[f]=h[f]}if(c[f].indexOf("url(")===0)return;const m=new ue(c[f]);c[f]=m.setAlpha(ge(m.getAlpha()*c[g],2)).toRgba()}),c}(l)}const M3=["left","top","width","height","visible"],E2=["rx","ry"];class Qt extends ot{static getDefaults(){return k(k({},super.getDefaults()),Qt.ownDefaults)}constructor(e){super(),Object.assign(this,Qt.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,s=-t/2,i=-n/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,n/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-Ln*o,i,s+t,i+Ln*a,s+t,i+a),e.lineTo(s+t,i+n-a),l&&e.bezierCurveTo(s+t,i+n-Ln*a,s+t-Ln*o,i+n,s+t-o,i+n),e.lineTo(s+o,i+n),l&&e.bezierCurveTo(s+Ln*o,i+n,s,i+n-Ln*a,s,i+n-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+Ln*a,s+Ln*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...E2,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const s=On(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,h=Ce(s,M3);return new this(k(k(k({},t),h),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}j(Qt,"type","Rect"),j(Qt,"cacheProperties",[...En,...E2]),j(Qt,"ownDefaults",{rx:0,ry:0}),j(Qt,"ATTRIBUTE_NAMES",[...Cs,"x","y","rx","ry","width","height"]),W.setClass(Qt),W.setSVGClass(Qt);const hn="initialization",Lu="added",gm="removed",Iu="imperative",O2=(r,e)=>{const{strokeUniform:t,strokeWidth:n,width:s,height:i,group:o}=e,a=o&&o!==r?Dh(o.calcTransformMatrix(),r.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),h=t&&c?x5(new P(n,n),void 0,r.calcTransformMatrix()):rm,d=!t&&c?n:0,f=om(s+d,i+d,nm([a,e.calcOwnMatrix()],!0)).add(h).scalarDivide(2);return[l.subtract(f),l.add(f)]};class Rh{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:s}=e;return t===hn||t===Iu||!!n&&s!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==hn&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:s}=t;if(n===Iu&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=gn(e.map(d=>O2(s,d)).reduce((d,f)=>d.concat(f),[])),c=new P(a,l),h=new P(i,o).add(c.scalarDivide(2));if(n===hn){const d=this.getInitialSize(t,{size:c,center:h});return{center:h,relativeCorrection:new P(0,0),size:d}}return{center:h.transform(s.calcOwnMatrix()),size:c}}}j(Rh,"type","strategy");class kp extends Rh{shouldPerformLayout(e){return!0}}j(kp,"type","fit-content"),W.setClass(kp);const R3=["strategy"],L3=["target","strategy","bubbles","prevStrategy"],N2="layoutManager";class Za{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new kp;j(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=k(k({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[Nu,G_,Xa,X_,Eh,q_,Ou,i5,o5].map(s=>e.on(s,i=>this.performLayout(s===Nu?{type:"object_modified",trigger:s,e:i,target:n}:{type:"object_modifying",trigger:s,e:i,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:s}=t;if(n===hn||n===Lu?this.subscribeTargets(e):n===gm&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),n===Iu&&e.deep){const i=Ce(e,R3);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(k(k({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:n,type:s}=e,i=n.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===hn?new P:t.getRelativeCenterPoint(),{center:a,correction:l=new P,relativeCorrection:c=new P}=i,h=o.subtract(a).add(l).transform(s===hn?gt:wr(t.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:h}}commitLayout(e,t){const{target:n}=e,{result:{size:s},nextCenter:i}=t;var o,a;n.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===hn?n.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*Re(n.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*Re(n.originY)}):(n.setPositionByOrigin(i,te,te),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(s=>{s.group===n&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:s}=t;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(e,t){const{target:n,strategy:s,bubbles:i,prevStrategy:o}=e,a=Ce(e,L3),{canvas:l}=n;n.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:n});const c=n.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(n),c.layoutManager.performLayout(k(k({},a),{},{target:c}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:N2,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}W.setClass(Za,N2);const I3=["type","objects","layoutManager"];class F3 extends Za{performLayout(){}}class Ys extends K_(ot){static getDefaults(){return k(k({},super.getDefaults()),Ys.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),j(this,"_activeObjects",[]),j(this,"__objectSelectionTracker",void 0),j(this,"__objectSelectionDisposer",void 0),Object.assign(this,Ys.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new Za,this.layoutManager.performLayout({type:hn,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(gs("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(gs("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,s)=>this.canEnterGroup(t)&&s.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(Lu,s),i}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(n),o=super.insertAt(e,...i);return this._onAfterObjectsChange(Lu,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(gm,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const s=this._activeObjects;if(e)s.push(n),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(n);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Au(e,Ke(wr(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Au(e,Ke(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=ot.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...wr(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(k({target:this,type:Iu},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=n;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return k(k(k({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Qt.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:s=[],layoutManager:i}=e,o=Ce(e,I3);return Promise.all([qa(s,t),Ph(o,t)]).then(a=>{let[l,c]=a;const h=new this(l,k(k(k({},o),c),{},{layoutManager:new F3}));if(i){const d=W.getClass(i.type),f=W.getClass(i.strategy);h.layoutManager=new d(new f)}else h.layoutManager=new Za;return h.layoutManager.subscribeTargets({type:hn,target:h,targets:h.getObjects()}),h.setCoords(),h})}}j(Ys,"type","Group"),j(Ys,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),W.setClass(Ys);const $3=(r,e)=>Math.min(e.width/r.width,e.height/r.height),z3=(r,e)=>Math.max(e.width/r.width,e.height/r.height),Tp="\\s*,?\\s*",Zo="".concat(Tp,"(").concat(br,")"),B3="".concat(Zo).concat(Zo).concat(Zo).concat(Tp,"([01])").concat(Tp,"([01])").concat(Zo).concat(Zo),U3={m:"l",M:"L"},W3=(r,e,t,n,s,i,o,a,l,c,h)=>{const d=_n(r),f=Sn(r),g=_n(e),m=Sn(e),p=t*s*g-n*i*m+o,y=n*s*g+t*i*m+a;return["C",c+l*(-t*s*f-n*i*d),h+l*(-n*s*f+t*i*d),p+l*(t*s*m+n*i*g),y+l*(n*s*m-t*i*g),p,y]},wy=(r,e,t,n)=>{const s=Math.atan2(e,r),i=Math.atan2(n,t);return i>=s?i-s:2*Math.PI-(s-i)};function by(r,e,t,n,s,i,o,a){let l;if(oe.cachesBoundsOfCurve&&(l=[...arguments].join(),ya.boundsOfCurveCache[l]))return ya.boundsOfCurveCache[l];const c=Math.sqrt,h=Math.abs,d=[],f=[[0,0],[0,0]];let g=6*r-12*t+6*s,m=-3*r+9*t-9*s+3*o,p=3*t-3*r;for(let _=0;_<2;++_){if(_>0&&(g=6*e-12*n+6*i,m=-3*e+9*n-9*i+3*a,p=3*n-3*e),h(m)<1e-12){if(h(g)<1e-12)continue;const D=-p/g;0<D&&D<1&&d.push(D);continue}const S=g*g-4*p*m;if(S<0)continue;const C=c(S),T=(-g+C)/(2*m);0<T&&T<1&&d.push(T);const E=(-g-C)/(2*m);0<E&&E<1&&d.push(E)}let y=d.length;const v=y,x=P2(r,e,t,n,s,i,o,a);for(;y--;){const{x:_,y:S}=x(d[y]);f[0][y]=_,f[1][y]=S}f[0][v]=r,f[1][v]=e,f[0][v+1]=o,f[1][v+1]=a;const w=[new P(Math.min(...f[0]),Math.min(...f[1])),new P(Math.max(...f[0]),Math.max(...f[1]))];return oe.cachesBoundsOfCurve&&(ya.boundsOfCurveCache[l]=w),w}const V3=(r,e,t)=>{let[n,s,i,o,a,l,c,h]=t;const d=((f,g,m,p,y,v,x)=>{if(m===0||p===0)return[];let w=0,_=0,S=0;const C=Math.PI,T=x*Jg,E=Sn(T),D=_n(T),N=.5*(-D*f-E*g),F=.5*(-D*g+E*f),R=m**2,z=p**2,M=F**2,Y=N**2,V=R*z-R*M-z*Y;let G=Math.abs(m),O=Math.abs(p);if(V<0){const Ge=Math.sqrt(1-V/(R*z));G*=Ge,O*=Ge}else S=(y===v?-1:1)*Math.sqrt(V/(R*M+z*Y));const I=S*G*F/O,U=-S*O*N/G,B=D*I-E*U+.5*f,X=E*I+D*U+.5*g;let Q=wy(1,0,(N-I)/G,(F-U)/O),ae=wy((N-I)/G,(F-U)/O,(-N-I)/G,(-F-U)/O);v===0&&ae>0?ae-=2*C:v===1&&ae<0&&(ae+=2*C);const Ue=Math.ceil(Math.abs(ae/C*2)),re=[],Ye=ae/Ue,Or=8/3*Math.sin(Ye/4)*Math.sin(Ye/4)/Math.sin(Ye/2);let Ht=Q+Ye;for(let Ge=0;Ge<Ue;Ge++)re[Ge]=W3(Q,Ht,D,E,G,O,B,X,Or,w,_),w=re[Ge][5],_=re[Ge][6],Q=Ht,Ht+=Ye;return re})(c-r,h-e,s,i,a,l,o);for(let f=0,g=d.length;f<g;f++)d[f][1]+=r,d[f][2]+=e,d[f][3]+=r,d[f][4]+=e,d[f][5]+=r,d[f][6]+=e;return d},H3=r=>{let e=0,t=0,n=0,s=0;const i=[];let o,a=0,l=0;for(const c of r){const h=[...c];let d;switch(h[0]){case"l":h[1]+=e,h[2]+=t;case"L":e=h[1],t=h[2],d=["L",e,t];break;case"h":h[1]+=e;case"H":e=h[1],d=["L",e,t];break;case"v":h[1]+=t;case"V":t=h[1],d=["L",e,t];break;case"m":h[1]+=e,h[2]+=t;case"M":e=h[1],t=h[2],n=h[1],s=h[2],d=["M",e,t];break;case"c":h[1]+=e,h[2]+=t,h[3]+=e,h[4]+=t,h[5]+=e,h[6]+=t;case"C":a=h[3],l=h[4],e=h[5],t=h[6],d=["C",h[1],h[2],a,l,e,t];break;case"s":h[1]+=e,h[2]+=t,h[3]+=e,h[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=h[3],t=h[4],d=["C",a,l,h[1],h[2],e,t],a=d[3],l=d[4];break;case"q":h[1]+=e,h[2]+=t,h[3]+=e,h[4]+=t;case"Q":a=h[1],l=h[2],e=h[3],t=h[4],d=["Q",a,l,e,t];break;case"t":h[1]+=e,h[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=h[1],t=h[2],d=["Q",a,l,e,t];break;case"a":h[6]+=e,h[7]+=t;case"A":V3(e,t,h).forEach(f=>i.push(f)),e=h[6],t=h[7];break;case"z":case"Z":e=n,t=s,d=["Z"]}d?(i.push(d),o=d[0]):o=""}return i},Fu=(r,e,t,n)=>Math.sqrt((t-r)**2+(n-e)**2),P2=(r,e,t,n,s,i,o,a)=>l=>{const c=l**3,h=(g=>3*g**2*(1-g))(l),d=(g=>3*g*(1-g)**2)(l),f=(g=>(1-g)**3)(l);return new P(o*c+s*h+t*d+r*f,a*c+i*h+n*d+e*f)},D2=r=>r**2,A2=r=>2*r*(1-r),M2=r=>(1-r)**2,Y3=(r,e,t,n,s,i,o,a)=>l=>{const c=D2(l),h=A2(l),d=M2(l),f=3*(d*(t-r)+h*(s-t)+c*(o-s)),g=3*(d*(n-e)+h*(i-n)+c*(a-i));return Math.atan2(g,f)},G3=(r,e,t,n,s,i)=>o=>{const a=D2(o),l=A2(o),c=M2(o);return new P(s*a+t*l+r*c,i*a+n*l+e*c)},X3=(r,e,t,n,s,i)=>o=>{const a=1-o,l=2*(a*(t-r)+o*(s-t)),c=2*(a*(n-e)+o*(i-n));return Math.atan2(c,l)},_y=(r,e,t)=>{let n=new P(e,t),s=0;for(let i=1;i<=100;i+=1){const o=r(i/100);s+=Fu(n.x,n.y,o.x,o.y),n=o}return s},q3=(r,e)=>{let t,n=0,s=0,i={x:r.x,y:r.y},o=k({},i),a=.01,l=0;const c=r.iterator,h=r.angleFinder;for(;s<e&&a>1e-4;)o=c(n),l=n,t=Fu(i.x,i.y,o.x,o.y),t+s>e?(n-=a,a/=2):(i=o,n+=a,s+=t);return k(k({},o),{},{angle:h(l)})},R2=r=>{let e,t,n=0,s=0,i=0,o=0,a=0;const l=[];for(const c of r){const h={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":t=h,t.x=o=s=c[1],t.y=a=i=c[2];break;case"L":t=h,t.length=Fu(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=P2(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t=h,t.iterator=e,t.angleFinder=Y3(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=_y(e,s,i),s=c[5],i=c[6];break;case"Q":e=G3(s,i,c[1],c[2],c[3],c[4]),t=h,t.iterator=e,t.angleFinder=X3(s,i,c[1],c[2],c[3],c[4]),t.length=_y(e,s,i),s=c[3],i=c[4];break;case"Z":t=h,t.destX=o,t.destY=a,t.length=Fu(s,i,o,a),s=o,i=a}n+=t.length,l.push(t)}return l.push({length:n,x:s,y:i}),l},K3=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R2(r),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const s=t[n],i=e/s.length,o=r[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return k(k({},new P(s.x,s.y).lerp(new P(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return k(k({},new P(s.x,s.y).lerp(new P(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return q3(s,e)}},Q3=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Sy=new RegExp(B3,"g"),J3=new RegExp(br,"gi"),Z3={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},eL=r=>{var e;const t=[],n=(e=r.match(Q3))!==null&&e!==void 0?e:[];for(const s of n){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const o=Z3[i.toLowerCase()];let a=[];if(i==="a"||i==="A"){Sy.lastIndex=0;for(let l=null;l=Sy.exec(s);)a.push(...l.slice(1))}else a=s.match(J3)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),h=U3[i];c[0]=l>0&&h?h:i;for(let d=0;d<o;d++)c[d+1]=parseFloat(a[l+d]);t.push(c)}}return t},tL=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new P(r[0]),n=new P(r[1]),s=1,i=0;const o=[],a=r.length,l=a>2;let c;for(l&&(s=r[2].x<n.x?-1:r[2].x===n.x?0:1,i=r[2].y<n.y?-1:r[2].y===n.y?0:1),o.push(["M",t.x-s*e,t.y-i*e]),c=1;c<a;c++){if(!t.eq(n)){const h=t.midPointFrom(n);o.push(["Q",t.x,t.y,h.x,h.y])}t=r[c],c+1<r.length&&(n=r[c+1])}return l&&(s=t.x>r[c-2].x?1:t.x===r[c-2].x?0:-1,i=t.y>r[c-2].y?1:t.y===r[c-2].y?0:-1),o.push(["L",t.x+s*e,t.y+i*e]),o},L2=(r,e)=>r.map(t=>t.map((n,s)=>s===0||e===void 0?n:ge(n,e)).join(" ")).join(" ");function Ep(r,e){const t=r.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[s,i]=n;return t.setProperty(s,i)}))}class rL extends a2{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),j(this,"upper",void 0),j(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(n),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=Cn();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Do().createElement("div");return e.setAttribute("data-fabric","wrapper"),Ep(e,{position:"relative"}),Xv(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:s}=t;Ep(e,k(k({},n),{},{"touch-action":s?"manipulation":Tt})),Xv(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:s}=this.upper;o2(n,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),wp(this.upper.el,e),wp(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),Yr().dispose(this.upper.el),delete this.upper,delete this.container}}class Lh extends yl{constructor(){super(...arguments),j(this,"targets",[]),j(this,"_hoveredTargets",[]),j(this,"_objectsToRender",void 0),j(this,"_currentTransform",null),j(this,"_groupSelector",null),j(this,"contextTopDirty",!1)}static getDefaults(){return k(k({},super.getDefaults()),Lh.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new rL(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-n+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return o3(i,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&n.length>1&&n.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let s;return t===Oh||t===Ot||t===ir||t===Xa?s=this.centeredScaling||e.centeredScaling:t===tm&&(s=this.centeredRotation||e.centeredRotation),s?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=Pe:["mr","tr","br"].includes(t)&&(n.x=he),["tl","mt","tr"].includes(t)?n.y=xp:["bl","mb","br"].includes(t)&&(n.y=kt)),n}_setupCurrentTransform(e,t,n){var s;const i=t.group?Ki(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=n&&a?(s=a.getActionHandler(e,t,a))===null||s===void 0?void 0:s.bind(a):_5,c=((g,m,p,y)=>{if(!m||!g)return"drag";const v=y.controls[m];return v.getActionName(p,v,y)})(n,o,e,t),h=e[this.centeredKey],d=this._shouldCenterTransform(t,c,h)?{x:te,y:te}:this._getOriginFromCorner(t,o),f={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:d.x,originY:d.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:Ae(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:h,original:k(k({},l2(t)),{},{originX:d.x,originY:d.y})};this._currentTransform=f,this.fire("before:transform",{e,transform:f})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new P(t,n).transform(this.viewportTransform),a=new P(t+s,n+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),h=Math.min(o.y,a.y),d=Math.max(o.x,a.x),f=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,h,d-c,f-h)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,h+=l,d-=l,f-=l,ot.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,h,d-c,f-h))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(t,bp(e))||s.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==n?(this.targets=i,n):o}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=n,h=Math.atan2(a.y-o.y,a.x-o.x),d=_n(h)*i,f=Sn(h)*i,g=d+f,m=d-f;n=[new P(o.x-m,o.y-g),new P(a.x+g,a.y-m),new P(l.x+m,l.y+g),new P(c.x-g,c.y+m)]}return je.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Ki(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const s=e[n];if(this._checkTarget(s,t)){if(Wc(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Wc(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!Wc(o)||!o.interactive)return o}return s[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let i=g5(e),o=s.width||0,a=s.height||0;o&&a||(kt in s&&xp in s&&(a=Math.abs(s.top-s.bottom)),Pe in s&&he in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=Ki(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new P(1,1):new P(n.width/o,n.height/a);return i.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Cn(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Ds(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(n=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(n=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,n&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),s}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Ds(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),Ds(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,s={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),n.fire(Nu,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Ds(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,n);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Ds(t)&&this._activeObject===t){const n=Lo(e,["angle","flipX","flipY",he,Ot,ir,Ao,Mo,kt]);return v5(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(s)}}j(Lh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class nL{constructor(e){j(this,"targets",[]),j(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Ci(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const sL=["target","oldTarget","fireCanvas","e"],Nt={passive:!1},bi=(r,e)=>{const t=r.getViewportPoint(e),n=r.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},In=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.addEventListener(...t)},Yt=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.removeEventListener(...t)},iL={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Op extends Lh{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),j(this,"_isClick",void 0),j(this,"textEditingManager",new nL(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(In,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,s=this._getEventPrefix();e(i2(n),"resize",this._onResize),e(n,s+"down",this._onMouseDown),e(n,"".concat(s,"move"),this._onMouseMove,Nt),e(n,"".concat(s,"out"),this._onMouseOut),e(n,"".concat(s,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"click",this._onClick),e(n,"dblclick",this._onClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Nt)}removeListeners(){this.addOrRemove(Yt,"remove");const e=this._getEventPrefix(),t=xr(this.upperCanvasEl);Yt(t,"".concat(e,"up"),this._onMouseUp),Yt(t,"touchend",this._onTouchEnd,Nt),Yt(t,"".concat(e,"move"),this._onMouseMove,Nt),Yt(t,"touchmove",this._onMouseMove,Nt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=k({e},bi(this,e));this.fire("mouse:out",k(k({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",k({},n)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",k(k({},n),{},{target:s})),s&&s.fire("mouseout",k({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",k({e},bi(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void In(this.upperCanvasEl,"drag",this._onDragProgress)}qv(e)}_renderDragEffects(e,t,n){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==n&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),n!==t&&(n==null||n.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),n&&(o.save(),n.transform(o),n.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Tt,n=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};Yt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:n,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(n,o),n&&(n.canDrop(e)&&(a=n),n.fire(t,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),s={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",k({e,target:t,subTargets:n,dragSource:this._dragSource},bi(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&qv(e),this._basicEventHandler("contextmenu",s),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),t==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),t==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=xr(s);In(o,"touchend",this._onTouchEnd,Nt),t&&In(o,"touchmove",this._onMouseMove,Nt),Yt(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();Yt(t,"".concat(n,"move"),this._onMouseMove,Nt);const s=xr(t);In(s,"".concat(n,"up"),this._onMouseUp),In(s,"".concat(n,"move"),this._onMouseMove,Nt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=xr(this.upperCanvasEl);Yt(n,"touchend",this._onTouchEnd,Nt),Yt(n,"touchmove",this._onMouseMove,Nt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{In(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const s=xr(this.upperCanvasEl);Yt(s,"".concat(n,"up"),this._onMouseUp),Yt(s,"".concat(n,"move"),this._onMouseMove,Nt),In(t,"".concat(n,"move"),this._onMouseMove,Nt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(n&&(this._finalizeCurrentTransform(e),c=n.actionPerformed),!s){const h=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!h&&i===this._activeObject)}if(i){const h=i.findControl(this.getViewportPoint(e),bp(e)),{key:d,control:f}=h||{};if(l=d,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(f){const g=f.getMouseUpHandler(e,i,f);g&&(a=this.getScenePoint(e),g.call(f,e,n,a.x,a.y))}i.isMoving=!1}if(n&&(n.target!==i||n.corner!==l)){const h=n.target&&n.target.controls[n.corner],d=h&&h.getMouseUpHandler(e,n.target,h);a=a||this.getScenePoint(e),d&&d.call(h,e,n,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:s=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==n&&s[i].fire(e,t);return t}_handleEvent(e,t,n){const s=this._target,i=this.targets||[],o=k(k(k({e,target:s,subTargets:i},bi(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),t==="down:before"||t==="down"?n:{});this.fire("mouse:".concat(t),o),s&&s.fire("mouse".concat(t),o);for(let a=0;a<i.length;a++)i[a]!==s&&i[a].fire("mouse".concat(t),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,n=!!t&&t===this._activeObject;const{button:s}=e;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(t),o=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,o=!0,i=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(n=!!t&&t===this._activeObject,t){t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),bp(e));if(t===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,t,n);const l=a?a.control:void 0,c=this.getScenePoint(e),h=l&&l.getMouseDownHandler(e,t,l);h&&h.call(l,e,this._currentTransform,c.x,c.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:n}),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Ki(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:s,fireCanvas:i,e:o}=t,a=Ce(t,sL);const{targetIn:l,targetOut:c,canvasIn:h,canvasOut:d}=iL[e],f=s!==n;if(s&&f){const g=k(k({},a),{},{e:o,target:s,nextTarget:n},bi(this,o));i&&this.fire(d,g),s.fire(c,g)}if(n&&f){const g=k(k({},a),{},{e:o,target:n,previousTarget:s},bi(this,o));i&&this.fire(h,g),n.fire(l,g)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,s=n.target,i=s.group?Ki(t,void 0,s.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,i),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:s,actionHandler:i,target:o}=t,a=!!i&&i(e,t,n.x,n.y);a&&o.setCoords(),s==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const s=Ds(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{n=o.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,s=Ds(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||s)&&(s||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(s){const i=n.getObjects();if(t===n){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{n.isEditing&&n.exitEditing();const i=new(W.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(n,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new P(t,n),a=o.add(new P(s,i)),l=o.min(a),c=o.max(a).subtract(l),h=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),d=o.eq(a)?h[0]?[h[0]]:[]:h.length>1?h.filter(f=>!f.onSelect({e})).reverse():h;if(d.length===1)this.setActiveObject(d[0],e);else if(d.length>1){const f=W.getClass("ActiveSelection");this.setActiveObject(new f(d,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const I2={x1:0,y1:0,x2:0,y2:0},oL=k(k({},I2),{},{r1:0,r2:0}),Fi=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,aL=/^(\d+\.\d+)%|(\d+)%$/;function F2(r){return r&&aL.test(r)}function $2(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(F2(r)?100:1):NaN;return wo(0,Fi(t,e),1)}const lL=/\s*;\s*/,cL=/\s*:\s*/;function uL(r,e){let t,n;const s=r.getAttribute("style");if(s){const o=s.split(lL);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(cL).map(h=>h.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(n=c)}}const i=new ue(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:$2(r.getAttribute("offset"),0),color:i.toRgb(),opacity:Fi(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function hL(r,e){const t=[],n=r.getElementsByTagName("stop"),s=$2(e,1);for(let i=n.length;i--;)t.push(uL(n[i],s));return t}function z2(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function B2(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function lr(r,e){return r.getAttribute(e)}function dL(r,e){return function(t,n){let s,{width:i,height:o,gradientUnits:a}=n;return Object.keys(t).reduce((l,c)=>{const h=t[c];return h==="Infinity"?s=1:h==="-Infinity"?s=0:(s=typeof h=="string"?parseFloat(h):h,typeof h=="string"&&F2(h)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(z2(r)==="linear"?function(t){return{x1:lr(t,"x1")||0,y1:lr(t,"y1")||0,x2:lr(t,"x2")||"100%",y2:lr(t,"y2")||0}}(r):function(t){return{x1:lr(t,"fx")||lr(t,"cx")||"50%",y1:lr(t,"fy")||lr(t,"cy")||"50%",r1:0,x2:lr(t,"cx")||"50%",y2:lr(t,"cy")||"50%",r2:lr(t,"r")||"50%"}}(r),k(k({},e),{},{gradientUnits:B2(r)}))}class rc{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:k(k({},t==="radial"?oL:I2),s),colorStops:i,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(ms()):ms()})}addColorStop(e){for(const t in e){const n=new ue(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return k(k({},Lo(this,e)),{},{type:this.type,coords:k({},this.coords),colorStops:this.colorStops.map(t=>k({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():gt.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(d=>k({},d)).sort((d,f)=>d.offset-f.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const h=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Ka(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:d,y1:f,x2:g,y2:m}=this.coords;n.push("<linearGradient ",h,' x1="',d,'" y1="',f,'" x2="',g,'" y2="',m,`">
`)}else if(this.type==="radial"){const{x1:d,y1:f,x2:g,y2:m,r1:p,r2:y}=this.coords,v=p>y;n.push("<radialGradient ",h,' cx="',v?d:g,'" cy="',v?f:m,'" r="',v?p:y,'" fx="',v?g:d,'" fy="',v?m:f,`">
`),v&&(o.reverse(),o.forEach(w=>{w.offset=1-w.offset}));const x=Math.min(p,y);if(x>0){const w=x/Math.max(p,y);o.forEach(_=>{_.offset+=w*(1-_.offset)})}}return o.forEach(d=>{let{color:f,offset:g,opacity:m}=d;n.push("<stop ",'offset="',100*g+"%",'" style="stop-color:',f,m!==void 0?";stop-opacity: "+m:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:s,y2:i,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,n,s,i):e.createRadialGradient(t,n,o,s,i,a);return this.colorStops.forEach(c=>{let{color:h,opacity:d,offset:f}=c;l.addColorStop(f,d!==void 0?new ue(h).setAlpha(d).toRgba():h)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(k(k({},e),{},{colorStops:t?t.map(s=>k({},s)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const s=B2(e),i=t._findCenterFromElement();return new this(k({id:e.getAttribute("id")||void 0,type:z2(e),coords:dL(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:hL(e,n.opacity),gradientUnits:s,gradientTransform:jp(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}j(rc,"type","Gradient"),W.setClass(rc,"gradient"),W.setClass(rc,"linear"),W.setClass(rc,"radial");const fL=["type","source","patternTransform"];class Hd{get type(){return"pattern"}set type(e){gs("warn","Setting type has no effect",e)}constructor(e){j(this,"repeat","repeat"),j(this,"offsetX",0),j(this,"offsetY",0),j(this,"crossOrigin",""),this.id=ms(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return k(k({},Lo(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:ge(this.offsetX,oe.NUM_FRACTION_DIGITS),offsetY:ge(this.offsetY,oe.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:s,repeat:i,id:o}=this,a=Fi(this.offsetX/t,0),l=Fi(this.offsetY/n,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):Fi(s.width/t,0),h=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):Fi(s.height/n,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(h,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:s,patternTransform:i}=e,o=Ce(e,fL);const a=await Hc(s,k(k({},t),{},{crossOrigin:o.crossOrigin}));return new this(k(k({},o),{},{patternTransform:i&&i.slice(0),source:a}))}}j(Hd,"type","Pattern"),W.setClass(Hd),W.setClass(Hd,"pattern");class pL{constructor(e){j(this,"color","rgb(0, 0, 0)"),j(this,"width",1),j(this,"shadow",null),j(this,"strokeLineCap","round"),j(this,"strokeLineJoin","round"),j(this,"strokeMiterLimit",10),j(this,"strokeDashArray",null),j(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new ue(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,n=e.contextTop,s=e.getZoom()*e.getRetinaScaling();n.shadowColor=t.color,n.shadowBlur=t.blur*s,n.shadowOffsetX=t.offsetX*s,n.shadowOffsetY=t.offsetY*s}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const gL=["path","left","top"],mL=["d"];class ln extends ot{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:i}=t,o=Ce(t,gL);super(),Object.assign(this,ln.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(he,s),typeof i=="number"&&this.set(kt,i)}_setPath(e,t){this.path=H3(Array.isArray(e)?e:eL(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new P(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+n);break;case"M":e.moveTo(s[1]+t,s[2]+n);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n,s[5]+t,s[6]+n);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=L2(this.path,oe.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=oe.NUM_FRACTION_DIGITS;return" translate(".concat(ge(-this.pathOffset.x,e),", ").concat(ge(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:s}=this._calcDimensions();this.set({width:t,height:n,pathOffset:s}),e&&this.setPositionByOrigin(s,te,te)}_calcBoundsFromPath(){const e=[];let t=0,n=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:t,y:n},{x:s,y:i});break;case"M":s=o[1],i=o[2],t=s,n=i;break;case"C":e.push(...by(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...by(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=n}return gn(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return k(k({},e),{},{pathOffset:new P(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const s=On(e,this.ATTRIBUTE_NAMES,n),{d:i}=s;return new this(i,k(k(k({},Ce(s,mL)),t),{},{left:void 0,top:void 0}))}}j(ln,"type","Path"),j(ln,"cacheProperties",[...En,"path","fillRule"]),j(ln,"ATTRIBUTE_NAMES",[...Cs,"d"]),W.setClass(ln),W.setSVGClass(ln);class el extends pL{constructor(e){super(e),j(this,"decimate",.4),j(this,"drawStraightLine",!1),j(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,n){const s=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,s.x,s.y),s}onMouseDown(e,t){let{e:n}=t;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:n}=t;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const s=this._points,i=s.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=el.drawSegment(o,s[i-2],s[i-1]),o.stroke(),o.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,t=this._points[0],n=this._points[1];if(this._saveAndTransform(e),e.beginPath(),this._points.length===2&&t.x===n.x&&t.y===n.y){const s=this.width/1e3;t.x-=s,n.x+=s}e.moveTo(t.x,t.y);for(let s=1;s<this._points.length;s++)el.drawSegment(e,t,n),t=this._points[s],n=this._points[s+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return tL(e,t)}createPath(e){const t=new ln(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new Vr(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let n,s=e[0];const i=this.canvas.getZoom(),o=Math.pow(t/i,2),a=e.length-1,l=[s];for(let c=1;c<a-1;c++)n=Math.pow(s.x-e[c].x,2)+Math.pow(s.y-e[c].y,2),n>=o&&(s=e[c],l.push(s));return l.push(e[a]),l}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if(function(n){return L2(n)==="M 0 0 Q 0 0 0 0 L 0 0"}(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const vL=["left","top","radius"],U2=["radius","startAngle","endAngle","counterClockwise"];class yr extends ot{static getDefaults(){return k(k({},super.getDefaults()),yr.ownDefaults)}constructor(e){super(),Object.assign(this,yr.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ae(this.startAngle),Ae(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Ot)}getRadiusY(){return this.get("radius")*this.get(ir)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...U2,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=Ae(this.startAngle),s=Ae(this.endAngle),i=_n(n)*t,o=Sn(n)*t,a=_n(s)*t,l=Sn(s)*t,c=e>180?1:0,h=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(h," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const s=On(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,radius:a=0}=s;return new this(k(k({},Ce(s,vL)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}j(yr,"type","Circle"),j(yr,"cacheProperties",[...En,...U2]),j(yr,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),j(yr,"ATTRIBUTE_NAMES",["cx","cy","r",...Cs]),W.setClass(yr),W.setSVGClass(yr);const yL=["x1","y1","x2","y2"],xL=["x1","y1","x2","y2"],Np=["x1","x2","y1","y2"];class As extends ot{constructor(){let[e,t,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,As.ownDefaults),this.setOptions(i),this.x1=e,this.x2=n,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(he,o),typeof a=="number"&&this.set(kt,a)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:s}=this;this.width=Math.abs(n-e),this.height=Math.abs(s-t);const{left:i,top:o,width:a,height:l}=gn([{x:e,y:t},{x:n,y:s}]),c=new P(i+a/2,o+l/2);this.setPositionByOrigin(c,te,te)}_set(e,t){return super._set(e,t),Np.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var s;Jt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new P((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:s,width:i,height:o}=this,a=e<=t?-1:1,l=n<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,n){const s=On(e,this.ATTRIBUTE_NAMES,n),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],Ce(s,yL))}static fromObject(e){let{x1:t,y1:n,x2:s,y2:i}=e,o=Ce(e,xL);return this._fromObject(k(k({},o),{},{points:[t,n,s,i]}),{extraParam:"points"})}}j(As,"type","Line"),j(As,"cacheProperties",[...En,...Np]),j(As,"ATTRIBUTE_NAMES",Cs.concat(Np)),W.setClass(As),W.setSVGClass(As);class Is extends ot{static getDefaults(){return k(k({},super.getDefaults()),Is.ownDefaults)}constructor(e){super(),Object.assign(this,Is.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}j(Is,"type","Triangle"),j(Is,"ownDefaults",{width:100,height:100}),W.setClass(Is),W.setSVGClass(Is);const W2=["rx","ry"];class an extends ot{static getDefaults(){return k(k({},super.getDefaults()),an.ownDefaults)}constructor(e){super(),Object.assign(this,an.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Ot)}getRy(){return this.get("ry")*this.get(ir)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...W2,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Eu,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const s=On(e,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function wL(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}j(an,"type","Ellipse"),j(an,"cacheProperties",[...En,...W2]),j(an,"ownDefaults",{rx:0,ry:0}),j(an,"ATTRIBUTE_NAMES",[...Cs,"cx","cy","rx","ry"]),W.setClass(an),W.setSVGClass(an);const bL=["left","top"],V2={exactBoundingBox:!1};class mr extends ot{static getDefaults(){return k(k({},super.getDefaults()),mr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),j(this,"strokeDiff",void 0),Object.assign(this,mr.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(he,n),typeof s=="number"&&this.set(kt,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return l3(this.points,e,this.isOpen())}_calcDimensions(e){e=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new P,strokeOffset:new P,strokeDiff:new P};const n=gn(t),s=Nh(k(k({},e),{},{scaleX:1,scaleY:1})),i=gn(this.points.map(c=>xt(c,s,!0))),o=new P(this.scaleX,this.scaleY);let a=n.left+n.width/2,l=n.top+n.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(Ae(this.skewX)),l-=a*Math.tan(Ae(this.skewY))),k(k({},n),{},{pathOffset:new P(a,l),strokeOffset:new P(i.left,i.top).subtract(new P(n.left,n.top)).multiply(o),strokeDiff:new P(n.width,n.height).subtract(new P(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=gn(this.points);return new P(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new P(t+s/2,n+i/2),te,te)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new P(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,n;const{width:a,height:l}=this._calcDimensions(e);o=new P((t=e.width)!==null&&t!==void 0?t:a,(n=e.height)!==null&&n!==void 0?n:l)}else{var s,i;o=new P((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new P(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&n&&((e===Ot||e===ir)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:s}=t;return{x:n,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,s=oe.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(ge(this.points[i].x-t,s),",",ge(this.points[i].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-n,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(wL(e.getAttribute("points")),k(k({},Ce(On(e,this.ATTRIBUTE_NAMES,n),bL)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}j(mr,"ownDefaults",V2),j(mr,"type","Polyline"),j(mr,"layoutProperties",[Ao,Mo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),j(mr,"cacheProperties",[...En,"points"]),j(mr,"ATTRIBUTE_NAMES",[...Cs]),W.setClass(mr),W.setSVGClass(mr);class nc extends mr{isOpen(){return!1}}j(nc,"ownDefaults",V2),j(nc,"type","Polygon"),W.setClass(nc),W.setSVGClass(nc);class H2 extends ot{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const s in t[n])for(const i in t[n][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const s in n)for(const i in n[s])if(n[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,s,i=0,o=!0,a=0;for(const l in t){n=0;for(const c in t[l]){const h=t[l][c]||{};i++,h[e]!==void 0?(s?h[e]!==s&&(o=!1):s=h[e],h[e]===this[e]&&delete h[e]):o=!1,Object.keys(h).length!==0?n++:delete t[l][c]}n===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,s,i;for(s in t){for(i in n=t[s],n)delete n[i][e],Object.keys(n[i]).length===0&&delete n[i];Object.keys(n).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const i=im(k(k({},this._getStyleDeclaration(n,s)),t),o=>o!==void 0);this._setStyleDeclaration(n,s,i)}getSelectionStyles(e,t,n){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,n));return s}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(e,t,n){for(let s=t;s<(n||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const s=this.styles&&this.styles[e];return s&&(n=s[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return k(k({},Lo(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}j(H2,"_styleProperties",C5);const _L=/  +/g,SL=/"/g;function Yd(r,e,t,n,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:h}=o,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe.NUM_FRACTION_DIGITS;const f=Qa(ze,i,!1),[g,m,p,y]=[a,l,c,h].map(v=>ge(v,d));return"<rect ".concat(f,' x="').concat(g,'" y="').concat(m,'" width="').concat(p,'" height="').concat(y,'"></rect>')}(r,{left:e,top:t,width:n,height:s}),`
`)}const CL=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Gd;class ut extends H2{static getDefaults(){return k(k({},super.getDefaults()),ut.ownDefaults)}constructor(e,t){super(),j(this,"__charBounds",[]),Object.assign(this,ut.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=R2(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(zr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===zr||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-t)/n;for(let h=0;h<=i.length;h++)o=this.__charBounds[l][h],this._reSpaceAndTab.test(i[h])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(e<=n[s].length)return{lineIndex:s,charIndex:e};e-=n[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:n[s-1].length<e?n[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Et?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case te:e.textBaseline="middle";break;case"ascender":e.textBaseline=kt;break;case"descender":e.textBaseline=xp}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,n,s,i,o){this._renderChars(e,t,n,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let h,d,f=0,g=0,m=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let p=0;p<l;p++){const y=this.__charBounds[i][p];d=this.getValueOfPropertyAt(i,p,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=d,d&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):d!==m?(h=n+c+g,this.direction==="rtl"&&(h=this.width-h-f),e.fillStyle=m,m&&e.fillRect(h,s,f,a/this.lineHeight),g=y.left,f=y.width,m=d):f+=y.kernedWidth}d&&!this.path&&(h=n+c+g,this.direction==="rtl"&&(h=this.width-h-f),e.fillStyle=d,e.fillRect(h,s,f,a/this.lineHeight)),s+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,s){const i=ya.getFontCache(t),o=this._getFontDeclaration(t),a=n+e,l=n&&o===this._getFontDeclaration(s),c=t.fontSize/this.CACHE_FONT_SIZE;let h,d,f,g;if(n&&i[n]!==void 0&&(f=i[n]),i[e]!==void 0&&(g=h=i[e]),l&&i[a]!==void 0&&(d=i[a],g=d-f),h===void 0||f===void 0||d===void 0){const m=function(){return Gd||(Gd=or({width:0,height:0}).getContext("2d")),Gd}();this._setTextStyles(m,t,!0),h===void 0&&(g=h=m.measureText(e).width,i[e]=h),f===void 0&&l&&n&&(f=m.measureText(n).width,i[n]=f),l&&d===void 0&&(d=m.measureText(a).width,i[a]=d,g=d-f)}return{width:h*c,kernedWidth:g*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,s=0;const i=this.pathSide===Pe,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let h=0;h<l;h++){const d=a[h];n=this._getGraphemeBox(d,e,h,t),c[h]=n,s+=n.kernedWidth,t=d}if(c[l]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let h=0;const d=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case he:h=i?d-s:0;break;case te:h=(d-s)/2;break;case Pe:h=i?0:d-s}h+=this.pathStartOffset*(i?-1:1);for(let f=i?l-1:0;i?f>=0:f<l;i?f--:f++)n=c[f],h>d?h%=d:h<0&&(h+=d),this._setGraphemeOnPath(h,n),h+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,s=this.path,i=K3(s.path,n,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===Pe?Math.PI:0)}_getGraphemeBox(e,t,n,s,i){const o=this.getCompleteStyleDeclaration(t,n),a=s?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,o,s,a);let c,h=l.kernedWidth,d=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),d+=c,h+=c);const f={width:d,left:0,height:o.fontSize,kernedWidth:h,deltaY:o.deltaY};if(n>0&&!i){const g=this.__charBounds[t][n-1];f.left=g.left+g.width+l.kernedWidth-l.width}return f}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,s=this._textLines[e].length;n<s;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,s=this._textLines.length;n<s;n++)e=this.getHeightOfLine(n),t+=n===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,h=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],s+h,i+n+c,o),n+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(ze))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(zr),c=this.path,h=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,d=this.direction==="ltr",f=this.direction==="ltr"?1:-1,g=t.direction;let m,p,y,v,x,w="",_=0;if(t.save(),g!==this.direction&&(t.canvas.setAttribute("dir",d?"ltr":"rtl"),t.direction=d?"ltr":"rtl",t.textAlign=d?he:Pe),i-=a*this._fontSizeFraction/this.lineHeight,h)return this._renderChar(e,t,o,0,n.join(""),s,i),void t.restore();for(let S=0,C=n.length-1;S<=C;S++)v=S===C||this.charSpacing||c,w+=n[S],y=this.__charBounds[o][S],_===0?(s+=f*(y.kernedWidth-y.width),_+=y.width):_+=y.kernedWidth,l&&!v&&this._reSpaceAndTab.test(n[S])&&(v=!0),v||(m=m||this.getCompleteStyleDeclaration(o,S),p=this.getCompleteStyleDeclaration(o,S+1),v=fm(m,p,!1)),v&&(c?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,o,S,w,-_/2,0),t.restore()):(x=s,this._renderChar(e,t,o,S,w,x,i)),w="",m=p,s+=f*_,_=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,s=or({width:t,height:n}),i=s.getContext("2d");return s.width=t,s.height=n,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,n),i.lineTo(0,n),i.closePath(),i.translate(t/2,n/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,n){let s,i;return Jt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:i}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,s,i,o,a){const l=this._getStyleDeclaration(n,s),c=this.getCompleteStyleDeclaration(n,s),h=e==="fillText"&&c.fill,d=e==="strokeText"&&c.stroke&&c.strokeWidth;if(d||h){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),h){const f=this._setFillStyles(t,c);t.fillText(i,o-f.offsetX,a-f.offsetY)}if(d){const f=this._setStrokeStyles(t,c);t.strokeText(i,o-f.offsetX,a-f.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*n.size,deltaY:o+i*n.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===zr||s===wa&&!o||s===xa&&!o||s===Ru&&!o?0:(s===te&&(a=n/2),s===Pe&&(a=n),s===wa&&(a=n/2),s===xa&&(a=n),i==="rtl"&&(s===Pe||s===zr||s===xa?a=0:s===he||s===Ru?a=-n:s!==te&&s!==wa||(a=-n/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var s;return(s=this._getStyleDeclaration(e,t)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=t==="linethrough"?.5:t==="overline"?1:0,l=this.offsets[t];for(let c=0,h=this._textLines.length;c<h;c++){const d=this.getHeightOfLine(c);if(!this[t]&&!this.styleHas(t,c)){n+=d;continue}const f=this._textLines[c],g=d/this.lineHeight,m=this._getLineLeftOffset(c);let p=0,y=0,v=this.getValueOfPropertyAt(c,0,t),x=this.getValueOfPropertyAt(c,0,ze),w=this.getValueOfPropertyAt(c,0,ei),_=v,S=x,C=w;const T=n+g*(1-this._fontSizeFraction);let E=this.getHeightOfChar(c,0),D=this.getValueOfPropertyAt(c,0,"deltaY");for(let R=0,z=f.length;R<z;R++){const M=this.__charBounds[c][R];_=this.getValueOfPropertyAt(c,R,t),S=this.getValueOfPropertyAt(c,R,ze),C=this.getValueOfPropertyAt(c,R,ei);const Y=this.getHeightOfChar(c,R),V=this.getValueOfPropertyAt(c,R,"deltaY");if(i&&_&&S){const G=this.fontSize*C/1e3;e.save(),e.fillStyle=x,e.translate(M.renderLeft,M.renderTop),e.rotate(M.angle),e.fillRect(-M.kernedWidth/2,l*Y+V-a*G,M.kernedWidth,G),e.restore()}else if((_!==v||S!==x||Y!==E||C!==w||V!==D)&&y>0){const G=this.fontSize*w/1e3;let O=s+m+p;this.direction==="rtl"&&(O=this.width-O-y),v&&x&&w&&(e.fillStyle=x,e.fillRect(O,T+l*E+D-a*G,y,G)),p=M.left,y=M.width,v=_,w=C,x=S,E=Y,D=V}else y+=M.kernedWidth}let N=s+m+p;this.direction==="rtl"&&(N=this.width-N-y),e.fillStyle=S;const F=this.fontSize*C/1e3;_&&S&&C&&e.fillRect(N,T+l*E+D-a*F,y-o,F),n+=d}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||ut.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return dm(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)n[o]=this.graphemeSplit(t[o]),i=i.concat(n[o],s);return i.pop(),{_unwrappedLines:n,lines:t,graphemeText:i,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject([...v2,...e])),{},{styles:d3(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||n.includes(o),i=i||o==="path";else s=n.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const s=On(e,ut.ATTRIBUTE_NAMES,n),i=k(k({},t),s),{textAnchor:o=he,textDecoration:a="",dx:l=0,dy:c=0,top:h=0,left:d=0,fontSize:f=Zg,strokeWidth:g=1}=i,m=Ce(i,CL),p=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),k({left:d+l,top:h+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:f},m)),y=p.getScaledHeight()/p.height,v=((p.height+p.strokeWidth)*p.lineHeight-p.height)*y,x=p.getScaledHeight()+v;let w=0;return o===te&&(w=p.getScaledWidth()/2),o===Pe&&(w=p.getScaledWidth()),p.set({left:p.left-w,top:p.top-(x-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:g}),p}static fromObject(e){return this._fromObject(k(k({},e),{},{styles:f3(e.styles||{},e.text)}),{extraParam:"text"})}}j(ut,"textLayoutProperties",m2),j(ut,"cacheProperties",[...En,...v2]),j(ut,"ownDefaults",j5),j(ut,"type","Text"),j(ut,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),j(ut,"ATTRIBUTE_NAMES",Cs.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),k2(ut,[class extends f2{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0}),t=this.path;return t?e+t._createBaseSVGMarkup(t._toSVG(),{reviver:r,withShadow:!0,additionalTransform:Ka(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(SL,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],n=[];let s,i=r;this.backgroundColor&&n.push(...Yd(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(n,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:n}}_createTextCharSpan(r,e,t,n,s){const i=oe.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match(_L)),a=o?'style="'.concat(o,'"'):"",l=e.deltaY,c=l?' dy="'.concat(ge(l,i),'" '):"",{angle:h,renderLeft:d,renderTop:f,width:g}=s;let m="";if(d!==void 0){const p=g/2;h&&(m=' rotate="'.concat(ge(jn(h),i),'"'));const y=Ro({angle:jn(h)});y[4]=d,y[5]=f;const v=new P(-p,0).transform(y);t=v.x,n=v.y}return'<tspan x="'.concat(ge(t,i),'" y="').concat(ge(n,i),'" ').concat(c).concat(m).concat(a,">").concat(c3(r),"</tspan>")}_setSVGTextLineText(r,e,t,n){const s=this.getHeightOfLine(e),i=this.textAlign.includes(zr),o=this._textLines[e];let a,l,c,h,d,f="",g=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let m=0,p=o.length-1;m<=p;m++)d=m===p||this.charSpacing||this.path,f+=o[m],c=this.__charBounds[e][m],g===0?(t+=c.kernedWidth-c.width,g+=c.width):g+=c.kernedWidth,i&&!d&&this._reSpaceAndTab.test(o[m])&&(d=!0),d||(a=a||this.getCompleteStyleDeclaration(e,m),l=this.getCompleteStyleDeclaration(e,m+1),d=fm(a,l,!0)),d&&(h=this._getStyleDeclaration(e,m),r.push(this._createTextCharSpan(f,h,t,n,c)),f="",a=l,this.direction==="rtl"?t-=g:t+=g,g=0)}_setSVGTextLineBg(r,e,t,n){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let h=0;h<s.length;h++){const{left:d,width:f,kernedWidth:g}=this.__charBounds[e][h];o=this.getValueOfPropertyAt(e,h,"textBackgroundColor"),o!==c?(c&&r.push(...Yd(c,t+l,n,a,i)),l=d,a=f,c=o):a+=g}o&&r.push(...Yd(c,t+l,n,a,i))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," text-decoration-thickness: ").concat(ge(this.textDecorationThickness*this.getObjectScaling().y/10,oe.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:n,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:h,linethrough:d,overline:f,underline:g}=r,m=this.getSvgTextDecoration({underline:g??this.underline,overline:f??this.overline,linethrough:d??this.linethrough}),p=h||this.textDecorationThickness;return[s?Qa(Et,s):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",m?"text-decoration: ".concat(m,"; text-decoration-thickness: ").concat(ge(p*this.getObjectScaling().y/10,oe.NUM_FRACTION_DIGITS),"%; "):"",i?Qa(ze,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter(e=>r[e.replace("-","")]).join(" ")}}]),W.setClass(ut),W.setSVGClass(ut);class jL{constructor(e){j(this,"target",void 0),j(this,"__mouseDownInPlace",!1),j(this,"__dragStartFired",!1),j(this,"__isDraggingOver",!1),j(this,"__dragStartSelection",void 0),j(this,"__dragImageDisposer",void 0),j(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,a=o.canvas,l=new P(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),h=new P(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),d=a.getScenePoint(e).subtract(h),f=o.getCanvasRetinaScaling(),g=o.getBoundingRect(),m=h.subtract(new P(g.left,g.top)),p=a.viewportTransform,y=m.add(d).transform(p,!0),v=o.backgroundColor,x=hm(o.styles);o.backgroundColor="";const w={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(w,0,s),o.setSelectionStyles(w,i,o.text.length),o.dirty=!0;const _=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=v,o.styles=x,o.dirty=!0,Ep(_,{position:"fixed",left:"".concat(-_.width,"px"),border:Tt,width:"".concat(_.width/f,"px"),height:"".concat(_.height/f,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{_.remove()},xr(e.target||this.target.hiddenTextarea).body.appendChild(_),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(_,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=k({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let i=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(n);const{styles:c}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},h=i[Math.max(0,i.length-1)],d=0;if(this.__dragStartSelection){const f=this.__dragStartSelection.selectionStart,g=this.__dragStartSelection.selectionEnd;l>f&&l<=g?l=f:l>g&&(l-=g-f),o.removeChars(f,g),delete this.__dragStartSelection}o._reNewline.test(h)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(n),o.selectionStart=Math.min(l+d,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Ou,{index:l+d,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||Tt;l===Tt?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(Ou,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Cy=/[ \n\.,;!\?\-]/;class kL extends ut{constructor(){super(...arguments),j(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:s,onComplete:i}=e;return b2({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let s=e>0&&this._reSpace.test(n[e])&&(t===-1||!em.test(n[e-1]))?e-1:e,i=n[s];for(;s>0&&s<n.length&&!Cy.test(i);)s+=t,i=n[s];return t===-1&&Cy.test(i)&&s++,s}selectWord(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const n=this.searchWordBoundary(e,-1),s=Math.max(n,this.searchWordBoundary(e,1));this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=(t=e)!==null&&t!==void 0?t:this.selectionStart;const n=this.findLineBoundaryLeft(e),s=this.findLineBoundaryRight(e);this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;xr(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==i||s!==n&&i!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const s=n.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=n.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,n){const s=n.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),s=n.lineIndex,i=n.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,h=c.width/l,d=c.height/l,f=h-o,g=d-o,m=new P(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new P(c.clientWidth/h,c.clientHeight/d));return m.x<0&&(m.x=0),m.x>f&&(m.x=f),m.y<0&&(m.y=0),m.y>g&&(m.y=g),m.x+=this.canvas._offset.left,m.y+=this.canvas._offset.top,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Nu),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(n!==i){if(this.styles[n])for(let a=s;a<this._unwrappedTextLines[n].length;a++)delete this.styles[n][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+a-o]=l)}for(let a=n+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,n-i)}else if(this.styles[n]){const a=this.styles[n],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[n]){const h=parseInt(c,10);h>=o&&(a[h-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=n[i],n[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,n,s){const i={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;n||(n=1),this.shiftLineStyles(e,n);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const d in this.styles[e]){const f=parseInt(d,10);f>=t&&(l=!0,i[f-t]=this.styles[e][d],a&&t===0||delete this.styles[e][d])}let h=!1;for(l&&!a&&(this.styles[e+n]=i,h=!0),(h||o>t)&&n--;n>0;)s&&s[n-1]?this.styles[e+n]={0:k({},s[n-1])}:c?this.styles[e+n]={0:k({},c)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,s){this.styles||(this.styles={});const i=this.styles[e],o=i?k({},i):{};n||(n=1);for(const l in o){const c=parseInt(l,10);c>=t&&(i[c+n]=o[c],o[c-n]||delete i[c])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=k({},s[n]));return}if(!i)return;const a=i[t?t-1:1];for(;a&&n--;)this.styles[e][t+n]=k({},a)}insertNewStyleBlock(e,t,n){const s=this.get2DCursorLocation(t,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],n),n=n&&n.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],n):n&&this.styles[s.lineIndex+o]&&n[0]&&(this.styles[s.lineIndex+o][0]=n[0]),n=n&&n.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,n,t),this._text=[...this._text.slice(0,n),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=he:this._selectionDirection===Pe&&(this._selectionDirection=he,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===Pe?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=Pe:this._selectionDirection===he&&(this._selectionDirection=Pe,this.selectionStart=t),this.selectionEnd=n)}}class TL extends kL{initHiddenTextarea(){const e=this.canvas&&xr(this.canvas.getElement())||Do(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:n,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:n,selectionStart:s,selectionEnd:i}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(Ou),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(n).graphemeText,l=this._text.length,c=a.length,h=this.selectionStart,d=this.selectionEnd,f=h!==d;let g,m,p,y,v=c-l;const x=this.fromStringToGraphemeSelection(s,i,n),w=h>x.selectionStart;f?(m=this._text.slice(h,d),v+=d-h):c<l&&(m=w?this._text.slice(d+v,d):this._text.slice(h,h-v));const _=a.slice(x.selectionEnd-v,x.selectionEnd);if(m&&m.length&&(_.length&&(g=this.getSelectionStyles(h,h+1,!1),g=_.map(()=>g[0])),f?(p=h,y=d):w?(p=d-m.length,y=d):(p=d,y=d+m.length),this.removeStyleFromTo(p,y)),_.length){const{copyPasteData:S}=Yr();t&&_.join("")===S.copiedText&&!oe.disableStyleCopyPaste&&(g=S.copiedTextStyle),this.insertNewStyleBlock(_,h,g)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:s}=t;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Yr();e.copiedText=this.getSelectedText(),oe.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,s=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],s+=n.left+n.width),s}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),h=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-h)}_getIndexOnLine(e,t){const n=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=n.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const h=o-s,d=o,f=Math.abs(h-t);a=Math.abs(d-t)<f?l:l-1;break}return i||(a=n.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Pe);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=wo(0,this.selectionStart,s),this.selectionEnd=wo(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===he?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let s;if(e.altKey)s=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=he,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Pe&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=he,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===he&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Pe,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Pe,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const jy=r=>!!r.button;class EL extends TL{constructor(){super(...arguments),j(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new jL(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:n}=e;this.canvas&&this.editable&&!jy(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:n}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||jy(t)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(wr(this.calcTransformMatrix())).add(new P(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,i=0;for(let c=0;c<this._textLines.length&&n<=t.y;c++)n+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const h=o+l[c].kernedWidth;if(t.x<=h){Math.abs(t.x-h)<=Math.abs(t.x-o)&&s++;break}o=h,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const sc="moveCursorUp",ic="moveCursorDown",oc="moveCursorLeft",ac="moveCursorRight",lc="exitEditing",ky=(r,e)=>{const t=e.getRetinaScaling();r.setTransform(t,0,0,t,0,0);const n=e.viewportTransform;r.transform(n[0],n[1],n[2],n[3],n[4],n[5])},OL=k({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:lc,27:lc,33:sc,34:ic,35:ac,36:oc,37:oc,38:sc,39:ac,40:ic},keysMapRtl:{9:lc,27:lc,33:sc,34:ic,35:oc,36:ac,37:ac,38:sc,39:oc,40:ic},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class dn extends EL{static getDefaults(){return k(k({},super.getDefaults()),dn.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,k(k({},dn.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof Op&&this.canvas.textEditingManager.remove(this),t instanceof Op&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),s=n.length>0;let i,o=e;if(s){i=or(e.canvas),o=i.getContext("2d"),ky(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,t):this.renderCursor(o,t),s)for(const a of n){const l=a.clipPath,c=or(e.canvas),h=c.getContext("2d");if(ky(h,this.canvas),!l.absolutePositioned){const d=a.calcTransformMatrix();h.transform(d[0],d[1],d[2],d[3],d[4],d[5])}l.transform(h),l.drawObject(h,!0,{}),this.drawClipPathOnCache(o,l,c)}s&&(e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:n,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(n=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(n-=this._getWidthOfCharSpacing());const l={top:t,left:o+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===Pe||this.textAlign===zr||this.textAlign===xa?l.left*=-1:this.textAlign===he||this.textAlign===Ru?l.left=o-(n>0?n:0):this.textAlign!==te&&this.textAlign!==wa||(l.left=o-(n>0?n:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),s=n.lineIndex,i=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(s,i,"deltaY"),h=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:h+t.top+c,width:l,height:o}}_renderCursor(e,t,n){const{color:s,opacity:i,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(n,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,a,l,c)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(zr),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,h=l.lineIndex,d=a.charIndex<0?0:a.charIndex,f=l.charIndex<0?0:l.charIndex;for(let g=c;g<=h;g++){const m=this._getLineLeftOffset(g)||0;let p=this.getHeightOfLine(g),y=0,v=0,x=0;if(g===c&&(v=this.__charBounds[c][d].left),g>=c&&g<h)x=o&&!this.isEndOfWrapping(g)?this.width:this.getLineWidth(g)||5;else if(g===h)if(f===0)x=this.__charBounds[h][f].left;else{const T=this._getWidthOfCharSpacing();x=this.__charBounds[h][f-1].left+this.__charBounds[h][f-1].width-T}y=p,(this.lineHeight<1||g===h&&this.lineHeight>1)&&(p/=this.lineHeight);let w=n.left+m+v,_=p,S=0;const C=x-v;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",_=1,S=p):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Pe||this.textAlign===zr||this.textAlign===xa?w=this.width-w-C:this.textAlign===he||this.textAlign===Ru?w=n.left+m-x:this.textAlign!==te&&this.textAlign!==wa||(w=n.left+m-x)),e.fillRect(w,n.top+n.topOffset+S,C,_),n.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,ze)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}j(dn,"ownDefaults",OL),j(dn,"type","IText"),W.setClass(dn),W.setClass(dn,"i-text");class fn extends dn{static getDefaults(){return k(k({},super.getDefaults()),fn.ownDefaults)}constructor(e,t){super(e,k(k({},fn.ownDefaults),t))}static createControls(){return{controls:i3()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(zr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(n=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(n++,s++),i[o]={line:t,offset:n},s+=e.graphemeLines[o].length,n+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,n=o.offset),a&&(s=a.line,i=s===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const h in l[c]){const d=parseInt(h,10);if(d>=n&&(!i||d<t))for(const f in l[c][h])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<n.wordsData.length;i++)s.push(...this._wrapLine(i,t,n));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const h=t?[c]:this.graphemeSplit(c),d=this._measureWord(h,o,a);return s=Math.max(d,s),a+=h.length+n.length,{word:h,width:d}})}),largestWordWidth:s}}_measureWord(e,t){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+s,n,!0).kernedWidth,n=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:s,wordsData:i}=n,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],h=l?"":" ";let d=0,f=[],g=0,m=0,p=!0;t-=o;const y=Math.max(t,s,this.dynamicMinWidth),v=i[e];let x;for(g=0,x=0;x<v.length;x++){const{word:w,width:_}=v[x];g+=w.length,d+=m+_-a,d>y&&!p?(c.push(f),f=[],d=_,p=!0):d+=a,p||l||f.push(h),f=f.concat(w),m=l?0:this._measureWord([h],e,g),g++,p=!1}return x&&c.push(f),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),s=new Array(n.length);for(let i=0;i<n.length;i++)s[i]=n[i].join("");return t.lines=s,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}j(fn,"type","Textbox"),j(fn,"textLayoutProperties",[...dn.textLayoutProperties,"width"]),j(fn,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),W.setClass(fn);class Ty extends Rh{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:s,group:i}=n;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=gn(O2(n,s)),l=new P(o,a);if(s.absolutePositioned)return{center:Ki(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:h=new P,correction:d=new P}=this.calcBoundingBox(t,e)||{};return{center:h.add(c),correction:d.subtract(c),size:l}}return{center:n.getRelativeCenterPoint().add(c),size:l}}}}j(Ty,"type","clip-path"),W.setClass(Ty);class Ey extends Rh{getInitialSize(e,t){let{target:n}=e,{size:s}=t;return new P(n.width||s.x,n.height||s.y)}}j(Ey,"type","fixed"),W.setClass(Ey);class NL extends Za{subscribeTargets(e){const t=e.target;e.targets.reduce((n,s)=>(s.parent&&n.add(s.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!n.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Fs extends Ys{static getDefaults(){return k(k({},super.getDefaults()),Fs.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Fs.ownDefaults),this.setOptions(t);const{left:n,top:s,layoutManager:i}=t;this.groupInit(e,{left:n,top:s,layoutManager:i??new NL})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(gs("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(s=>{const{parent:i}=s;i&&n.add(i)}),e===gm?n.forEach(s=>{s._onAfterObjectsChange(Lu,t)}):n.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=k(k({hasControls:!1},n),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}j(Fs,"type","ActiveSelection"),j(Fs,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),W.setClass(Fs),W.setClass(Fs,"activeSelection");class PL{constructor(){j(this,"resources",{})}applyFilters(e,t,n,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,n,s);const a={sourceWidth:n,sourceHeight:s,imageData:o.getImageData(0,0,n,s),originalEl:t,originalImageData:o.getImageData(0,0,n,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===n&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class Y2{constructor(){let{tileSize:e=oe.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};j(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),j(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=or({width:e,height:t}),s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(e,t,n,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const h={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,n,s,c?void 0:t),targetTexture:this.createTexture(a,n,s),originalTexture:c||this.createTexture(a,n,s,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},d=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,d),e.forEach(f=>{f&&f.applyTo(h)}),function(f){const g=f.targetCanvas,m=g.width,p=g.height,y=f.destinationWidth,v=f.destinationHeight;m===y&&p===v||(g.width=y,g.height=v)}(h),this.copyGLTo2D(a,h),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(h.sourceTexture),a.deleteTexture(h.targetTexture),a.deleteFramebuffer(d),l.setTransform(1,0,0,1,0,0),h}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:h,TEXTURE_MAG_FILTER:d,TEXTURE_MIN_FILTER:f,TEXTURE_WRAP_S:g,TEXTURE_WRAP_T:m}=e,p=e.createTexture();return e.bindTexture(a,p),e.texParameteri(a,d,i||o),e.texParameteri(a,f,i||o),e.texParameteri(a,g,h),e.texParameteri(a,m,h),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,t,n,0,l,c,null),p}getCachedTexture(e,t,n){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,n);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=n.height-s.height;i.drawImage(n,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!n)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);n.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const s=e.getParameter(n.UNMASKED_RENDERER_WEBGL),i=e.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let Xd;function DL(){const{WebGLProbe:r}=Yr();return r.queryWebGL(Cn()),oe.enableGLFiltering&&r.isSupported(oe.textureSize)?new Y2({tileSize:oe.textureSize}):new PL}function qd(){return!Xd&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Xd=DL()),Xd}const AL=["filters","resizeFilter","src","crossOrigin","type"],G2=["cropX","cropY"];class Xt extends ot{static getDefaults(){return k(k({},super.getDefaults()),Xt.ownDefaults)}constructor(e,t){super(),j(this,"_lastScaleX",1),j(this,"_lastScaleY",1),j(this,"_filterScalingX",1),j(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Xt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(ms()),this.setElement(typeof e=="string"?(this.canvas&&xr(this.canvas.getElement())||Do()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),(t=e.classList)===null||t===void 0||t.add(Xt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=qd(!1);t instanceof Y2&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Yr().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),k(k({},super.toObject([...G2,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=ms();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==ze?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Hc(e,{crossOrigin:t,signal:n}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,i=n.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=or(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,qd().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=or({width:n,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);qd().applyFilters(e,this._originalElement,n,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,h=t.naturalHeight||t.height,d=a*n,f=l*s,g=Math.min(i*n,c-d),m=Math.min(o*s,h-f),p=-i/2,y=-o/2,v=Math.min(i,c/n-a),x=Math.min(o,h/s-l);t&&e.drawImage(t,d,f,g,m,p,y,v,x)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=S5(this.preserveAspectRatio||""),t=this.width,n=this.height,s={width:t,height:n};let i,o=this._element.width,a=this._element.height,l=1,c=1,h=0,d=0,f=0,g=0;return!e||e.alignX===Tt&&e.alignY===Tt?(l=t/o,c=n/a):(e.meetOrSlice==="meet"&&(l=c=$3(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(h=-i),e.alignX==="Max"&&(h=i),i=(n-a*c)/2,e.alignY==="Min"&&(d=-i),e.alignY==="Max"&&(d=i)),e.meetOrSlice==="slice"&&(l=c=z3(this._element,s),i=o-t/l,e.alignX==="Mid"&&(f=i/2),e.alignX==="Max"&&(f=i),i=a-n/c,e.alignY==="Mid"&&(g=i/2),e.alignY==="Max"&&(g=i),o=t/l,a=n/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:h,offsetTop:d,cropX:f,cropY:g}}static fromObject(e,t){let{filters:n,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=Ce(e,AL);return Promise.all([Hc(i,k(k({},t),{},{crossOrigin:o})),n&&qa(n,t),s&&qa([s],t),Ph(l,t)]).then(c=>{let[h,d=[],[f]=[],g={}]=c;return new this(h,k(k({},l),{},{src:i,filters:d,resizeFilter:f},g))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return Hc(e,{crossOrigin:t,signal:n}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=On(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"]||s.href,t,s).catch(i=>(gs("log","Unable to parse Image",i),null))}}j(Xt,"type","Image"),j(Xt,"cacheProperties",[...En,...G2]),j(Xt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),j(Xt,"CSS_CANVAS","canvas-img"),j(Xt,"ATTRIBUTE_NAMES",[...Cs,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),W.setClass(Xt),W.setSVGClass(Xt);Ah(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ih=r=>r.webgl!==void 0,mm="precision highp float",ML=`
    `.concat(mm,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),RL=["type"],LL=["type"],IL=new RegExp(mm,"g");class Be{get type(){return this.constructor.type}constructor(){let e=Ce(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},RL);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return ML}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Yr();s!=="highp"&&(t=t.replace(IL,mm.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new Br("Vertex, fragment shader or program creation error");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Br("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Br("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Br('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,s={};for(let i=0;i<n.length;i++)s[n[i]]=e.getUniformLocation(t,n[i]);return s}sendAttributeData(e,t,n){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Ih(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,s=or({width:t,height:n});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return k({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Ce(e,LL))}}j(Be,"type","BaseFilter"),j(Be,"uniformLocations",[]);const FL={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class cc extends Be{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(FL[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new ue(this.color).getSource(),s=this.alpha,i=n[0]*s,o=n[1]*s,a=n[2]*s,l=1-s;for(let c=0;c<t.length;c+=4){const h=t[c],d=t[c+1],f=t[c+2];let g,m,p;switch(this.mode){case"multiply":g=h*i/255,m=d*o/255,p=f*a/255;break;case"screen":g=255-(255-h)*(255-i)/255,m=255-(255-d)*(255-o)/255,p=255-(255-f)*(255-a)/255;break;case"add":g=h+i,m=d+o,p=f+a;break;case"difference":g=Math.abs(h-i),m=Math.abs(d-o),p=Math.abs(f-a);break;case"subtract":g=h-i,m=d-o,p=f-a;break;case"darken":g=Math.min(h,i),m=Math.min(d,o),p=Math.min(f,a);break;case"lighten":g=Math.max(h,i),m=Math.max(d,o),p=Math.max(f,a);break;case"overlay":g=i<128?2*h*i/255:255-2*(255-h)*(255-i)/255,m=o<128?2*d*o/255:255-2*(255-d)*(255-o)/255,p=a<128?2*f*a/255:255-2*(255-f)*(255-a)/255;break;case"exclusion":g=i+h-2*i*h/255,m=o+d-2*o*d/255,p=a+f-2*a*f/255;break;case"tint":g=i+h*l,m=o+d*l,p=a+f*l}t[c]=g,t[c+1]=m,t[c+2]=p}}sendUniformData(e,t){const n=new ue(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}j(cc,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),j(cc,"type","BlendColor"),j(cc,"uniformLocations",["uColor"]),W.setClass(cc);const $L={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},zL=["type","image"];class uc extends Be{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return $L[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=Cn());const a=i.blendImage,l=a.getContext("2d");a.width!==n||a.height!==s?(a.width=n,a.height=s):l.clearRect(0,0,n,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,n,s);const c=l.getImageData(0,0,n,s).data;for(let h=0;h<t.length;h+=4){const d=t[h],f=t[h+1],g=t[h+2],m=t[h+3],p=c[h],y=c[h+1],v=c[h+2],x=c[h+3];switch(this.mode){case"multiply":t[h]=d*p/255,t[h+1]=f*y/255,t[h+2]=g*v/255,t[h+3]=m*x/255;break;case"mask":t[h+3]=x}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return k(k({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:s}=e,i=Ce(e,zL);return Xt.fromObject(s,t).then(o=>new this(k(k({},i),{},{image:o})))}}j(uc,"type","BlendImage"),j(uc,"defaults",{mode:"multiply",alpha:1}),j(uc,"uniformLocations",["uTransformMatrix","uImage"]),W.setClass(uc);class hc extends Be{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Ih(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;this.aspectRatio=n/s,this.horizontal=!0;let i=this.getBlurValue()*n;const o=new Uint8ClampedArray(t),a=15,l=4*n;for(let c=0;c<t.length;c+=4){let h=0,d=0,f=0,g=0,m=0;const p=c-c%l,y=p+l;for(let v=-14;v<a;v++){const x=v/a,w=4*Math.floor(i*x),_=1-Math.abs(x);let S=c+w;S<p?S=p:S>y&&(S=y);const C=t[S+3]*_;h+=t[S]*C,d+=t[S+1]*C,f+=t[S+2]*C,g+=C,m+=_}o[c]=h/g,o[c+1]=d/g,o[c+2]=f/g,o[c+3]=g/m}this.horizontal=!1,i=this.getBlurValue()*s;for(let c=0;c<o.length;c+=4){let h=0,d=0,f=0,g=0,m=0;const p=c%l,y=o.length-l+p;for(let v=-14;v<a;v++){const x=v/a,w=Math.floor(i*x)*l,_=1-Math.abs(x);let S=c+w;S<p?S=p:S>y&&(S=y);const C=o[S+3]*_;h+=o[S]*C,d+=o[S+1]*C,f+=o[S+2]*C,g+=C,m+=_}t[c]=h/g,t[c+1]=d/g,t[c+2]=f/g,t[c+3]=g/m}}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:n}=this;return t?n>1&&(e=1/n):n<1&&(e=n),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}j(hc,"type","Blur"),j(hc,"defaults",{blur:0}),j(hc,"uniformLocations",["uDelta"]),W.setClass(hc);class dc extends Be{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=n,t[s+1]+=n,t[s+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}j(dc,"type","Brightness"),j(dc,"defaults",{brightness:0}),j(dc,"uniformLocations",["uBrightness"]),W.setClass(dc);const X2={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class $i extends Be{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],a=t[i+1],l=t[i+2];if(t[i]=o*n[0]+a*n[1]+l*n[2]+255*n[4],t[i+1]=o*n[5]+a*n[6]+l*n[7]+255*n[9],t[i+2]=o*n[10]+a*n[11]+l*n[12]+255*n[14],!s){const c=t[i+3];t[i]+=c*n[3],t[i+1]+=c*n[8],t[i+2]+=c*n[13],t[i+3]=o*n[15]+a*n[16]+l*n[17]+c*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],i=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return k(k({},super.toObject()),{},{matrix:[...this.matrix]})}}function oi(r,e){var t;const n=(j(t=class extends $i{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),j(t,"defaults",{colorsOnly:!1,matrix:e}),t);return W.setClass(n,r),n}j($i,"type","ColorMatrix"),j($i,"defaults",X2),j($i,"uniformLocations",["uColorMatrix","uConstants"]),W.setClass($i);oi("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);oi("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);oi("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);oi("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);oi("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);oi("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);oi("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Oy extends Be{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ih(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>W.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}j(Oy,"type","Composed"),W.setClass(Oy);class fc extends Be{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}j(fc,"type","Contrast"),j(fc,"defaults",{contrast:0}),j(fc,"uniformLocations",["uContrast"]),W.setClass(fc);const BL={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class pc extends Be{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return BL[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),h=c.data,d=this.opaque?1:0;let f,g,m,p,y,v,x,w,_,S,C,T,E;for(C=0;C<l;C++)for(S=0;S<a;S++){for(y=4*(C*a+S),f=0,g=0,m=0,p=0,E=0;E<i;E++)for(T=0;T<i;T++)x=C+E-o,v=S+T-o,x<0||x>=l||v<0||v>=a||(w=4*(x*a+v),_=s[E*i+T],f+=n[w]*_,g+=n[w+1]*_,m+=n[w+2]*_,d||(p+=n[w+3]*_));h[y]=f,h[y+1]=g,h[y+2]=m,h[y+3]=d?n[y+3]:p}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return k(k({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}j(pc,"type","Convolute"),j(pc,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),j(pc,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),W.setClass(pc);const q2="Gamma";class gc extends Be{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,s=1/n[0],i=1/n[1],o=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:q2,gamma:this.gamma.concat()}}}j(gc,"type",q2),j(gc,"defaults",{gamma:[1,1,1]}),j(gc,"uniformLocations",["uGamma"]),W.setClass(gc);const UL={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class mc extends Be{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2];switch(this.mode){case"average":n=(i+o+a)/3;break;case"lightness":n=(Math.min(i,o,a)+Math.max(i,o,a))/2;break;case"luminosity":n=.21*i+.72*o+.07*a}t[s+2]=t[s+1]=t[s]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return UL[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}j(mc,"type","Grayscale"),j(mc,"defaults",{mode:"average"}),j(mc,"uniformLocations",["uMode"]),W.setClass(mc);const WL=k(k({},X2),{},{rotation:0});class Kd extends $i{calculateMatrix(){const e=this.rotation*Math.PI,t=_n(e),n=Sn(e),s=1/3,i=Math.sqrt(s)*n,o=1-t;this.matrix=[t+o/3,s*o-i,s*o+i,0,0,s*o+i,t+s*o,s*o-i,0,0,s*o-i,s*o+i,t+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}j(Kd,"type","HueRotation"),j(Kd,"defaults",WL),W.setClass(Kd);class vc extends Be{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}j(vc,"type","Invert"),j(vc,"defaults",{alpha:!1,invert:!0}),j(vc,"uniformLocations",["uInvert","uAlpha"]),W.setClass(vc);class yc extends Be{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*n;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}j(yc,"type","Noise"),j(yc,"defaults",{noise:0}),j(yc,"uniformLocations",["uNoise","uSeed"]),W.setClass(yc);class xc extends Be{applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<n;o+=this.blocksize){const a=4*i*n+4*o,l=t[a],c=t[a+1],h=t[a+2],d=t[a+3];for(let f=i;f<Math.min(i+this.blocksize,s);f++)for(let g=o;g<Math.min(o+this.blocksize,n);g++){const m=4*f*n+4*g;t[m]=l,t[m+1]=c,t[m+2]=h,t[m+3]=d}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}j(xc,"type","Pixelate"),j(xc,"defaults",{blocksize:4}),j(xc,"uniformLocations",["uBlocksize"]),W.setClass(xc);class wc extends Be{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,s=new ue(this.color).getSource(),i=[s[0]-n,s[1]-n,s[2]-n],o=[s[0]+n,s[1]+n,s[2]+n];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],h=t[a+2];l>i[0]&&c>i[1]&&h>i[2]&&l<o[0]&&c<o[1]&&h<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const n=new ue(this.color).getSource(),s=this.distance,i=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],o=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}j(wc,"type","RemoveColor"),j(wc,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),j(wc,"uniformLocations",["uLow","uHigh"]),W.setClass(wc);class bc extends Be{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let i=1;i<=n;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ih(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const i=t.width,o=t.height,a=Math.round(i*n),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,n,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,h=t*a,d=n*a;const f=e.filterBackend.resources;let g=0,m=0;const p=t;let y=0;f.sliceByTwo||(f.sliceByTwo=Cn());const v=f.sliceByTwo;(v.width<1.5*t||v.height<n)&&(v.width=1.5*t,v.height=n);const x=v.getContext("2d");for(x.clearRect(0,0,1.5*t,n),x.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)t=h,n=d,s<Math.floor(h*a)?h=Math.floor(h*a):(h=s,l=!0),i<Math.floor(d*a)?d=Math.floor(d*a):(d=i,c=!0),x.drawImage(v,g,m,t,n,p,y,h,d),g=p,m=y,y+=d;return x.getImageData(g,m,s,i)}lanczosResize(e,t,n,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),h=this.rcpScaleX,d=this.rcpScaleY,f=2/this.rcpScaleX,g=2/this.rcpScaleY,m=Math.ceil(h*this.lanczosLobes/2),p=Math.ceil(d*this.lanczosLobes/2),y={},v={x:0,y:0},x={x:0,y:0};return function w(_){let S,C,T,E,D,N,F,R,z,M,Y;for(v.x=(_+.5)*h,x.x=Math.floor(v.x),S=0;S<i;S++){for(v.y=(S+.5)*d,x.y=Math.floor(v.y),D=0,N=0,F=0,R=0,z=0,C=x.x-m;C<=x.x+m;C++)if(!(C<0||C>=t)){M=Math.floor(1e3*Math.abs(C-v.x)),y[M]||(y[M]={});for(let V=x.y-p;V<=x.y+p;V++)V<0||V>=n||(Y=Math.floor(1e3*Math.abs(V-v.y)),y[M][Y]||(y[M][Y]=c(Math.sqrt(Math.pow(M*f,2)+Math.pow(Y*g,2))/1e3)),T=y[M][Y],T>0&&(E=4*(V*t+C),D+=T,N+=T*o[E],F+=T*o[E+1],R+=T*o[E+2],z+=T*o[E+3]))}E=4*(S*s+_),l[E]=N/D,l[E+1]=F/D,l[E+2]=R/D,l[E+3]=z/D}return++_<s?w(_):a}(0)}bilinearFiltering(e,t,n,s,i){let o,a,l,c,h,d,f,g,m,p,y,v,x,w=0;const _=this.rcpScaleX,S=this.rcpScaleY,C=4*(t-1),T=e.imageData.data,E=e.ctx.createImageData(s,i),D=E.data;for(f=0;f<i;f++)for(g=0;g<s;g++)for(h=Math.floor(_*g),d=Math.floor(S*f),m=_*g-h,p=S*f-d,x=4*(d*t+h),y=0;y<4;y++)o=T[x+y],a=T[x+4+y],l=T[x+C+y],c=T[x+C+4+y],v=o*(1-m)*(1-p)+a*m*(1-p)+l*p*(1-m)+c*m*p,D[w++]=v;return E}hermiteFastResize(e,t,n,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),h=e.imageData.data,d=e.ctx.createImageData(s,i),f=d.data;for(let g=0;g<i;g++)for(let m=0;m<s;m++){const p=4*(m+g*s);let y=0,v=0,x=0,w=0,_=0,S=0,C=0;const T=(g+.5)*a;for(let E=Math.floor(g*a);E<(g+1)*a;E++){const D=Math.abs(T-(E+.5))/c,N=(m+.5)*o,F=D*D;for(let R=Math.floor(m*o);R<(m+1)*o;R++){let z=Math.abs(N-(R+.5))/l;const M=Math.sqrt(F+z*z);M>1&&M<-1||(y=2*M*M*M-3*M*M+1,y>0&&(z=4*(R+E*t),C+=y*h[z+3],x+=y,h[z+3]<255&&(y=y*h[z+3]/250),w+=y*h[z],_+=y*h[z+1],S+=y*h[z+2],v+=y))}}f[p]=w/v,f[p+1]=_/v,f[p+2]=S/v,f[p+3]=C/x}return d}}j(bc,"type","Resize"),j(bc,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),j(bc,"uniformLocations",["uDelta","uTaps"]),W.setClass(bc);class _c extends Be{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a);t[s]+=l!==i?(l-i)*n:0,t[s+1]+=l!==o?(l-o)*n:0,t[s+2]+=l!==a?(l-a)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}j(_c,"type","Saturation"),j(_c,"defaults",{saturation:0}),j(_c,"uniformLocations",["uSaturation"]),W.setClass(_c);class Sc extends Be{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a),c=(i+o+a)/3,h=2*Math.abs(l-c)/255*n;t[s]+=l!==i?(l-i)*h:0,t[s+1]+=l!==o?(l-o)*h:0,t[s+2]+=l!==a?(l-a)*h:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}j(Sc,"type","Vibrance"),j(Sc,"defaults",{vibrance:0}),j(Sc,"uniformLocations",["uVibrance"]),W.setClass(Sc);const VL=({selectedTool:r,selectedColor:e,onObjectSelected:t})=>{const n=b.useRef(null),[s,i]=b.useState(null),{user:o,userProfile:a}=Xr(),[l,c]=b.useState(!1);b.useEffect(()=>{c((a==null?void 0:a.passport)==="НС0001")},[a]),b.useEffect(()=>{if(!n.current)return;const p=new Op(n.current,{width:1200,height:800,backgroundColor:"#ffffff"});try{const y=new el(p);y.color=e,y.width=3,p.freeDrawingBrush=y,console.log("Free drawing brush manually created:",p.freeDrawingBrush)}catch(y){console.error("Error creating pencil brush:",y)}return i(p),()=>{p.dispose()}},[]);const h=b.useCallback(async()=>{if(s)try{const{data:p,error:y}=await st.from("whiteboard_objects").select("*").order("created_at",{ascending:!0});if(y)throw y;s.clear(),s.backgroundColor="#ffffff",p==null||p.forEach(v=>{const x=d(v);x&&s.add(x)}),s.renderAll()}catch(p){console.error("Error loading whiteboard objects:",p),rn.error("Помилка завантаження дошки")}},[s]);b.useEffect(()=>{s&&h()},[s,h]),b.useEffect(()=>{if(!s)return;const p=st.channel("whiteboard-changes").on("postgres_changes",{event:"*",schema:"public",table:"whiteboard_objects"},async y=>{if(console.log("Real-time update:",y),y.eventType==="INSERT"){if(!s.getObjects().find(x=>x.customId===y.new.object_id)){const x=d(y.new);x&&(s.add(x),s.renderAll())}}else if(y.eventType==="UPDATE"){console.log("Applying update for object:",y.new.object_id,y.new.object_data);const v=s.getObjects().find(x=>x.customId===y.new.object_id);if(v&&s.getActiveObject()!==v){s.remove(v);const x=d(y.new);x&&(s.add(x),s.renderAll())}}else if(y.eventType==="DELETE"){const v=s.getObjects().find(x=>x.customId===y.old.object_id);v&&(s.remove(v),s.renderAll())}}).subscribe();return()=>{st.removeChannel(p)}},[s]);const d=p=>{try{const y=p.object_data;let v=null;switch(p.object_type){case"rectangle":v=new Qt({left:p.position_x,top:p.position_y,fill:y.fill,width:y.width,height:y.height,stroke:y.stroke,strokeWidth:y.strokeWidth,scaleX:y.scaleX||1,scaleY:y.scaleY||1,angle:y.angle||0});break;case"circle":v=new yr({left:p.position_x,top:p.position_y,fill:y.fill,radius:y.radius,stroke:y.stroke,strokeWidth:y.strokeWidth,scaleX:y.scaleX||1,scaleY:y.scaleY||1,angle:y.angle||0});break;case"text":v=new fn(y.text||"",{left:p.position_x,top:p.position_y,fill:y.fill,fontSize:y.fontSize||16,fontFamily:y.fontFamily||"Arial",scaleX:y.scaleX||1,scaleY:y.scaleY||1,angle:y.angle||0,editable:!0,selectable:!0,evented:!0,width:y.width||100});break;case"path":if(y&&y.path)try{v=new ln(y.path,{left:p.position_x,top:p.position_y,fill:y.fill||"",stroke:y.stroke||"#000",strokeWidth:y.strokeWidth||1,scaleX:y.scaleX||1,scaleY:y.scaleY||1,angle:y.angle||0})}catch(x){return console.error("Error creating path:",x),null}break}return v&&(v.customId=p.object_id,v.authorName=p.author_name,v.createdAt=p.created_at,v.userId=p.user_id,v.selectable=!0,v.evented=!0),v}catch(y){return console.error("Error recreating fabric object:",y),null}},f=async(p,y)=>{if(!(!o||!a))try{const v=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`;p.customId=v,p.authorName=a.surname,p.createdAt=new Date().toISOString(),p.userId=o.id,p.selectable=!0,p.evented=!0,p.moveCursor="move",p.hoverCursor="move";const x=p.toObject(["left","top","width","height","fill","stroke","strokeWidth","scaleX","scaleY","angle","radius","fontSize","fontFamily","text","path","customId","authorName","createdAt","userId"]);console.log("Saving object with data:",x);const{error:w}=await st.from("whiteboard_objects").insert({object_id:v,user_id:o.id,author_name:`${a.surname}`,object_data:x,object_type:y,position_x:p.left||0,position_y:p.top||0});if(w)throw w}catch(v){console.error("Error saving object:",v),rn.error("Помилка збереження об'єкту")}},g=async p=>{const y=p.customId;if(y)try{const v=p.toObject(["left","top","width","height","fill","stroke","strokeWidth","scaleX","scaleY","angle","radius","fontSize","fontFamily","text","path","customId","authorName","createdAt","userId"]);console.log("Updating object with data:",v);const{error:x}=await st.from("whiteboard_objects").update({object_data:v,position_x:p.left||0,position_y:p.top||0,updated_at:new Date().toISOString()}).eq("object_id",y);if(x)throw x}catch(v){console.error("Error updating object:",v),rn.error("Помилка оновлення об'єкту")}},m=async p=>{const y=p.customId;if(y)try{const{error:v}=await st.from("whiteboard_objects").delete().eq("object_id",y);if(v)throw v}catch(v){console.error("Error deleting object:",v),rn.error("Помилка видалення об'єкту")}};return b.useEffect(()=>{if(s){if(console.log("Selected tool:",r),s.off("mouse:down"),s.isDrawingMode=r==="draw",console.log("Drawing mode set to:",s.isDrawingMode),console.log("Free drawing brush exists:",!!s.freeDrawingBrush),r==="draw"){if(s.freeDrawingBrush)s.freeDrawingBrush.color=e,s.freeDrawingBrush.width=3,console.log("Free drawing brush configured with color:",e);else{console.error("Free drawing brush is still null after manual creation!");try{const p=new el(s);p.color=e,p.width=3,s.freeDrawingBrush=p,console.log("Emergency brush creation successful")}catch(p){console.error("Emergency brush creation failed:",p)}}return}if(["rectangle","circle","text"].includes(r)){const p=y=>{const v=s.getPointer(y.e);let x=null;switch(r){case"rectangle":x=new Qt({left:v.x-50,top:v.y-25,fill:e,width:100,height:50,stroke:"#000",strokeWidth:1});break;case"circle":x=new yr({left:v.x-25,top:v.y-25,fill:e,radius:25,stroke:"#000",strokeWidth:1});break;case"text":x=new fn("Текст",{left:v.x,top:v.y,fill:e,fontSize:16,fontFamily:"Arial",editable:!0,selectable:!0,evented:!0,width:100});break}x&&(x.selectable=!0,x.evented=!0,x.moveCursor="move",x.hoverCursor="move",s.add(x),s.setActiveObject(x),s.renderAll(),f(x,r))};return s.on("mouse:down",p),()=>{s.off("mouse:down",p)}}}},[s,r,e,o,a]),b.useEffect(()=>{if(!s)return;const p=async D=>{const N=D.target;if(N&&N.customId){const F=N.userId;if(!(l||F===(o==null?void 0:o.id))){rn.error("Ви можете редагувати тільки свої об'єкти");const{data:z,error:M}=await st.from("whiteboard_objects").select("*").eq("object_id",N.customId).single();if(z&&!M){s.remove(N);const Y=d(z);Y&&(s.add(Y),s.renderAll())}return}console.log("Object modified event fired:",N,"customId:",N.customId),g(N)}},y=D=>{const N=D.target,F=N.userId;if(!(l||F===(o==null?void 0:o.id))){N.set({left:N.left,top:N.top}),s.renderAll();return}console.log("Object moving:",N.left,N.top)},v=D=>{const N=D.target,F=N.userId;if(!(l||F===(o==null?void 0:o.id))){N.set({scaleX:N.scaleX,scaleY:N.scaleY}),s.renderAll();return}console.log("Object scaling:",N.scaleX,N.scaleY)},x=D=>{const N=s.getActiveObject();if(N&&N.customId){const F=N.userId;if(!(l||F===(o==null?void 0:o.id)))return;console.log("Mouse up on object with customId, updating database"),g(N)}},w=D=>{var F;const N=(F=D.selected)==null?void 0:F[0];if(N){t(N);const R=N.userId;(l||R===(o==null?void 0:o.id))&&N.customId&&(console.log("Selection updated, saving object"),g(N))}},_=D=>{const N=D.path;if(N&&o&&a){console.log("Path created, saving to database");const F=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`;N.customId=F,N.authorName=a.surname,N.createdAt=new Date().toISOString(),N.userId=o.id,N.selectable=!0,N.evented=!0,N.moveCursor="move",N.hoverCursor="move",f(N,"path")}},S=D=>{t(D.selected[0]||null)},C=()=>{t(null)},T=async D=>{const N=D.target;if(N&&N.customId){const F=N.userId;if(!(l||F===(o==null?void 0:o.id))){rn.error("Ви можете редагувати тільки свої об'єкти");const{data:z,error:M}=await st.from("whiteboard_objects").select("*").eq("object_id",N.customId).single();if(z&&!M){s.remove(N);const Y=d(z);Y&&(s.add(Y),s.renderAll())}return}console.log("Text changed, new text:",N.text,"customId:",N.customId),g(N)}},E=D=>{const N=D.target;N&&N.type==="textbox"&&(l||N.userId===(o==null?void 0:o.id))&&(s.setActiveObject(N),N.enterEditing(),s.requestRenderAll())};return s.on("object:modified",p),s.on("object:moving",y),s.on("object:scaling",v),s.on("mouse:up",x),s.on("selection:updated",w),s.on("path:created",_),s.on("selection:created",S),s.on("selection:cleared",C),s.on("text:changed",T),s.on("mouse:dblclick",E),()=>{s.off("object:modified",p),s.off("object:moving",y),s.off("object:scaling",v),s.off("mouse:up",x),s.off("selection:updated",w),s.off("path:created",_),s.off("selection:created",S),s.off("selection:cleared",C),s.off("text:changed",T),s.off("mouse:dblclick",E)}},[s,t,o,a,l]),b.useEffect(()=>{if(!s)return;const p=y=>{if(y.key==="Delete"){const v=s.getActiveObject();if(v){const x=v.userId;l||x===(o==null?void 0:o.id)?(s.remove(v),s.renderAll(),m(v)):rn.error("Ви можете видаляти тільки свої об'єкти")}}};return window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}},[s,l,o]),u.jsx("div",{className:"flex justify-center items-center bg-gray-50 p-4 rounded-lg",children:u.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg shadow-lg overflow-x-auto overflow-y-hidden max-w-full",children:u.jsx("canvas",{ref:n,className:"block"})})})},HL=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#FFFFFF"],YL=({selectedTool:r,selectedColor:e,onToolChange:t,onColorChange:n,onClearCanvas:s,selectedObject:i})=>u.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 mb-4",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-white text-sm font-medium",children:"Інструменти:"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx(q,{variant:r==="select"?"default":"outline",size:"sm",onClick:()=>t("select"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:u.jsx(Uk,{className:"w-4 h-4"})}),u.jsx(q,{variant:r==="draw"?"default":"outline",size:"sm",onClick:()=>t("draw"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:u.jsx(Wk,{className:"w-4 h-4"})}),u.jsx(q,{variant:r==="rectangle"?"default":"outline",size:"sm",onClick:()=>t("rectangle"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:u.jsx(Yk,{className:"w-4 h-4"})}),u.jsx(q,{variant:r==="circle"?"default":"outline",size:"sm",onClick:()=>t("circle"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:u.jsx(Rk,{className:"w-4 h-4"})}),u.jsx(q,{variant:r==="text"?"default":"outline",size:"sm",onClick:()=>t("text"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:u.jsx(qk,{className:"w-4 h-4"})})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-white text-sm font-medium",children:"Колір:"}),u.jsx("div",{className:"flex gap-1 flex-wrap",children:HL.map(o=>u.jsx("button",{onClick:()=>n(o),className:`w-6 h-6 rounded border-2 transition-transform hover:scale-110 ${e===o?"border-white scale-110":"border-gray-400"}`,style:{backgroundColor:o},title:o},o))})]}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsxs(q,{variant:"outline",size:"sm",onClick:s,className:"bg-red-500/20 border-red-300/50 text-white hover:bg-red-500/30",children:[u.jsx(Xk,{className:"w-4 h-4 mr-1"}),"Очистити"]})}),i&&u.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[u.jsxs(vp,{variant:"secondary",className:"bg-festival-yellow text-festival-blue",children:["Автор: ",i.authorName||"Невідомо"]}),u.jsx(vp,{variant:"outline",className:"border-white/30 text-white",children:new Date(i.createdAt||Date.now()).toLocaleDateString("uk-UA")})]})]})}),GL=()=>{const r=Tn(),{signOut:e}=Xr(),[t,n]=b.useState("select"),[s,i]=b.useState("#000000"),[o,a]=b.useState(null);b.useEffect(()=>{window.scrollTo(0,0)},[]);const l=async()=>{await e(),r("/")},c=()=>{rn.info("Ви не можете очищати дошку")};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-festival-blue via-festival-blue/90 to-festival-yellow/20",children:[u.jsx("nav",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:u.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Спільна дошка"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs(q,{variant:"outline",onClick:()=>r("/cabinet"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:[u.jsx(Ik,{className:"w-4 h-4 mr-2"}),"Кабінет"]}),u.jsx(q,{variant:"outline",onClick:()=>r("/"),className:"bg-white/10 border-white/30 text-white hover:bg-white/20",children:u.jsx(N1,{className:"w-4 h-4"})}),u.jsx(q,{variant:"outline",onClick:l,className:"bg-red-500/20 border-red-300/50 text-white hover:bg-red-500/30",children:u.jsx(Ng,{className:"w-4 h-4"})})]})]})}),u.jsx("div",{className:"container mx-auto px-4 py-4",children:u.jsx("div",{className:"max-w-7xl mx-auto bg-red-500/30 backdrop-blur-sm border border-white/20 rounded-lg p-4 text-white/90 text-center",children:u.jsx("p",{className:"font-semibold",children:"Увага! На мобільних телефонах краще використовувати альбомну орієнтацію екрану"})})}),u.jsx("div",{className:"container mx-auto px-4 py-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Інструкції"}),u.jsxs("div",{className:"text-white/90 space-y-2",children:[u.jsx("p",{children:"• Виберіть інструмент та колір для роботи з дошкою"}),u.jsx("p",{children:"• Натисніть на дошку, щоб створити об'єкт вибраним інструментом"}),u.jsx("p",{children:`• Виберіть інструмент "вибір\\зміна", щоб редагувати об'єкт. Клікніть на об'єкт, щоб вибрати його`}),u.jsx("p",{children:"• Ви можете змінювати та видаляти тільки свої об'єкти"}),u.jsx("p",{children:"• Для видалення об'єкту виберіть його та натисніть Delete"}),u.jsx("p",{children:"• Всі зміни автоматично синхронізуються з іншими користувачами"})]})]}),u.jsx(YL,{selectedTool:t,selectedColor:s,onToolChange:n,onColorChange:i,onClearCanvas:c,selectedObject:o}),u.jsx("div",{className:"w-full overflow-x-auto bg-white/5 backdrop-blur-sm border border-white/20 rounded-lg p-4 sm:p-6",children:u.jsx("div",{className:"min-w-[1200px]",children:u.jsx(VL,{selectedTool:t,selectedColor:s,onObjectSelected:a})})}),u.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-4 mt-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Інструменти"}),u.jsxs("div",{className:"text-white/90 text-sm space-y-1",children:[u.jsxs("p",{children:["• ",u.jsx("strong",{children:"Вибір\\зміна:"})," Натисніть на об'єкт щоб його вибрати. Ви можете міняти розміри, крутити об'єкт або переміщувати його"]}),u.jsxs("p",{children:["• ",u.jsx("strong",{children:"Малювання:"})," Дозволяє вільно малювати на дошці"]}),u.jsxs("p",{children:["• ",u.jsx("strong",{children:"Прямокутник:"})," Створює прямокутник"]}),u.jsxs("p",{children:["• ",u.jsx("strong",{children:"Коло:"})," Створює коло"]}),u.jsxs("p",{children:["• ",u.jsx("strong",{children:"Текст:"}),' Створює бокс із текстом. Щоб редагувати текст, виберіть інструмент "Вибір\\зміна" та клацніть на тексті два рази']})]})]})]})})]})},XL=()=>{const{signIn:r,isAuthenticated:e}=Xr(),t=Tn(),[n,s]=b.useState(""),[i,o]=b.useState(""),[a,l]=b.useState(!1),[c,h]=b.useState("");b.useEffect(()=>{e&&t("/cabinet")},[e,t]);const d=async g=>{if(g.preventDefault(),!n.trim()||!i.trim()){h("Будь ласка, заповніть всі поля");return}l(!0),h("");try{const m=await r(n.trim(),i.trim());m.success||h(m.error||"Помилка входу")}catch{h("Помилка входу в систему")}finally{l(!1)}},f=()=>{t("/")};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md space-y-6",children:[u.jsxs(q,{variant:"ghost",onClick:f,className:"mb-4 text-muted-foreground hover:text-foreground",children:[u.jsx(vu,{className:"mr-2 h-4 w-4"}),"На головну"]}),u.jsxs(Rt,{className:"w-full",children:[u.jsx(Lt,{className:"text-center",children:u.jsxs(It,{className:"flex items-center justify-center gap-3 text-xl text-festival-blue",children:[u.jsx(P1,{className:"w-6 h-6"}),"Автентифікація"]})}),u.jsxs(Ft,{children:[u.jsx("div",{className:"bg-festival-yellow/10 p-4 rounded-lg mb-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(yu,{className:"w-5 h-5 text-festival-blue mt-0.5 flex-shrink-0"}),u.jsx("div",{children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"Доступ до особистого кабінету та певних сторінок сайту є тільки у громадян Республіки."})})]})}),u.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Ga,{htmlFor:"surname",className:"text-festival-blue font-medium",children:"Прізвище"}),u.jsx(Ya,{id:"surname",type:"text",placeholder:"ВЕЙВІВСЬКИЙ",value:n,onChange:g=>s(g.target.value.toUpperCase()),disabled:a,className:"mt-1"})]}),u.jsxs("div",{children:[u.jsx(Ga,{htmlFor:"passport",className:"text-festival-blue font-medium",children:"Серія та номер паспорту"}),u.jsx(Ya,{id:"passport",type:"text",placeholder:"АБ0000",value:i,onChange:g=>o(g.target.value.toUpperCase()),disabled:a,className:"mt-1"})]}),c&&u.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(yu,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),u.jsx("p",{className:"text-sm text-red-700",children:c})]})}),u.jsx("div",{className:"pt-2",children:u.jsx(q,{type:"submit",variant:"hero",disabled:a||!n.trim()||!i.trim(),className:"w-full",children:a?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Вхід..."]}):u.jsxs(u.Fragment,{children:[u.jsx(O1,{className:"w-4 h-4 mr-2"}),"Увійти"]})})})]}),u.jsxs("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"text-xs text-muted-foreground text-center mb-2 font-medium",children:"Увага! Доступ надається лише громадянам Республіки з дійсним паспортом нового зразка (не раніше ніж 2022-го року видачі)."}),u.jsxs("div",{className:"text-xs text-muted-foreground",children:[u.jsx("p",{className:"font-medium mb-2",children:"Інструкції:"}),u.jsxs("ul",{className:"space-y-1",children:[u.jsx("li",{children:"• Прізвище вводьте великими літерами українською мовою"}),u.jsx("li",{children:"• Серію та номер паспорту вводьте без пробілу"}),u.jsx("li",{children:"• Для успішного входу в кабінет ваш паспорт має бути дійсним"})]})]})]})]})]})]})})},qL=()=>{const r=ph();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",r.pathname)},[r.pathname]),u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),u.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Такої сторінки не існує. Як і щастя у вашому житті."}),u.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Повернутись"})]})})},KL=new sN,QL=()=>u.jsx(oN,{client:KL,children:u.jsx(mA,{children:u.jsxs(RO,{children:[u.jsx(PT,{}),u.jsx(oE,{}),u.jsx(QN,{children:u.jsxs(XN,{children:[u.jsx(Jr,{path:"/",element:u.jsx(LR,{})}),u.jsx(Jr,{path:"/auth",element:u.jsx(XL,{})}),u.jsx(Jr,{path:"/festival-details",element:u.jsx(Qo,{children:u.jsx(IR,{})})}),u.jsx(Jr,{path:"/next-festival",element:u.jsx(Qo,{children:u.jsx(UR,{})})}),u.jsx(Jr,{path:"/festival-stats",element:u.jsx(Qo,{children:u.jsx(KR,{})})}),u.jsx(Jr,{path:"/cabinet",element:u.jsx(Qo,{children:u.jsx(e5,{})})}),u.jsx(Jr,{path:"/whiteboard",element:u.jsx(Qo,{children:u.jsx(GL,{})})}),u.jsx(Jr,{path:"*",element:u.jsx(qL,{})})]})})]})})});Zw(document.getElementById("root")).render(u.jsx(QL,{}));
